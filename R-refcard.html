<!-- <xml version="1.0"> -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="american" xml:lang="american">
<head>
  <meta name="generator" content=
  "HTML Tidy for Cygwin (vers 1st September 2004), see www.w3.org" />

  <title>R quick reference card</title><!-- 2013-10-16 Wed 18:33 -->
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Org-mode" />
  <meta name="author" content="Fabrice Niessen" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"
type="text/javascript">
</script>
  <link rel="stylesheet" type="text/css" href=
  "file:///D:/Users/fni/src/org-style/bigblow/css/bigblow.css" />
  <link rel="stylesheet" type="text/css" href=
  "file:///D:/Users/fni/src/org-style/bigblow/css/htmlize.css" />
<script type="text/javascript" src=
"file:///D:/Users/fni/src/org-style/bigblow/js/bigblow.js">
</script>
</head>

<body>
  <div id="content">
    <h1 class="title">R quick reference card</h1>

    <div id="table-of-contents">
      <h2>Table of Contents</h2>

      <div id="text-table-of-contents">
        <ul>
          <li><a href="#sec-1">1. R reference card</a></li>

          <li><a href="#sec-2">2. Overview of R</a></li>

          <li><a href="#sec-3">3. 1. Getting started and getting help</a></li>

          <li>
            <a href="#sec-4">4. 2. Some basics</a>

            <ul>
              <li><a href="#sec-4-1">4.1. Setting variables</a></li>

              <li><a href="#sec-4-2">4.2. Listing variables</a></li>

              <li><a href="#sec-4-3">4.3. Deleting variables</a></li>

              <li><a href="#sec-4-4">4.4. Computing basic statistics</a></li>

              <li><a href="#sec-4-5">4.5. Creating sequences</a></li>

              <li><a href="#sec-4-6">4.6. Defining a function</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-5">5. 3. Navigating the software</a>

            <ul>
              <li><a href="#sec-5-1">5.1. 13. Running a batch script</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-6">6. 4. Input and output</a>

            <ul>
              <li><a href="#sec-6-1">6.1. Reading tabular data files</a></li>

              <li><a href="#sec-6-2">6.2. Reading from CSV files</a></li>

              <li><a href="#sec-6-3">6.3. Reading from SQL databases</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-7">7. 5. Data structures</a>

            <ul>
              <li><a href="#sec-7-1">7.1. Vectors</a></li>

              <li><a href="#sec-7-2">7.2. Matrices</a></li>

              <li><a href="#sec-7-3">7.3. Lists</a></li>

              <li><a href="#sec-7-4">7.4. Factors</a></li>

              <li><a href="#sec-7-5">7.5. Data frames</a></li>

              <li><a href="#sec-7-6">7.6. 7. Selecting list elements or data
              frame columns by position (subsetting)</a></li>

              <li><a href="#sec-7-7">7.7. 8. Selecting list elements or data
              frame columns by name (subsetting)</a></li>

              <li><a href="#sec-7-8">7.8. 27. Removing rows that contain NAs
              from a data frame</a></li>

              <li><a href="#sec-7-9">7.9. 27b. Removing columns that contain
              NAs from a data frame</a></li>

              <li><a href="#sec-7-10">7.10. 32. Converting</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-8">8. 6. Data transformations</a>

            <ul>
              <li><a href="#sec-8-1">8.1. Splitting a vector into
              groups</a></li>

              <li><a href="#sec-8-2">8.2. The <code>apply</code>
              functions</a></li>

              <li><a href="#sec-8-3">8.3. <code>lapply</code></a></li>

              <li><a href="#sec-8-4">8.4. split</a></li>

              <li><a href="#sec-8-5">8.5. <code>sapply</code></a></li>

              <li><a href="#sec-8-6">8.6. <code>apply</code></a></li>

              <li><a href="#sec-8-7">8.7. tapply(X, INDEX, FUN)</a></li>

              <li><a href="#sec-8-8">8.8. <code>mapply</code></a></li>
            </ul>
          </li>

          <li><a href="#sec-9">9. 7. Strings and dates</a></li>

          <li><a href="#sec-10">10. 8. Probability</a></li>

          <li>
            <a href="#sec-11">11. 9. General statistics</a>

            <ul>
              <li><a href="#sec-11-1">11.1. Summarizing your data</a></li>

              <li><a href="#sec-11-2">11.2. Tabulating factors</a></li>
            </ul>
          </li>

          <li><a href="#sec-12">12. 10. Graphics</a></li>

          <li><a href="#sec-13">13. 11. Linear regression and ANOVA</a></li>

          <li>
            <a href="#sec-14">14. 12. Useful tricks</a>

            <ul>
              <li><a href="#sec-14-1">14.1. Peeking at your data</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <div id="outline-container-sec-1" class="outline-2">
      <h2 id="sec-1"><span class="section-number-2">1</span> R reference
      card</h2>

      <div class="outline-text-2" id="text-1">
        <p>Welcome to R reference card. It contains the reference documentation
        that describes how to perform <b>data analysis</b> using R.</p>
      </div>
    </div>

    <div id="outline-container-sec-2" class="outline-2">
      <h2 id="sec-2"><span class="section-number-2">2</span> Overview of R</h2>

      <div class="outline-text-2" id="text-2">
        <p>R system that you download from <a href=
        "http://cran.r-project.org/">CRAN</a>:</p>

        <ul class="org-ul">
          <li><code>base</code> package</li>

          <li>Familiar packages (<code>utils</code>, <code>datasets</code>,
          …)</li>

          <li>Recommended packages (<code>lattice</code>, …)</li>

          <li>4,000 other packages</li>
        </ul>

        <p>Some R manuals:</p>

        <ul class="org-ul">
          <li><a href="http://cran.r-project.org/doc/manuals/R-intro.html">An
          introduction to R</a></li>

          <li><a href=
          "http://cran.r-project.org/doc/manuals/R-exts.html">Writing R
          extensions</a></li>

          <li><a href=
          "http://cran.r-project.org/doc/manuals/r-release/R-data.html">R data
          import/export</a></li>
        </ul>
      </div>
    </div>

    <div id="outline-container-sec-3" class="outline-2">
      <h2 id="sec-3"><span class="section-number-2">3</span> 1. Getting started
      and getting help</h2>

      <div class="outline-text-2" id="text-3">
        <div class="org-src-container">
          <pre class="src src-R">
?function
?dataset
package ? lattice
library(help = lattice)
</pre>
        </div>

        <dl class="org-dl">
          <dt>args(function)</dt>

          <dd>Look at the arguments of a FUNCTION.</dd>

          <dt>(no term)</dt>

          <dd>Google</dd>

          <dt>(no term)</dt>

          <dd><a href="mailto:r-help@r-project.org">R general mailing
          list</a></dd>

          <dt>(no term)</dt>

          <dd><a href="http://stackoverflow.com/questions/tagged/r">Stack
          Overflow</a></dd>
        </dl>
      </div>
    </div>

    <div id="outline-container-sec-4" class="outline-2">
      <h2 id="sec-4"><span class="section-number-2">4</span> 2. Some
      basics</h2>

      <div class="outline-text-2" id="text-4"></div>

      <div id="outline-container-sec-4-1" class="outline-3">
        <h3 id="sec-4-1"><span class="section-number-3">4.1</span> Setting
        variables</h3>

        <div class="outline-text-3" id="text-4-1">
          <dl class="org-dl">
            <dt><code>&lt;-</code></dt>

            <dd>Assign a value to a variable.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-2" class="outline-3">
        <h3 id="sec-4-2"><span class="section-number-3">4.2</span> Listing
        variables</h3>

        <div class="outline-text-3" id="text-4-2">
          <dl class="org-dl">
            <dt><code>ls()</code>, <code>ls.str()</code></dt>

            <dd>Show objects in my workspace.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-3" class="outline-3">
        <h3 id="sec-4-3"><span class="section-number-3">4.3</span> Deleting
        variables</h3>

        <div class="outline-text-3" id="text-4-3">
          <dl class="org-dl">
            <dt><code>rm()</code></dt>

            <dd>
              Remove objects from your workspace.

              <div class="org-src-container">
                <pre class="src src-R">
rm(list=ls())                      # remove everything from the workspace
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-4" class="outline-3">
        <h3 id="sec-4-4"><span class="section-number-3">4.4</span> Computing
        basic statistics</h3>

        <div class="outline-text-3" id="text-4-4">
          <dl class="org-dl">
            <dt><code>mean()</code></dt>

            <dd>Take the mean.</dd>

            <dt><code>median()</code></dt>

            <dd>Take the median.</dd>

            <dt><code>cor()</code></dt>

            <dd>Correlation function.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-5" class="outline-3">
        <h3 id="sec-4-5"><span class="section-number-3">4.5</span> Creating
        sequences</h3>

        <div class="outline-text-3" id="text-4-5">
          <dl class="org-dl">
            <dt><code>n:m</code></dt>

            <dd>Create an <b>sequence of</b> integers from <code>n</code> to
            <code>m</code> (<code>n</code> &lt; <code>m</code> or
            <code>n</code> &gt; <code>m</code>).</dd>

            <dt><code>seq(from, to, len)</code></dt>

            <dd>Create a <b>sequence of</b> <code>len</code> equally spaced
            fractional numbers.</dd>

            <dt><code>rep(x, times)</code></dt>

            <dd>Create a series of repeated values.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-6" class="outline-3">
        <h3 id="sec-4-6"><span class="section-number-3">4.6</span> Defining a
        function</h3>

        <div class="outline-text-3" id="text-4-6">
          <div class="org-src-container">
            <pre class="src src-R">
myfunction &lt;- function(x) {
    y &lt;- norm(100)
    mean(y)
}
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-5" class="outline-2">
      <h2 id="sec-5"><span class="section-number-2">5</span> 3. Navigating the
      software</h2>

      <div class="outline-text-2" id="text-5">
        <dl class="org-dl">
          <dt><code>getwd()</code></dt>

          <dd>Figure out what your working directory is.</dd>

          <dt><code>library(package)</code></dt>

          <dd>Load PACKAGE.</dd>

          <dt><code>data(dataset)</code></dt>

          <dd>Load DATASET.</dd>

          <dt><code>source("file.R")</code></dt>

          <dd>Load R code file.</dd>
        </dl>
      </div>

      <div id="outline-container-sec-5-1" class="outline-3">
        <h3 id="sec-5-1"><span class="section-number-3">5.1</span> 13. Running
        a batch script</h3>

        <div class="outline-text-3" id="text-5-1">
          <p>You may write a script containing R code:</p>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #008200;">#</span><span style=
"color: #008200; font-style: italic;">!/usr/bin/</span><span style=
"color: #0000FF;">env</span><span style=
"color: #008200; font-style: italic;"> Rscript</span>

argv &lt;- commandArgs(TRUE)
x &lt;- as.numeric(argv[1])
<span style="color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">etc.</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-6" class="outline-2">
      <h2 id="sec-6"><span class="section-number-2">6</span> 4. Input and
      output</h2>

      <div class="outline-text-2" id="text-6"></div>

      <div id="outline-container-sec-6-1" class="outline-3">
        <h3 id="sec-6-1"><span class="section-number-3">6.1</span> Reading
        tabular data files</h3>

        <div class="outline-text-3" id="text-6-1">
          <dl class="org-dl">
            <dt><code>read.table("file.txt")</code></dt>

            <dd>
              Read tabular data file, create data frame.

              <p>Important arguments:</p>

              <ul class="org-ul">
                <li><code>file</code>,</li>

                <li><code>header</code>,</li>

                <li><code>sep</code> (defaults to the <b>space</b>)</li>

                <li><code>colClasses</code>, class of each column</li>

                <li><code>nrows</code>,</li>

                <li><code>comment.char</code>,</li>

                <li><code>skip</code>, number of lines to skip from the
                beginning</li>

                <li><code>stringsAsFactors</code> (defaults to
                <code>TRUE</code>)</li>
              </ul>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-6-2" class="outline-3">
        <h3 id="sec-6-2"><span class="section-number-3">6.2</span> Reading from
        CSV files</h3>

        <div class="outline-text-3" id="text-6-2">
          <dl class="org-dl">
            <dt><code>read.csv("file.csv")</code></dt>

            <dd>
              Read data from CSV file, create data frame.

              <ul class="org-ul">
                <li><code>header</code> defaults to <code>TRUE</code></li>

                <li>default <code>separator</code>: <b>comma</b></li>
              </ul>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-6-3" class="outline-3">
        <h3 id="sec-6-3"><span class="section-number-3">6.3</span> Reading from
        SQL databases</h3>

        <div class="outline-text-3" id="text-6-3">
          <div class="org-src-container">
            <pre class="src src-R">
library(RODBC)
# con &lt;- odbcConnect("DSN", uid="username")
con &lt;- odbcDriverConnect('driver={SQL Server};server=hostname;database=dbname;uid=username;pwd=password')
sql &lt;- 'SELECT * FROM table'
rows &lt;- sqlQuery(con, sql)
print(head(rows))
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-7" class="outline-2">
      <h2 id="sec-7"><span class="section-number-2">7</span> 5. Data
      structures</h2>

      <div class="outline-text-2" id="text-7">
        <table border="2" cellspacing="0" cellpadding="6" rules="groups" frame=
        "hsides">
          <colgroup>
            <col class="left" />
            <col class="left" />
          </colgroup>

          <thead>
            <tr>
              <th scope="col" class="left">Class</th>

              <th scope="col" class="left">Example</th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td class="left"><code>logical</code></td>

              <td class="left"><code>TRUE</code> / <code>FALSE</code></td>
            </tr>

            <tr>
              <td class="left"><code>integer</code></td>

              <td class="left"><code>1L</code> (with explicit <code>L</code>
              suffix)</td>
            </tr>

            <tr>
              <td class="left"><code>numeric</code></td>

              <td class="left"><code>0.5</code> or <code>1</code> (<i>real</i>
              numbers)</td>
            </tr>

            <tr>
              <td class="left"><code>complex</code></td>

              <td class="left"><code>1+0i</code></td>
            </tr>

            <tr>
              <td class="left"><code>character</code></td>

              <td class="left">"hello" (lowest class)</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div id="outline-container-sec-7-1" class="outline-3">
        <h3 id="sec-7-1"><span class="section-number-3">7.1</span> Vectors</h3>

        <div class="outline-text-3" id="text-7-1">
          <p><b>Vectors</b> are sets of elements of the <i>same class</i>.</p>

          <p>When objects of different classes are mixed in a vector,
          <i>coercion</i> occurs behind the scene so that every element is of
          the same class (the "lowest common denominator" class).</p>

          <dl class="org-dl">
            <dt><code>c()</code></dt>

            <dd>Create a vector of objects (that is, <b>concatenate</b> or
            combine things together).</dd>

            <dt><code>vector(class, length)</code></dt>

            <dd>Create an empty vector.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-7-2" class="outline-3">
        <h3 id="sec-7-2"><span class="section-number-3">7.2</span>
        Matrices</h3>

        <div class="outline-text-3" id="text-7-2">
          <p><b>Matrices</b> are vectors with multiple dimensions
          (<code>dimension</code> attribute).</p>

          <p>They are constructed <i>column-wise</i> (vector inserted by
          column).</p>

          <p>They can be created from vectors by adding a dimension
          attribute:</p>

          <div class="org-src-container">
            <pre class="src src-R">
v &lt;- 1:10
dim(v) &lt;- c(2,5)
print(v)
</pre>
          </div>

          <table border="2" cellspacing="0" cellpadding="6" rules="groups"
          frame="hsides">
            <colgroup>
              <col class="right" />
              <col class="right" />
              <col class="right" />
              <col class="right" />
              <col class="right" />
            </colgroup>

            <tbody>
              <tr>
                <td class="right">1</td>

                <td class="right">3</td>

                <td class="right">5</td>

                <td class="right">7</td>

                <td class="right">9</td>
              </tr>

              <tr>
                <td class="right">2</td>

                <td class="right">4</td>

                <td class="right">6</td>

                <td class="right">8</td>

                <td class="right">10</td>
              </tr>
            </tbody>
          </table>

          <p>They can be created by <i>column-binding</i> or
          <i>row-binding</i>.</p>

          <dl class="org-dl">
            <dt><code>matrix(nrow = x, ncol = y)</code></dt>

            <dd>Create an empty matrix.</dd>

            <dt><code>cbind()</code></dt>

            <dd>Column-bind.</dd>

            <dt><code>rbind()</code></dt>

            <dd>Row-bind.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-7-3" class="outline-3">
        <h3 id="sec-7-3"><span class="section-number-3">7.3</span> Lists</h3>

        <div class="outline-text-3" id="text-7-3">
          <p><b>Lists</b> are vectors of objects of possibly different
          classes.</p>

          <p>The indexes of the elements of a list have double brackets around
          them.</p>

          <dl class="org-dl">
            <dt><code>list()</code></dt>

            <dd>Construct a list.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-7-4" class="outline-3">
        <h3 id="sec-7-4"><span class="section-number-3">7.4</span> Factors</h3>

        <div class="outline-text-3" id="text-7-4">
          <p><b>Factors</b> are <i>qualitative</i> variables used to represent
          <i>categorical</i> data, to store self-describing codes for
          <i>labels</i> (such as "male" and "female", or "low", "medium" and
          "high").</p>

          <p>Unordered or ordered.</p>

          <dl class="org-dl">
            <dt><code>factor(character vector)</code></dt>

            <dd>Create a factor variable (with levels by alphabetical
            order).</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-7-5" class="outline-3">
        <h3 id="sec-7-5"><span class="section-number-3">7.5</span> Data
        frames</h3>

        <div class="outline-text-3" id="text-7-5">
          <p><b>Data frames</b> are used to store tabular data where each
          column can be of a different class: special type of list (of columns)
          where every element has the same length.</p>

          <ul class="org-ul">
            <li>Row = observation, column = variable</li>

            <li>Special attribute <code>row.names</code> (every row has a name,
            or defaults to a sequence of integers)</li>

            <li>Most often created by calling <code>read.table()</code> or
            <code>read.csv()</code></li>

            <li id="&lt;code&gt;data.frame()&lt;/code&gt;">Create a data
            frame.</li>

            <li id="&lt;code&gt;data.matrix()&lt;/code&gt;">Convert a data
            frame to a <i>numeric</i> matrix (forced <b>coercion</b>!).</li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-7-6" class="outline-3">
        <h3 id="sec-7-6"><span class="section-number-3">7.6</span> 7. Selecting
        list elements or data frame columns by position (subsetting)</h3>

        <div class="outline-text-3" id="text-7-6">
          <dl class="org-dl">
            <dt><code>[[</code></dt>

            <dd>
              Extract a <b>single element</b> of a list (or a single column of
              a data frame).

              <p>Can be used with <i>computed</i> indices.</p>

              <p>Can extract nested elements of a list:</p>

              <div class="org-src-container">
                <pre class="src src-R">
x[[1]][[3]]                        # same as: x[[c(1,3)]]
                                   # third element of the first element
</pre>
              </div>

              <p>Partial matching allowed at the command-line:</p>

              <div class="org-src-container">
                <pre class="src src-R">
x[["a", exact = FALSE]]            # instead of: x[["aardvark"]]
</pre>
              </div>
            </dd>

            <dt><code>[</code></dt>

            <dd>
              Return an object of the <b>same class</b> as the original: a list
              of elements (or a data frame built from multiple columns).

              <p>Extract multiple elements of a list:</p>

              <div class="org-src-container">
                <pre class="src src-R">
x[c(1,3)]
</pre>
              </div>

              <p>Remove the first column:</p>

              <div class="org-src-container">
                <pre class="src src-R">
df[,-1]
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-7-7" class="outline-3">
        <h3 id="sec-7-7"><span class="section-number-3">7.7</span> 8. Selecting
        list elements or data frame columns by name (subsetting)</h3>

        <div class="outline-text-3" id="text-7-7">
          <dl class="org-dl">
            <dt><code>$</code></dt>

            <dd>
              Extract a single element of a list (or a single column of a data
              frame) <b>by name</b>: you don't have to remember where the
              element is in the list.

              <div class="org-src-container">
                <pre class="src src-R">
x$bar                              # same as x[["bar"]]
</pre>
              </div>

              <p>Can only be used with literal names.</p>

              <p>Partial matching allowed at the command-line:</p>

              <div class="org-src-container">
                <pre class="src src-R">
x$a                                # instead of: x$aardvark
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-7-8" class="outline-3">
        <h3 id="sec-7-8"><span class="section-number-3">7.8</span> 27. Removing
        rows that contain NAs from a data frame</h3>
      </div>

      <div id="outline-container-sec-7-9" class="outline-3">
        <h3 id="sec-7-9"><span class="section-number-3">7.9</span> 27b.
        Removing columns that contain NAs from a data frame</h3>

        <div class="outline-text-3" id="text-7-9">
          <p>Get rid of any column that has one or more NAs.</p>

          <div class="org-src-container">
            <pre class="src src-R">
df &lt;- df[,colSums(is.na(df))==0]
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-7-10" class="outline-3">
        <h3 id="sec-7-10"><span class="section-number-3">7.10</span> 32.
        Converting</h3>

        <div class="outline-text-3" id="text-7-10">
          <dl class="org-dl">
            <dt><code>as.*()</code></dt>

            <dd>Explicitly coerce from one class to another.</dd>

            <dt><code>as.numeric()</code></dt>

            <dd>Coerce the (<code>character</code>) column to be
            <code>numeric</code>.</dd>

            <dt><code>as.Date("January 2, 2007", "%B %d, %Y")</code></dt>

            <dd>"2007-01-02"</dd>

            <dt><code>as.ts()</code></dt>

            <dd>Convert to a time series object.</dd>
          </dl>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-8" class="outline-2">
      <h2 id="sec-8"><span class="section-number-2">8</span> 6. Data
      transformations</h2>

      <div class="outline-text-2" id="text-8"></div>

      <div id="outline-container-sec-8-1" class="outline-3">
        <h3 id="sec-8-1"><span class="section-number-3">8.1</span> Splitting a
        vector into groups</h3>

        <div class="outline-text-3" id="text-8-1">
          <dl class="org-dl">
            <dt><code>split(dataframe, dataframe$column)</code></dt>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-8-2" class="outline-3">
        <h3 id="sec-8-2"><span class="section-number-3">8.2</span> The
        <code>apply</code> functions</h3>

        <div class="outline-text-3" id="text-8-2">
          <p>Alternative (to <code>for</code> <b>loops</b>) to apply a function
          (or summary statistics)</p>
        </div>
      </div>

      <div id="outline-container-sec-8-3" class="outline-3">
        <h3 id="sec-8-3"><span class="section-number-3">8.3</span>
        <code>lapply</code></h3>

        <div class="outline-text-3" id="text-8-3">
          <ul class="org-ul">
            <li>Loop over a single <b>list</b> and apply a <b>function</b> on
            each element

              <ul class="org-ul">
                <li>(coerced) list <code>X</code></li>

                <li>function <code>FUN</code></li>

                <li>other arguments <code>...</code></li>
              </ul>
            </li>

            <li>Always returns a <b>list</b> back (that is, not a simplified
            result)</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-R">
x &lt;- list(a = 1:5, b = rnorm(10))
lapply(x, mean)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-R">
lapply(1:4, runif, min = 0, max = 10) # arguments passed through the ...
</pre>
          </div>

          <ul class="org-ul">
            <li>Extract the first column of each matrix of a list

              <div class="org-src-container">
                <pre class="src src-R">
lapply(x, function(elt) elt[,1])
</pre>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-8-4" class="outline-3">
        <h3 id="sec-8-4"><span class="section-number-3">8.4</span> split</h3>

        <div class="outline-text-3" id="text-8-4">
          <ul class="org-ul">
            <li>Auxiliary function, useful in conjunction with functions like
            <code>lapply</code> or <code>sapply</code></li>

            <li>Takes a vector, and <b>split</b> it into subpieces (the number
            of groups identified by the levels of a factor variable)</li>

            <li>Always return a <b>list</b> back

              <dl class="org-dl">
                <dt>drop = TRUE</dt>

                <dd>Don't keep the empty levels of the factor</dd>
              </dl>
            </li>

            <li>Used in conjunction with functions like <code>lapply</code> or
            <code>sapply</code> to apply a function to those individual groups

              <div class="org-src-container">
                <pre class="src src-R">
lapply(split(x, f), mean)
</pre>
              </div>
            </li>

            <li>Like <code>tapply</code>, but without applying the summary
            statistics</li>

            <li>Splitting a data frame (or other kinds of lists), and apply an
            <i>anonymous function</i>

              <div class="org-src-container">
                <pre class="src src-R">
s &lt;- split(airquality, airquality$Month) # split according to month
lapply(s, function(x) colMeans(x[, c("Ozone", "Solar.R", "Wind")])
</pre>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-8-5" class="outline-3">
        <h3 id="sec-8-5"><span class="section-number-3">8.5</span>
        <code>sapply</code></h3>

        <div class="outline-text-3" id="text-8-5">
          <ul class="org-ul">
            <li>Same as lapply, but tries to <b>simplify</b> the result in a
            much more compact format (put all the elements into a <b>vector</b>
            or a <b>matrix</b>, instead of returning a list)

              <div class="org-src-container">
                <pre class="src src-R">
sapply(s, function(x) colMeans(x[, c("Ozone", "Solar.R", "Wind")]))
</pre>
              </div>
            </li>

            <li>Pass <code>na.rm</code> argument to <code>ColMeans</code> to
            remove the missing values before calculating the mean

              <div class="org-src-container">
                <pre class="src src-R">
sapply(s, function(x) colMeans(x[, c("Ozone", "Solar.R", "Wind")],
                               na.rm = TRUE))
</pre>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-8-6" class="outline-3">
        <h3 id="sec-8-6"><span class="section-number-3">8.6</span>
        <code>apply</code></h3>

        <div class="outline-text-3" id="text-8-6">
          <ul class="org-ul">
            <li>Apply a (anonymous) function over the <b>margins</b> of an
            array

              <ul class="org-ul">
                <li>Very useful if you wanna take <b>summaries</b> of matrices
                or higher-dimensional arrays</li>

                <li>Often used to apply a function to the rows or columns of a
                matrix</li>

                <li>Can be used with general arrays (such as array of
                matrices)</li>
              </ul>
            </li>

            <li>apply(X, MARGIN, FUN, …)

              <ul class="org-ul">
                <li>X array (= vector which has dimensions attached to it;
                matrix = 2-dimensional array)</li>

                <li>MARGIN is an integer vector which indicates which margins
                should be "retained"</li>

                <li>FUN you want to apply to each of the margins</li>

                <li>… for other arguments you wanna passed to the function</li>
              </ul>
            </li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-R">
x &lt;- matrix(rnorm(200), 20, 10)
apply(x, 2, mean)
</pre>
          </div>

          <ul class="org-ul">
            <li>margin 1 = apply FUN for each row (dimension 1); preserve all
            the rows, eliminate all columns, get a vector of the number of
            rows</li>

            <li>margin 2 = for each column (dimension 2); first dimension has
            been eliminated</li>

            <li>Shortcut functions (<i>much</i> faster on large matrices):

              <ul class="org-ul">
                <li>rowSums = apply(x, 1, sum)</li>

                <li>rowMeans = apply(x, 1, mean)</li>

                <li>colSums = apply(x, 2, sum)</li>

                <li>colMeans = apply(x, 2, mean)</li>
              </ul>
            </li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-R">
x &lt;- matrix(rnorm(200), 20, 10)
apply(x, 1, quantile, probs = c(0.25, 0.75)) # no default value for `probs'
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-8-7" class="outline-3">
        <h3 id="sec-8-7"><span class="section-number-3">8.7</span> tapply(X,
        INDEX, FUN)</h3>

        <div class="outline-text-3" id="text-8-7">
          <ul class="org-ul">
            <li>Short for "table apply"</li>

            <li>Apply a <b>function</b> over <b>subsets</b> of a vector:

              <ul class="org-ul">
                <li>Splits up a vector into little groups (such as men and
                women, indicated by a <b>factor</b>),</li>

                <li>Applies a function to those groups and</li>

                <li>Brings the pieces back together</li>
              </ul>
            </li>

            <li>Function may be anonymous</li>

            <li>Simplify = FALSE to get back a list

              <div class="org-src-container">
                <pre class="src src-R">
tapply(x, f, mean, simplify = FALSE)   =   lapply(split(x, f), mean)
</pre>
              </div>
            </li>

            <li id="interaction(f1, f2)">combines all the levels of the first
            factor with all the levels of the second factor</li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-8-8" class="outline-3">
        <h3 id="sec-8-8"><span class="section-number-3">8.8</span>
        <code>mapply</code></h3>

        <div class="outline-text-3" id="text-8-8">
          <ul class="org-ul">
            <li>mapply is a multivariate version of <code>lapply</code>:
            applies a function in parallel over a set of arguments</li>

            <li>Apply a <b>function</b> to the elements of <b>multiple
            lists</b> in parallel

              <ul class="org-ul">
                <li>For example, apply a function over 2 lists, where the
                elements of the first list go into one argument of the
                function, and the elements of the second list go into another
                argument of the function</li>
              </ul>
            </li>

            <li>
              <b>Vectorizing a function</b> (that doesn't allow for vector
              arguments)

              <div class="org-src-container">
                <pre class="src src-R">
mapply(rnorm, 1:5, 1:5, 2) # fixed standard deviation
</pre>
              </div>

              <p>is the same as</p>

              <div class="org-src-container">
                <pre class="src src-R">
list(rnorm(1, 1, 2),
     rnorm(2, 2, 2),
     rnorm(3, 3, 2),
     rnorm(4, 4, 2),
     rnorm(5, 5, 2))
</pre>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-9" class="outline-2">
      <h2 id="sec-9"><span class="section-number-2">9</span> 7. Strings and
      dates</h2>
    </div>

    <div id="outline-container-sec-10" class="outline-2">
      <h2 id="sec-10"><span class="section-number-2">10</span> 8.
      Probability</h2>
    </div>

    <div id="outline-container-sec-11" class="outline-2">
      <h2 id="sec-11"><span class="section-number-2">11</span> 9. General
      statistics</h2>

      <div class="outline-text-2" id="text-11"></div>

      <div id="outline-container-sec-11-1" class="outline-3">
        <h3 id="sec-11-1"><span class="section-number-3">11.1</span>
        Summarizing your data</h3>

        <div class="outline-text-3" id="text-11-1">
          <dl class="org-dl">
            <dt><code>summary()</code></dt>

            <dd>Produce a summary of the object.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-11-2" class="outline-3">
        <h3 id="sec-11-2"><span class="section-number-3">11.2</span> Tabulating
        factors</h3>

        <div class="outline-text-3" id="text-11-2">
          <dl class="org-dl">
            <dt><code>table(vector)</code></dt>

            <dd><b>Count</b> the number of observations in each <i>level</i>
            (see factors). Give a frequency of how many levels there are.</dd>
          </dl>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-12" class="outline-2">
      <h2 id="sec-12"><span class="section-number-2">12</span> 10.
      Graphics</h2>
    </div>

    <div id="outline-container-sec-13" class="outline-2">
      <h2 id="sec-13"><span class="section-number-2">13</span> 11. Linear
      regression and ANOVA</h2>
    </div>

    <div id="outline-container-sec-14" class="outline-2">
      <h2 id="sec-14"><span class="section-number-2">14</span> 12. Useful
      tricks</h2>

      <div class="outline-text-2" id="text-14"></div>

      <div id="outline-container-sec-14-1" class="outline-3">
        <h3 id="sec-14-1"><span class="section-number-3">14.1</span> Peeking at
        your data</h3>

        <div class="outline-text-3" id="text-14-1">
          <dl class="org-dl">
            <dt><code>head()</code></dt>

            <dd>Look at the first 6 rows.</dd>

            <dt><code>tail()</code></dt>

            <dd>Look at the last 6 rows.</dd>

            <dt><code>str()</code></dt>

            <dd>
              <i>Compactly</i> display the internal <b>structure</b> of an
              object.

              <p>Alternative to <code>summary()</code>.</p>

              <p>When applied to functions, show the arguments.</p>

              <div class="org-src-container">
                <pre class="src src-R">
str(.Platform)                     # what is the operating system
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>
    </div>
  </div>

  <div id="postamble" class="status">
    <div id="copyright">
      © Fabrice Niessen
    </div>
  </div>
</body>
</html>
