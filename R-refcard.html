<!-- <xml version="1.0"> -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="american" xml:lang="american">
<head>
  <meta name="generator" content=
  "HTML Tidy for Cygwin (vers 1st September 2004), see www.w3.org" />

  <title>R quick reference card</title><!-- 2013-10-29 Tue 10:21 -->
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Org-mode" />
  <meta name="author" content="Fabrice Niessen" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"
type="text/javascript">
</script>
  <link rel="stylesheet" type="text/css" href=
  "file:///D:/Users/fni/src/org-style/bigblow/css/bigblow.css" />
  <link rel="stylesheet" type="text/css" href=
  "file:///D:/Users/fni/src/org-style/bigblow/css/htmlize.css" />
<script type="text/javascript" src=
"file:///D:/Users/fni/src/org-style/bigblow/js/bigblow.js">
</script>
</head>

<body>
  <div id="content">
    <h1 class="title">R quick reference card</h1>

    <div id="table-of-contents">
      <h2>Table of Contents</h2>

      <div id="text-table-of-contents">
        <ul>
          <li><a href="#sec-1">1. R reference card</a></li>

          <li><a href="#sec-2">2. 0. Overview of R</a></li>

          <li><a href="#sec-3">3. 1. Getting started and getting help</a></li>

          <li>
            <a href="#sec-4">4. 2. Some basics</a>

            <ul>
              <li><a href="#sec-4-1">4.1. Print something</a></li>

              <li><a href="#sec-4-2">4.2. Setting variables</a></li>

              <li><a href="#sec-4-3">4.3. Listing variables</a></li>

              <li><a href="#sec-4-4">4.4. Deleting variables</a></li>

              <li><a href="#sec-4-5">4.5. Computing basic statistics</a></li>

              <li><a href="#sec-4-6">4.6. Creating sequences</a></li>

              <li><a href="#sec-4-7">4.7. Operators</a></li>

              <li><a href="#sec-4-8">4.8. Defining a function</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-5">5. 3. Navigating the software</a>

            <ul>
              <li><a href="#sec-5-1">5.1. Running a batch script</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-6">6. 5. Data structures</a>

            <ul>
              <li><a href="#sec-6-1">6.1. Vectors</a></li>

              <li><a href="#sec-6-2">6.2. Matrices</a></li>

              <li><a href="#sec-6-3">6.3. Arrays</a></li>

              <li><a href="#sec-6-4">6.4. Lists</a></li>

              <li><a href="#sec-6-5">6.5. Factors</a></li>

              <li><a href="#sec-6-6">6.6. Data frames</a></li>

              <li><a href="#sec-6-7">6.7. Vectorized operations (recycling
              rule)</a></li>

              <li><a href="#sec-6-8">6.8. Selecting list elements or data frame
              columns by position (subsetting)</a></li>

              <li><a href="#sec-6-9">6.9. Selecting list elements or data frame
              columns by name (subsetting)</a></li>

              <li><a href="#sec-6-10">6.10. Selecting data frame columns by
              position (subsetting)</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-7">7. Control structures</a>

            <ul>
              <li><a href="#sec-7-1">7.1. Conditional statements</a></li>

              <li><a href="#sec-7-2">7.2. Loops</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-8">8. Writing functions</a>

            <ul>
              <li><a href="#sec-8-1">8.1. Arguments</a></li>

              <li><a href="#sec-8-2">8.2. Scoping rules for R</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-9">9. 4. Input and output</a>

            <ul>
              <li><a href="#sec-9-1">9.1. Getting the current working
              directory</a></li>

              <li><a href="#sec-9-2">9.2. Creating, opening and closing
              connections</a></li>

              <li><a href="#sec-9-3">9.3. Reading tabular data files</a></li>

              <li><a href="#sec-9-4">9.4. Writing tabular data files</a></li>

              <li><a href="#sec-9-5">9.5. Reading from CSV files</a></li>

              <li><a href="#sec-9-6">9.6. Reading from Excel files</a></li>

              <li><a href="#sec-9-7">9.7. Reading files from the
              Internet</a></li>

              <li><a href="#sec-9-8">9.8. Reading files with a complex
              structure</a></li>

              <li><a href="#sec-9-9">9.9. Reading from SQL Server
              databases</a></li>

              <li><a href="#sec-9-10">9.10. Saving and transporting
              objects</a></li>

              <li><a href="#sec-9-11">9.11. Further resources</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-10">10. 12. Useful tricks</a>

            <ul>
              <li><a href="#sec-10-1">10.1. Peeking at your data</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-11">11. 9. General statistics</a>

            <ul>
              <li><a href="#sec-11-1">11.1. Summarizing your data</a></li>

              <li><a href="#sec-11-2">11.2. Tabulating factors</a></li>

              <li><a href="#sec-11-3">11.3. Testing categorical variables for
              independence</a></li>

              <li><a href="#sec-11-4">11.4. Calculating quantiles (and
              quartiles) of a dataset</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-12">12. 6. Data transformations</a>

            <ul>
              <li><a href="#sec-12-1">12.1. Fixing variable names</a></li>

              <li><a href="#sec-12-2">12.2. Creating new variables</a></li>

              <li><a href="#sec-12-3">12.3. Removing list elements using a
              condition</a></li>

              <li><a href="#sec-12-4">12.4. Selecting rows and columns more
              easily</a></li>

              <li><a href="#sec-12-5">12.5. Removing rows that contain NAs from
              a data frame</a></li>

              <li><a href="#sec-12-6">12.6. Removing columns that contain NAs
              from a data frame</a></li>

              <li><a href="#sec-12-7">12.7. Merging data frames by commun
              column</a></li>

              <li><a href="#sec-12-8">12.8. Converting</a></li>

              <li>
                <a href="#sec-12-9">12.9. Applying a function to each list
                element</a>

                <ul>
                  <li><a href="#sec-12-9-1">12.9.1.
                  <code>lapply</code></a></li>

                  <li><a href="#sec-12-9-2">12.9.2.
                  <code>sapply</code></a></li>
                </ul>
              </li>

              <li><a href="#sec-12-10">12.10. Splitting a vector into
              groups</a></li>

              <li><a href="#sec-12-11">12.11. Applying a function to every
              row/column</a></li>

              <li><a href="#sec-12-12">12.12. Applying a function to groups of
              data</a></li>

              <li><a href="#sec-12-13">12.13. Applying a function to parallel
              vectors or lists</a></li>

              <li><a href="#sec-12-14">12.14. Checking on and removing
              inconsistent values</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-13">13. 7. Strings and dates</a>

            <ul>
              <li><a href="#sec-13-1">13.1. Getting the length of a
              string</a></li>

              <li><a href="#sec-13-2">13.2. Concatenating strings</a></li>

              <li><a href="#sec-13-3">13.3. Regular expressions</a></li>
            </ul>
          </li>

          <li><a href="#sec-14">14. 8. Probability</a></li>

          <li>
            <a href="#sec-15">15. 10. Graphics</a>

            <ul>
              <li>
                <a href="#sec-15-1">15.1. Base graphics</a>

                <ul>
                  <li><a href="#sec-15-1-1">15.1.1. Make a plot</a></li>

                  <li><a href="#sec-15-1-2">15.1.2. Add to an existing
                  plot</a></li>

                  <li><a href="#sec-15-1-3">15.1.3. Changing graphical
                  parameters</a></li>
                </ul>
              </li>

              <li><a href="#sec-15-2">15.2. Lattice graphics</a></li>

              <li><a href="#sec-15-3">15.3. ggplot2</a></li>
            </ul>
          </li>

          <li><a href="#sec-16">16. 11. Linear regression and ANOVA</a></li>
        </ul>
      </div>
    </div>

    <div id="outline-container-sec-1" class="outline-2">
      <h2 id="sec-1"><span class="section-number-2">1</span> R reference
      card</h2>

      <div class="outline-text-2" id="text-1">
        <p>Welcome to R reference card. It contains the reference documentation
        that describes how to perform <b>data analysis</b> using R.</p>
      </div>
    </div>

    <div id="outline-container-sec-2" class="outline-2">
      <h2 id="sec-2"><span class="section-number-2">2</span> 0. Overview of
      R</h2>

      <div class="outline-text-2" id="text-2">
        <p>R system that you download from <a href=
        "http://cran.r-project.org/">CRAN</a>:</p>

        <ul class="org-ul">
          <li><code>base</code> package</li>

          <li>Familiar packages (<code>utils</code>, <code>datasets</code>,
          …)</li>

          <li>Recommended packages (<code>lattice</code>, …)</li>

          <li>4,000 other packages</li>
        </ul>

        <p><a href="http://cran.r-project.org/doc/contrib/Short-refcard.pdf">R
        Reference Card</a></p>

        <p>Some <a href="http://cran.r-project.org/manuals.html">R
        manuals</a>:</p>

        <ul class="org-ul">
          <li><a href="http://cran.r-project.org/doc/manuals/R-intro.html">An
          introduction to R</a></li>

          <li><a href=
          "http://cran.r-project.org/doc/manuals/r-release/R-data.html">R data
          import/export</a></li>

          <li><a href=
          "http://cran.r-project.org/doc/manuals/R-exts.html">Writing R
          extensions</a></li>
        </ul>
      </div>
    </div>

    <div id="outline-container-sec-3" class="outline-2">
      <h2 id="sec-3"><span class="section-number-2">3</span> 1. Getting started
      and getting help</h2>

      <div class="outline-text-2" id="text-3">
        <div class="org-src-container">
          <pre class="src src-R">
?<span style="color: #0000FF;">function</span>
?dataset
package ? lattice
<span style="color: #6434A3;">library</span>(help = lattice)
</pre>
        </div>

        <dl class="org-dl">
          <dt><code>args(function)</code></dt>

          <dd>Look at the arguments of a FUNCTION.</dd>

          <dt>(no term)</dt>

          <dd>Google</dd>

          <dt>(no term)</dt>

          <dd><a href="mailto:r-help@r-project.org">R general mailing
          list</a></dd>

          <dt>(no term)</dt>

          <dd><a href="http://stackoverflow.com/questions/tagged/r">Stack
          Overflow</a></dd>
        </dl>
      </div>
    </div>

    <div id="outline-container-sec-4" class="outline-2">
      <h2 id="sec-4"><span class="section-number-2">4</span> 2. Some
      basics</h2>

      <div class="outline-text-2" id="text-4"></div>

      <div id="outline-container-sec-4-1" class="outline-3">
        <h3 id="sec-4-1"><span class="section-number-3">4.1</span> Print
        something</h3>

        <div class="outline-text-3" id="text-4-1">
          <dl class="org-dl">
            <dt><code>print(object)</code></dt>

            <dd>Explicitly print out an object.</dd>

            <dt><code>cat()</code></dt>

            <dd>Concatenate together a set of strings and prints out the
            concatanated string (to a file or to the console).</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-2" class="outline-3">
        <h3 id="sec-4-2"><span class="section-number-3">4.2</span> Setting
        variables</h3>

        <div class="outline-text-3" id="text-4-2">
          <dl class="org-dl">
            <dt><code>&lt;-</code></dt>

            <dd>Assign a value to a variable.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-3" class="outline-3">
        <h3 id="sec-4-3"><span class="section-number-3">4.3</span> Listing
        variables</h3>

        <div class="outline-text-3" id="text-4-3">
          <dl class="org-dl">
            <dt><code>ls()</code>, <code>ls.str()</code></dt>

            <dd>Show objects in my workspace.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-4" class="outline-3">
        <h3 id="sec-4-4"><span class="section-number-3">4.4</span> Deleting
        variables</h3>

        <div class="outline-text-3" id="text-4-4">
          <dl class="org-dl">
            <dt><code>rm()</code></dt>

            <dd>
              Remove objects from your workspace.

              <div class="org-src-container">
                <pre class="src src-R">
rm(list=ls())                      <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">remove everything from the workspace</span>
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-5" class="outline-3">
        <h3 id="sec-4-5"><span class="section-number-3">4.5</span> Computing
        basic statistics</h3>

        <div class="outline-text-3" id="text-4-5">
          <dl class="org-dl">
            <dt><code>mean()</code></dt>

            <dd>Take the mean.</dd>

            <dt><code>median()</code></dt>

            <dd>Take the median.</dd>

            <dt><code>cor()</code></dt>

            <dd>Correlation function.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-6" class="outline-3">
        <h3 id="sec-4-6"><span class="section-number-3">4.6</span> Creating
        sequences</h3>

        <div class="outline-text-3" id="text-4-6">
          <dl class="org-dl">
            <dt><code>n:m</code></dt>

            <dd>Create an <b>sequence of</b> integers from <code>n</code> to
            <code>m</code> (<code>n</code> &lt; <code>m</code> or
            <code>n</code> &gt; <code>m</code>).</dd>

            <dt><code>seq(from, to, len)</code></dt>

            <dd>Create a <b>sequence of</b> <code>len</code> equally spaced
            fractional numbers.</dd>

            <dt><code>rep(x, times)</code></dt>

            <dd>Create a series of repeated values.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-7" class="outline-3">
        <h3 id="sec-4-7"><span class="section-number-3">4.7</span>
        Operators</h3>

        <div class="outline-text-3" id="text-4-7">
          <dl class="org-dl">
            <dt>==</dt>

            <dd>Compare.</dd>

            <dt><code>%in%</code></dt>

            <dd>Test membership.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-4-8" class="outline-3">
        <h3 id="sec-4-8"><span class="section-number-3">4.8</span> Defining a
        function</h3>

        <div class="outline-text-3" id="text-4-8">
          <div class="org-src-container">
            <pre class="src src-R">
<span style="color: #006699;">myfunction</span> <span style=
"color: #6434A3;">&lt;-</span> <span style=
"color: #0000FF;">function</span>(x) {
    y <span style="color: #6434A3;">&lt;-</span> norm(100)
    mean(y)
}
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-5" class="outline-2">
      <h2 id="sec-5"><span class="section-number-2">5</span> 3. Navigating the
      software</h2>

      <div class="outline-text-2" id="text-5">
        <dl class="org-dl">
          <dt><code>library(package)</code></dt>

          <dd>
            Load PACKAGE.

            <div class="org-src-container">
              <pre class="src src-R">
<span style="color: #6434A3;">library</span>(datasets)
airquality
</pre>
            </div>
          </dd>

          <dt><code>data(dataset)</code></dt>

          <dd>Load DATASET.</dd>

          <dt><code>source("file.R")</code></dt>

          <dd>Evaluate R code file.</dd>
        </dl>
      </div>

      <div id="outline-container-sec-5-1" class="outline-3">
        <h3 id="sec-5-1"><span class="section-number-3">5.1</span> Running a
        batch script</h3>

        <div class="outline-text-3" id="text-5-1">
          <p>You may write a script containing R code:</p>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #008200;">#</span><span style=
"color: #008200; font-style: italic;">!/usr/bin/</span><span style=
"color: #0000FF;">env</span><span style=
"color: #008200; font-style: italic;"> Rscript</span>

argv &lt;- commandArgs(TRUE)
x &lt;- as.numeric(argv[1])
<span style="color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">etc.</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-6" class="outline-2">
      <h2 id="sec-6"><span class="section-number-2">6</span> 5. Data
      structures</h2>

      <div class="outline-text-2" id="text-6">
        <p>What is data?</p>

        <dl class="org-dl">
          <dt>Population</dt>

          <dd>Set of items.</dd>

          <dt>Variable</dt>

          <dd>
            Measurement or characteristic.

            <dl class="org-dl">
              <dt>Qualitative</dt>

              <dd>Can be defined by a label and have discrete values.</dd>

              <dt>Quantitative</dt>

              <dd>Measured on a numerical scale.</dd>
            </dl>
          </dd>
        </dl>

        <table border="2" cellspacing="0" cellpadding="6" rules="groups" frame=
        "hsides">
          <colgroup>
            <col class="left" />
            <col class="left" />
          </colgroup>

          <thead>
            <tr>
              <th scope="col" class="left">Class</th>

              <th scope="col" class="left">Example</th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td class="left"><code>logical</code></td>

              <td class="left"><code>TRUE</code> / <code>FALSE</code></td>
            </tr>

            <tr>
              <td class="left"><code>integer</code></td>

              <td class="left"><code>1L</code> (with explicit <code>L</code>
              suffix)</td>
            </tr>

            <tr>
              <td class="left"><code>numeric</code></td>

              <td class="left"><code>0.5</code> or <code>1</code> (<i>real</i>
              numbers)</td>
            </tr>

            <tr>
              <td class="left"><code>complex</code></td>

              <td class="left"><code>1+0i</code></td>
            </tr>

            <tr>
              <td class="left"><code>character</code></td>

              <td class="left">"hello" (= lowest class)</td>
            </tr>
          </tbody>
        </table>

        <dl class="org-dl">
          <dt><code>class()</code></dt>

          <dd>Show the class of the object.</dd>

          <dt><code>unclass(vector)</code></dt>

          <dd>Strip out the class (see factors).</dd>
        </dl>
      </div>

      <div id="outline-container-sec-6-1" class="outline-3">
        <h3 id="sec-6-1"><span class="section-number-3">6.1</span> Vectors</h3>

        <div class="outline-text-3" id="text-6-1">
          <p><b>Vectors</b> are sets of elements of the <i>same class</i>.</p>

          <p>When objects of different classes are mixed in a vector,
          <i>coercion</i> occurs behind the scene so that every element is of
          the same class (the "lowest common denominator" class).</p>

          <dl class="org-dl">
            <dt><code>c()</code></dt>

            <dd>Create a vector of objects (that is, <b>concatenate</b> or
            combine things together).</dd>

            <dt><code>vector(class, length)</code></dt>

            <dd>Create an empty vector.</dd>

            <dt><code>names()</code></dt>

            <dd>Show or give a name to each <b>element</b> of a vector.</dd>

            <dt><code>length()</code></dt>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-6-2" class="outline-3">
        <h3 id="sec-6-2"><span class="section-number-3">6.2</span>
        Matrices</h3>

        <div class="outline-text-3" id="text-6-2">
          <p><b>Matrices</b> are vectors with <b>2 dimensions</b> (see
          <code>dimension</code> attribute).</p>

          <p>They are constructed <i>column-wise</i> (vector inserted by
          column).</p>

          <p>They can be created from vectors by adding a dimension
          attribute:</p>

          <div class="org-src-container">
            <pre class="src src-R">
v <span style="color: #6434A3;">&lt;-</span> 1:10
dim(v) <span style="color: #6434A3;">&lt;-</span> c(2,5)
print(v)
</pre>
          </div>

          <table border="2" cellspacing="0" cellpadding="6" rules="groups"
          frame="hsides">
            <colgroup>
              <col class="right" />
              <col class="right" />
              <col class="right" />
              <col class="right" />
              <col class="right" />
            </colgroup>

            <tbody>
              <tr>
                <td class="right">1</td>

                <td class="right">3</td>

                <td class="right">5</td>

                <td class="right">7</td>

                <td class="right">9</td>
              </tr>

              <tr>
                <td class="right">2</td>

                <td class="right">4</td>

                <td class="right">6</td>

                <td class="right">8</td>

                <td class="right">10</td>
              </tr>
            </tbody>
          </table>

          <p>They can be created by <i>column-binding</i> or
          <i>row-binding</i>.</p>

          <dl class="org-dl">
            <dt><code>matrix(nrow = x, ncol = y)</code></dt>

            <dd>Create an empty matrix.</dd>

            <dt><code>cbind()</code></dt>

            <dd>Column-bind.</dd>

            <dt><code>rbind()</code></dt>

            <dd>Row-bind.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-6-3" class="outline-3">
        <h3 id="sec-6-3"><span class="section-number-3">6.3</span> Arrays</h3>

        <div class="outline-text-3" id="text-6-3">
          <p>Arrays are <b>n-dimensional</b> matrices.</p>

          <dl class="org-dl">
            <dt><code>array()</code></dt>

            <dd>Create an array.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-6-4" class="outline-3">
        <h3 id="sec-6-4"><span class="section-number-3">6.4</span> Lists</h3>

        <div class="outline-text-3" id="text-6-4">
          <p><b>Lists</b> are vectors of objects of possibly different
          classes.</p>

          <p>The indexes of the elements of a list have double brackets around
          them.</p>

          <dl class="org-dl">
            <dt><code>list()</code></dt>

            <dd>Construct a list.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-6-5" class="outline-3">
        <h3 id="sec-6-5"><span class="section-number-3">6.5</span> Factors</h3>

        <div class="outline-text-3" id="text-6-5">
          <p><b>Factors</b> are <i>qualitative</i> variables used to represent
          <i>categorical</i> data, to store self-describing codes for
          <i>labels</i> (such as "male" and "female", or "low", "medium" and
          "high").</p>

          <p>Unordered or ordered.</p>

          <dl class="org-dl">
            <dt><code>factor(character vector)</code></dt>

            <dd>Create a factor variable (with levels by alphabetical
            order).</dd>

            <dt><code>levels(x)</code></dt>

            <dd>Return the value of the levels.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-6-6" class="outline-3">
        <h3 id="sec-6-6"><span class="section-number-3">6.6</span> Data
        frames</h3>

        <div class="outline-text-3" id="text-6-6">
          <p><b>Data frames</b> are used to store tabular data where each
          column can be of a different class: special type of list (of columns)
          where every element has the same length.</p>

          <ul class="org-ul">
            <li>Row = observation, column = variable</li>

            <li>Special attribute <code>row.names</code> (every row has a name,
            or defaults to a sequence of integers)</li>

            <li>Most often created by calling <code>read.table()</code> or
            <code>read.csv()</code></li>

            <li id="&lt;code&gt;data.frame()&lt;/code&gt;">Create a data
            frame.</li>

            <li id="&lt;code&gt;data.matrix()&lt;/code&gt;">Convert a data
            frame to a <i>numeric</i> matrix (forced <b>coercion</b>!).</li>

            <li id="&lt;code&gt;names()&lt;/code&gt;">Tell the names of each
            <b>column</b> included in the data frame.</li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-6-7" class="outline-3">
        <h3 id="sec-6-7"><span class="section-number-3">6.7</span> Vectorized
        operations (recycling rule)</h3>

        <div class="outline-text-3" id="text-6-7">
          <p>Avoid writing loops (code is a lot simpler):</p>

          <div class="org-src-container">
            <pre class="src src-R">
x + y                                   <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">element-wise addition</span>
</pre>
          </div>

          <p>Similar for the matrices:</p>

          <div class="org-src-container">
            <pre class="src src-R">
x * y                                   <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">element-wise multiplication</span>
x %*% y                                 <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">true matrix multiplication</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-8" class="outline-3">
        <h3 id="sec-6-8"><span class="section-number-3">6.8</span> Selecting
        list elements or data frame columns by position (subsetting)</h3>

        <div class="outline-text-3" id="text-6-8">
          <dl class="org-dl">
            <dt><code>[[</code></dt>

            <dd>
              Extract a <b>single element</b> of a list (or a single column of
              a data frame).

              <p>Can be used with <i>computed</i> indices.</p>

              <p>Can extract nested elements of a list:</p>

              <div class="org-src-container">
                <pre class="src src-R">
x[[1]][[3]]                        <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">same as: x[[c(1,3)]]</span>
                                   <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">third element of the first element</span>
</pre>
              </div>

              <p>Partial matching allowed at the command-line:</p>

              <div class="org-src-container">
                <pre class="src src-R">
x[[<span style="color: #FF4700;">"a"</span>, exact = <span style=
"color: #666666;">FALSE</span>]]            <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">instead of: x[["aardvark"]]</span>
</pre>
              </div>
            </dd>

            <dt><code>[</code></dt>

            <dd>
              Return an object of the <b>same class</b> as the original: a list
              of elements (or a data frame built from multiple columns).

              <p>Extract multiple elements of a list:</p>

              <div class="org-src-container">
                <pre class="src src-R">
x[c(1,3)]
</pre>
              </div>

              <p>Remove the first column:</p>

              <div class="org-src-container">
                <pre class="src src-R">
df[,-1]
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-6-9" class="outline-3">
        <h3 id="sec-6-9"><span class="section-number-3">6.9</span> Selecting
        list elements or data frame columns by name (subsetting)</h3>

        <div class="outline-text-3" id="text-6-9">
          <dl class="org-dl">
            <dt><code>$</code></dt>

            <dd>
              Extract a single element of a list (or a single column of a data
              frame) <b>by name</b>: you don't have to remember where the
              element is in the list.

              <div class="org-src-container">
                <pre class="src src-R">
x$bar                              <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">same as x[["bar"]]</span>
</pre>
              </div>

              <p>Can only be used with literal names.</p>

              <p>Partial matching allowed at the command-line:</p>

              <div class="org-src-container">
                <pre class="src src-R">
x$a                                <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">instead of: x$aardvark</span>
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-6-10" class="outline-3">
        <h3 id="sec-6-10"><span class="section-number-3">6.10</span> Selecting
        data frame columns by position (subsetting)</h3>

        <div class="outline-text-3" id="text-6-10">
          <p>Matrices can be subsetted with <code>(row, col)</code> type
          indices.</p>

          <p>Indices can also be missing:</p>

          <dl class="org-dl">
            <dt><code>x[i,]</code></dt>

            <dd>Row i.</dd>

            <dt><code>x[,j]</code></dt>

            <dd>Column j.</dd>
          </dl>

          <p>By default,</p>

          <ul class="org-ul">
            <li>a single element is retrieved as a vector of length 1 rather
            than a 1x1 matrix.</li>

            <li>a single column or a single row is retrieved as a vector, not
            as a matrix.</li>
          </ul>

          <p>This can be turned off by setting <code>drop = FALSE</code> (don't
          drop the dimension).</p>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-7" class="outline-2">
      <h2 id="sec-7"><span class="section-number-2">7</span> Control
      structures</h2>

      <div class="outline-text-2" id="text-7">
        <p>Control structures mentioned here are primarily useful for writing
        programs. For command-line interactive work, the <code>*apply</code>
        functions are more useful.</p>
      </div>

      <div id="outline-container-sec-7-1" class="outline-3">
        <h3 id="sec-7-1"><span class="section-number-3">7.1</span> Conditional
        statements</h3>

        <div class="outline-text-3" id="text-7-1">
          <div class="org-src-container">
            <pre class="src src-R">
<span style="color: #0000FF;">if</span> (&lt;condition&gt;) {
    <span style="color: #008200;">## </span><span style=
"color: #008200; font-style: italic;">do something</span>
} <span style="color: #0000FF;">else</span> {
    <span style="color: #008200;">## </span><span style=
"color: #008200; font-style: italic;">do something else</span>
}
</pre>
          </div>

          <p>Here, the entire <code>if/else</code> construct is all about
          assigning a value to <code>y</code>:</p>

          <div class="org-src-container">
            <pre class="src src-R">
y <span style="color: #6434A3;">&lt;-</span> <span style=
"color: #0000FF;">if</span>(x &gt; 3) {                        <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">x must be a scalar here, not a vector</span>
    10
} <span style="color: #0000FF;">else</span> {
    0
}
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-7-2" class="outline-3">
        <h3 id="sec-7-2"><span class="section-number-3">7.2</span> Loops</h3>

        <div class="outline-text-3" id="text-7-2">
          <div class="org-src-container">
            <pre class="src src-R">
<span style="color: #0000FF;">for</span> (i <span style=
"color: #0000FF;">in</span> 1:10) {                       <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">successive values from a sequence or vector</span>
    <span style="color: #008200;">## </span><span style=
"color: #008200; font-style: italic;">do something</span>
}

<span style="color: #0000FF;">for</span> (letter <span style=
"color: #0000FF;">in</span> x) {                     <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">take elements from the vector</span>
    <span style="color: #008200;">## </span><span style=
"color: #008200; font-style: italic;">do something</span>
}
</pre>
          </div>

          <dl class="org-dl">
            <dt>seq_along(vector)</dt>

            <dd>Create an integer sequence that's equal to the <b>length of the
            input vector</b>.</dd>

            <dt>seq_len(integer)</dt>

            <dd>Create an integer sequence that's as long as the integer in
            input.</dd>

            <dt>nrow(dataset)</dt>

            <dd>Tell the number of rows.</dd>

            <dt>ncol(dataset)</dt>

            <dd>Tell the number of columns.</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-R">
<span style=
"color: #0000FF;">while</span> (z &gt;= 3 &amp;&amp; z &lt;= 10) {             <span style="color: #008200;"># </span><span style="color: #008200; font-style: italic;">conditions are always evaluated from left to right</span>
    <span style="color: #008200;">## </span><span style=
"color: #008200; font-style: italic;">do something</span>
}
</pre>
          </div>

          <p>Initiate an infinite loop:</p>

          <div class="org-src-container">
            <pre class="src src-R">
<span style="color: #0000FF;">repeat</span> {
    <span style="color: #008200;">## </span><span style=
"color: #008200; font-style: italic;">do something</span>
    <span style="color: #0000FF;">if</span>(&lt;condition&gt;) {
        <span style=
"color: #0000FF;">break</span>                           <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">only way to exit a repeat loop</span>
    }
}
</pre>
          </div>

          <dl class="org-dl">
            <dt><code>break</code></dt>

            <dd>Break the iteration of a loop.</dd>

            <dt><code>next</code></dt>

            <dd>Skip an iteration of a loop.</dd>

            <dt><code>return</code></dt>

            <dd>Exit an entire function and return a given value.</dd>
          </dl>

          <p>Better to use a <code>for</code> loop with an hard limit on the
          number of iterations that it's allowed to run.</p>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-8" class="outline-2">
      <h2 id="sec-8"><span class="section-number-2">8</span> Writing
      functions</h2>

      <div class="outline-text-2" id="text-8">
        <ul class="org-ul">
          <li>Functions are R objects of class <code>function</code></li>
        </ul>

        <div class="org-src-container">
          <pre class="src src-R">
<span style="color: #006699;">f</span> <span style=
"color: #6434A3;">&lt;-</span> <span style=
"color: #0000FF;">function</span>(&lt;arguments&gt;) {
    <span style="color: #008200;">## </span><span style=
"color: #008200; font-style: italic;">do something</span>
}
</pre>
        </div>

        <ul class="org-ul">
          <li>Functions can be <b>passed as arguments to other
          functions</b></li>

          <li>Functions can be nested, so that you can define a function inside
          of another function (implications: see <b>lexical scoping</b>)</li>

          <li>The return value of a function is the last expression in the
          function body to be evaluated</li>

          <li>3 types of…

            <ul class="org-ul">
              <li>formal argument</li>

              <li>local variable</li>

              <li>free variable</li>
            </ul>
          </li>
        </ul>
      </div>

      <div id="outline-container-sec-8-1" class="outline-3">
        <h3 id="sec-8-1"><span class="section-number-3">8.1</span>
        Arguments</h3>

        <div class="outline-text-3" id="text-8-1">
          <ul class="org-ul">
            <li><i>Named arguments</i> can potentially have <i>default
            values</i> (useful: not every function call makes use of all the
            formal arguments; some can be <i>missing</i>)</li>

            <li>The <i>formal arguments</i> are the arguments included in the
            function definition</li>

            <li><code>formals()</code> returns a list of all the formal
            arguments of a function</li>

            <li>Arguments can be matched <b>positionally</b> or <b>by name</b>

              <ul class="org-ul">
                <li>When an argument is matched by name, it is "taken out" of
                the argument list and the remaining unnamed arguments are
                matched in the order that they are listed in the function
                definition</li>
              </ul>
            </li>

            <li>Named arguments help when:

              <ul class="org-ul">
                <li>you want to use the defaults for evererything except for an
                argument near the end of the list</li>

                <li>you can't remember the position of the argument</li>
              </ul>
            </li>

            <li>Function arguments can also be partially <i>matched</i>

              <ol class="org-ol">
                <li>Check for an exact match</li>

                <li>Check for a partial match</li>

                <li>Check for a positional match</li>
              </ol>
            </li>

            <li>When defining a function, you can also set an argument value to
            <code>NULL</code> (there is nothing there)</li>

            <li>Arguments to functions are evaluated <i>lazily</i> (only when
            needed to be evaluated</li>

            <li>The <code>...</code> argument indicates a variable number of
            arguments

              <ul class="org-ul">
                <li>Used when extending a function and you don't want to copy
                the entire argument list of the original function</li>

                <li>Used by generic functions (such as <code>mean</code>) so
                that extra arguments can be passed to methods</li>

                <li>Used when the number of arguments cannot be known in
                advance (see <code>paste</code> function)</li>

                <li>Any argument that appears <i>after</i> the <code>...</code>
                must be named explicitly and cannot be partially matched</li>
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-8-2" class="outline-3">
        <h3 id="sec-8-2"><span class="section-number-3">8.2</span> Scoping
        rules for R</h3>

        <div class="outline-text-3" id="text-8-2">
          <ul class="org-ul">
            <li>R searches through the <i>search list</i> (a series of
            <code>environments</code>, an environment being a collection of
            symbol/value pairs) to bind the appropriate value to a symbol:

              <ul class="org-ul">
                <li>Search the global environment <code>.GlobalEnv</code>
                (always the first)</li>

                <li>Search the namespaces of each of the packages on the search
                list

                  <div class="org-src-container">
                    <pre class="src src-R">
search()                            <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">find the search list</span>
</pre>
                  </div>
                </li>

                <li>Search the <code>base</code> package (always the last
                element)</li>
              </ul>
            </li>

            <li>Last loaded package gets put in position 2 of the search list
            and everything else gets shifted</li>

            <li>Separate namespaces for functions and non-function objects</li>

            <li>R uses <b>lexical</b> (or <i>static</i>) <b>scoping</b>
            (instead of <i>dynamic scoping</i>): <i>the value of free variables
            are searched for in the environment in which the function</i>
            <i>was</i> <b>defined</b> (until the empty environment, after the
            <code>base</code> package)

              <ul class="org-ul">
                <li>With <b>dynamic</b> scoping, the value of free variables is
                looked up in the environment from which the function was
                <b>called</b> (<i>calling environment</i> = <i>parent
                frame</i>) – see slide 24 of "Scoping Rules for R" for a
                comparative example</li>

                <li>Other languages that support lexical scoping: Scheme, Perl,
                Python, Common Lisp</li>

                <li>Consequences: all objects must be stored in memory, and all
                functions must carry a <b>pointer to their respective defining
                environment</b></li>
              </ul>
            </li>

            <li>Every environment has one parent environment (next thing down
            on the search list); it is possible for an environment to have
            mulitple "children"</li>

            <li>A function + an environment = a (<i>function</i>)
            <i>closure</i></li>

            <li>In R (unlike C), you can have functions defined <i>inside other
            functions</i> – in this case, the environment in which a function
            is defined is the body of another function!

              <div class="org-src-container">
                <pre class="src src-R">
<span style="color: #006699;">make.power</span> <span style=
"color: #6434A3;">&lt;-</span> <span style=
"color: #0000FF;">function</span>(n) {           <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">"constructor" function</span>
    <span style="color: #006699;">pow</span> <span style=
"color: #6434A3;">&lt;-</span> <span style=
"color: #0000FF;">function</span>(x) {
        x^n                           <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">n is a free variable (not defined</span>
                                      <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">inside pow)</span>
    }
    pow                               <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">return function as return value</span>
}
</pre>
              </div>

              <p>This function returns another function as its value</p>

              <div class="org-src-container">
                <pre class="src src-R">
cube <span style="color: #6434A3;">&lt;-</span> make.power(3)
square <span style="color: #6434A3;">&lt;-</span> make.power(2)
</pre>
              </div>
            </li>

            <li>Functions:

              <dl class="org-dl">
                <dt>environment(f)</dt>

                <dt>parent.env(environment)</dt>

                <dd>next thing down on the search list</dd>

                <dt>ls(environment)</dt>

                <dd>list all the variables in the environment</dd>

                <dt>get(object, environment)</dt>

                <dd>get the value of an object inside an environment</dd>
              </dl>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-9" class="outline-2">
      <h2 id="sec-9"><span class="section-number-2">9</span> 4. Input and
      output</h2>

      <div class="outline-text-2" id="text-9">
        <p>Types of files:</p>

        <ul class="org-ul">
          <li>Tab-delimited</li>

          <li>CSV</li>

          <li>Excel</li>

          <li>JSON</li>

          <li>HTML/XML</li>

          <li>Database</li>
        </ul>
      </div>

      <div id="outline-container-sec-9-1" class="outline-3">
        <h3 id="sec-9-1"><span class="section-number-3">9.1</span> Getting the
        current working directory</h3>

        <div class="outline-text-3" id="text-9-1">
          <dl class="org-dl">
            <dt><code>getwd()</code></dt>

            <dd>Figure out what your <b>working directory</b> is.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-9-2" class="outline-3">
        <h3 id="sec-9-2"><span class="section-number-3">9.2</span> Creating,
        opening and closing connections</h3>

        <div class="outline-text-3" id="text-9-2">
          <dl class="org-dl">
            <dt><code>file()</code></dt>

            <dd>
              <ul class="org-ul">
                <li><code>description</code> is the name of the file</li>

                <li><code>open</code> is a code (read-only, write, append)</li>
              </ul>

              <div class="org-src-container">
                <pre class="src src-R">
con <span style="color: #6434A3;">&lt;-</span> file(<span style=
"color: #FF4700;">"./data/cameras.csv"</span>, <span style=
"color: #FF4700;">"r"</span>)
cameraData <span style="color: #6434A3;">&lt;-</span> read.csv(con)
close(con)
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-9-3" class="outline-3">
        <h3 id="sec-9-3"><span class="section-number-3">9.3</span> Reading
        tabular data files</h3>

        <div class="outline-text-3" id="text-9-3">
          <dl class="org-dl">
            <dt><code>read.table(file)</code></dt>

            <dd>
              Read tabular data file, create data frame.

              <p>Important arguments:</p>

              <ul class="org-ul">
                <li><code>file</code></li>

                <li><code>header</code></li>

                <li><code>sep</code> (defaults to the <b>space</b>)</li>

                <li><code>quote</code></li>

                <li><code>colClasses</code> (class of each column)</li>

                <li><code>nrows</code></li>

                <li><code>skip</code> (number of lines to skip from the
                beginning)</li>

                <li><code>comment.char</code></li>

                <li><code>stringsAsFactors</code> (defaults to
                <code>TRUE</code>)</li>
              </ul>

              <div class="org-src-container">
                <pre class="src src-R">
data <span style="color: #6434A3;">&lt;-</span> read.table(<span style=
"color: #FF4700;">"./data/file.txt"</span>, header=T, sep=<span style=
"color: #FF4700;">"\t"</span>, quote=<span style="color: #FF4700;">""</span>)
</pre>
              </div>
            </dd>
          </dl>

          <p>For <b>large datasets</b>:</p>

          <ul class="org-ul">
            <li>Set <code>comment.char</code> = "" if there are no comments in
            your file.</li>

            <li>Use the <code>colClasses</code> argument.

              <p>Quick and dirty way to figure out the classes of each
              column:</p>

              <div class="org-src-container">
                <pre class="src src-R">
initial <span style="color: #6434A3;">&lt;-</span> read.table(<span style=
"color: #FF4700;">"datatable.txt"</span>, nrows = 100)
classes <span style="color: #6434A3;">&lt;-</span> sapply(initial, class)
tabAll <span style="color: #6434A3;">&lt;-</span> read.table(<span style=
"color: #FF4700;">"datatable.txt"</span>, colClasses = classes)
</pre>
              </div>
            </li>

            <li>Set <code>nrows</code> helps with memory usage.</li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-9-4" class="outline-3">
        <h3 id="sec-9-4"><span class="section-number-3">9.4</span> Writing
        tabular data files</h3>

        <div class="outline-text-3" id="text-9-4">
          <dl class="org-dl">
            <dt><code>write.table()</code></dt>

            <dd>Write data.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-9-5" class="outline-3">
        <h3 id="sec-9-5"><span class="section-number-3">9.5</span> Reading from
        CSV files</h3>

        <div class="outline-text-3" id="text-9-5">
          <dl class="org-dl">
            <dt><code>read.csv(file)</code></dt>

            <dd>
              Read data from CSV file, create data frame.

              <ul class="org-ul">
                <li><code>header</code> (defaults to <code>TRUE</code>)</li>

                <li><code>separator</code> (defaults to <b>comma</b>)</li>
              </ul>

              <div class="org-src-container">
                <pre class="src src-R">
data <span style="color: #6434A3;">&lt;-</span> read.csv(<span style=
"color: #FF4700;">"./data/file.csv"</span>)

read.csv(file.choose())            <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">pick a file</span>
</pre>
              </div>

              <p>It calls <code>read.table</code> with some default values. To
              look at them, just look at the code of <code>read.csv</code> by
              typing <code>read.csv</code> and hitting &lt;enter&gt; at your R
              command line).</p>
            </dd>

            <dt><code>read.csv2(file)</code></dt>

            <dd>
              Read data from CSV file, create data frame.

              <ul class="org-ul">
                <li><code>header</code> (defaults to <code>TRUE</code>)</li>

                <li><code>separator</code> (defaults to <code>;</code>)</li>
              </ul>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-9-6" class="outline-3">
        <h3 id="sec-9-6"><span class="section-number-3">9.6</span> Reading from
        Excel files</h3>

        <div class="outline-text-3" id="text-9-6">
          <dl class="org-dl">
            <dt><code>read.xlsx()</code>, <code>read.xlsx2()</code></dt>

            <dd>Read Excel files.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-9-7" class="outline-3">
        <h3 id="sec-9-7"><span class="section-number-3">9.7</span> Reading
        files from the Internet</h3>

        <div class="outline-text-3" id="text-9-7">
          <dl class="org-dl">
            <dt><code>download.file()</code></dt>

            <dd>
              Download a file from the Internet.

              <p>Be sure to record when you downloaded.</p>

              <div class="org-src-container">
                <pre class="src src-R">
fileUrl <span style="color: #6434A3;">&lt;-</span> <span style=
"color: #FF4700;">"http://..."</span>
download.file(fileUrl, destfile=<span style=
"color: #FF4700;">"./data/file.csv"</span>, method=<span style=
"color: #FF4700;">"curl"</span>)
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-9-8" class="outline-3">
        <h3 id="sec-9-8"><span class="section-number-3">9.8</span> Reading
        files with a complex structure</h3>

        <div class="outline-text-3" id="text-9-8">
          <dl class="org-dl">
            <dt><code>readLines()</code></dt>

            <dd>
              Read lines of text from a connection.

              <p><i>Connections</i> can be made to:</p>

              <ul class="org-ul">
                <li><code>file</code> (most common)</li>

                <li><code>gzfile</code>, file compressed with
                <code>gzip</code></li>

                <li><code>bzfile</code>, file compressed with
                <code>bzip2</code></li>

                <li><code>url</code></li>
              </ul>

              <p><b>Remember to close connections</b>.</p>

              <div class="org-src-container">
                <pre class="src src-R">
con <span style="color: #6434A3;">&lt;-</span> url(<span style=
"color: #FF4700;">"http://scholar.google.com/citations"</span>)
htmlCode <span style="color: #6434A3;">&lt;-</span> readLines(con)
close(con)

<span style="color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">get data off webpages</span>
html3 <span style="color: #6434A3;">&lt;-</span> htmlTreeParse(<span style=
"color: #FF4700;">"..."</span>)

<span style="color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">find value of title tag</span>
xpathSApply(html3, <span style="color: #FF4700;">"//title"</span>, xmlValue)

<span style="color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">access parts of the table</span>
xpathSApply(html3, <span style=
"color: #FF4700;">"//td[@id='col-citedby']"</span>, xmlValue)
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-9-9" class="outline-3">
        <h3 id="sec-9-9"><span class="section-number-3">9.9</span> Reading from
        SQL Server databases</h3>

        <div class="outline-text-3" id="text-9-9">
          <div class="org-src-container">
            <pre class="src src-R">
<span style="color: #6434A3;">library</span>(RODBC)
<span style="color: #008200;">## </span><span style=
"color: #008200; font-style: italic;">con &lt;- odbcConnect("DSN", uid="username")</span>
<span style="color: #008200;">## </span><span style=
"color: #008200; font-style: italic;">con &lt;- odbcDriverConnect("driver={SQL Server};server=hostname;database=dbname;trusted_connection=true")</span>
con <span style="color: #6434A3;">&lt;-</span> odbcDriverConnect(<span style=
"color: #FF4700;">"driver={SQL Server};server=hostname;database=dbname;uid=username;pwd=password"</span>)
sql <span style="color: #6434A3;">&lt;-</span> <span style=
"color: #FF4700;">"SELECT * FROM table"</span>
rows <span style="color: #6434A3;">&lt;-</span> sqlQuery(con, sql)
print(head(rows))
odbcClose(con)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-9-10" class="outline-3">
        <h3 id="sec-9-10"><span class="section-number-3">9.10</span> Saving and
        transporting objects</h3>

        <div class="outline-text-3" id="text-9-10">
          <p>Textual formats (potentially recoverable in case of
          corruption).</p>

          <dl class="org-dl">
            <dt><code>dput()</code></dt>

            <dd>Deparse a single R object.</dd>

            <dt><code>dump()</code></dt>

            <dd>Can be used on multiple R objects.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-9-11" class="outline-3">
        <h3 id="sec-9-11"><span class="section-number-3">9.11</span> Further
        resources</h3>

        <div class="outline-text-3" id="text-9-11">
          <p>Packages:</p>

          <dl class="org-dl">
            <dt><code>httr</code></dt>

            <dd>For working with HTTP connections.</dd>

            <dt><code>RMySQL</code></dt>

            <dd>For interfacing with mySQL.</dd>

            <dt><code>bigmemory</code></dt>

            <dd>For handling data larger than RAM.</dd>

            <dt><code>foreign</code></dt>

            <dd>For getting data into R from SAS, SPSS, Octave, etc.</dd>
          </dl>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-10" class="outline-2">
      <h2 id="sec-10"><span class="section-number-2">10</span> 12. Useful
      tricks</h2>

      <div class="outline-text-2" id="text-10"></div>

      <div id="outline-container-sec-10-1" class="outline-3">
        <h3 id="sec-10-1"><span class="section-number-3">10.1</span> Peeking at
        your data</h3>

        <div class="outline-text-3" id="text-10-1">
          <dl class="org-dl">
            <dt><code>head()</code></dt>

            <dd>Look at the first 6 rows.</dd>

            <dt><code>tail()</code></dt>

            <dd>Look at the last 6 rows.</dd>

            <dt><code>str()</code></dt>

            <dd>
              <i>Compactly</i> display the internal <b>structure</b>
              (<b>classes</b>, etc.) of an object.

              <p>Alternative to <code>summary()</code>.</p>

              <p>When applied to functions, show the <b>arguments</b>.</p>

              <div class="org-src-container">
                <pre class="src src-R">
str(.Platform)                     <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">what is the operating system</span>
</pre>
              </div>
            </dd>

            <dt><code>attributes()</code></dt>

            <dd>Access (set or modify) the (list of) attributes of an
            object.</dd>
          </dl>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-11" class="outline-2">
      <h2 id="sec-11"><span class="section-number-2">11</span> 9. General
      statistics</h2>

      <div class="outline-text-2" id="text-11"></div>

      <div id="outline-container-sec-11-1" class="outline-3">
        <h3 id="sec-11-1"><span class="section-number-3">11.1</span>
        Summarizing your data</h3>

        <div class="outline-text-3" id="text-11-1">
          <dl class="org-dl">
            <dt><code>range()</code></dt>

            <dd>Give the min and the max (vector of length 2) of the
            observations (vector of numbers).</dd>

            <dt><code>summary()</code></dt>

            <dd>Produce a summary of the object.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-11-2" class="outline-3">
        <h3 id="sec-11-2"><span class="section-number-3">11.2</span> Tabulating
        factors</h3>

        <div class="outline-text-3" id="text-11-2">
          <dl class="org-dl">
            <dt><code>table(f)</code></dt>

            <dd>
              <b>Count</b> the number of observations in each <i>level</i>
              (only works on <i>factors</i>). Give a <b>frequency</b> of how
              many levels there are.

              <div class="org-src-container">
                <pre class="src src-R">
unique(dfrm$f)
length(unique(dfrm$f))             <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">how many unique values</span>

table(dfrm$f, useNA=<span style=
"color: #FF4700;">"ifany"</span>)       <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">number of times each unique value appears</span>
                                   <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">(show missing values as well)</span>
</pre>
              </div>

              <p>Use the <code>cut</code> function to calculate tables with
              <i>numeric</i> values.</p>
            </dd>

            <dt><code>table(f1, f2)</code></dt>

            <dd>
              Produce a <i>contingency table</i> (cross-tabulation).

              <div class="org-src-container">
                <pre class="src src-R">
table(dfrm$f1, dfrm$f2)            <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">look at the relationship between f1 and f2</span>
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-11-3" class="outline-3">
        <h3 id="sec-11-3"><span class="section-number-3">11.3</span> Testing
        categorical variables for independence</h3>

        <div class="outline-text-3" id="text-11-3">
          <div class="org-src-container">
            <pre class="src src-R">
summary(table(f1, f2))
</pre>
          </div>

          <p>Conventionally, a <i>p</i>-value of less than 0.05 indicates that
          the variables are likely not independent (there is some connection
          between the variables).</p>
        </div>
      </div>

      <div id="outline-container-sec-11-4" class="outline-3">
        <h3 id="sec-11-4"><span class="section-number-3">11.4</span>
        Calculating quantiles (and quartiles) of a dataset</h3>

        <div class="outline-text-3" id="text-11-4">
          <div class="org-src-container">
            <pre class="src src-R">
quantile(vec, na.rm=<span style="color: #666666;">TRUE</span>)
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-12" class="outline-2">
      <h2 id="sec-12"><span class="section-number-2">12</span> 6. Data
      transformations</h2>

      <div class="outline-text-2" id="text-12">
        <p>(Partial list of) munging operations (= key process)</p>

        <ul class="org-ul">
          <li><b>These steps must be recorded</b> in their own R script</li>

          <li><b>90% of your effort will often be spent here</b></li>
        </ul>

        <p>Processed (<b>tidy</b>) data:</p>

        <ul class="org-ul">
          <li>Each variable forms a column.</li>

          <li>Each observation forms a row.</li>

          <li>Each table / file stores data about one kind of observation.</li>
        </ul>
      </div>

      <div id="outline-container-sec-12-1" class="outline-3">
        <h3 id="sec-12-1"><span class="section-number-3">12.1</span> Fixing
        variable names</h3>

        <div class="outline-text-3" id="text-12-1">
          <div class="org-src-container">
            <pre class="src src-R">
tolower(names(dfrm))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-R">
splitNames <span style=
"color: #6434A3;">&lt;-</span> strsplit(names(dfrm),<span style=
"color: #FF4700;">"\\."</span>) <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">split at period in names</span>
<span style="color: #006699;">firstElement</span> <span style=
"color: #6434A3;">&lt;-</span> <span style=
"color: #0000FF;">function</span>(x){x[1]}       <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">select the 1st component of the vector</span>
sapply(splitNames, firstElement)        <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">remove everything after the trailing dot</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-R">
gsub(<span style="color: #FF4700;">"_"</span>, <span style=
"color: #FF4700;">""</span>, names(dfrm))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-12-2" class="outline-3">
        <h3 id="sec-12-2"><span class="section-number-3">12.2</span> Creating
        new variables</h3>

        <div class="outline-text-3" id="text-12-2">
          <div class="org-src-container">
            <pre class="src src-R">
dfrm$ranges <span style=
"color: #6434A3;">&lt;-</span> ranges                   <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">add a variable to the data frame</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-12-3" class="outline-3">
        <h3 id="sec-12-3"><span class="section-number-3">12.3</span> Removing
        list elements using a condition</h3>

        <div class="outline-text-3" id="text-12-3">
          <p><b>Subsetting</b> by using 2 types of index:</p>

          <ul class="org-ul">
            <li>a numeric vector (<code>x[2]</code>, <code>x[1:4]</code>)</li>

            <li>a <b>logical vector</b> (<code>x[x &gt; "a"]</code>)</li>
          </ul>

          <p>Create a logical vector:</p>

          <div class="org-src-container">
            <pre class="src src-R">
u <span style="color: #6434A3;">&lt;-</span> x &gt; <span style=
"color: #FF4700;">"a"</span>
x[u]                                    <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">get all elements which are greater than "a"</span>
</pre>
          </div>

          <p>Remove missing values (<code>NA</code>) from a list:</p>

          <div class="org-src-container">
            <pre class="src src-R">
missing <span style=
"color: #6434A3;">&lt;-</span> is.na(x)                     <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">logical vector</span>
x[!missing]
</pre>
          </div>

          <p>Take the subset of all objects (<code>x</code> and <code>y</code>)
          that has no missing values:</p>

          <div class="org-src-container">
            <pre class="src src-R">
bothnonmissing <span style=
"color: #6434A3;">&lt;-</span> complete.cases(x, y)  <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">logical vector</span>
x[bothnonmissing]
</pre>
          </div>

          <p>Take all the rows of a data frame where <b>all the values are not
          missing</b>:</p>

          <div class="org-src-container">
            <pre class="src src-R">
nonmissing <span style="color: #6434A3;">&lt;-</span> complete.cases(x)
x[nonmissing, ]
</pre>
          </div>

          <p>To <b>drop columns by name</b> in a data frame, you can use direct
          indexing (with booleans vectors) and then, simply reassign data:</p>

          <div class="org-src-container">
            <pre class="src src-R">
tokeep <span style="color: #6434A3;">&lt;-</span> !names(x) %<span style=
"color: #0000FF;">in</span>% c(<span style=
"color: #FF4700;">"remove1"</span>, <span style=
"color: #FF4700;">"remove2"</span>)
x <span style=
"color: #6434A3;">&lt;-</span> x[,tokeep]                         <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">or...</span>
x <span style="color: #6434A3;">&lt;-</span> x[,tokeep, drop=<span style=
"color: #666666;">FALSE</span>]             <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">you will need this option to avoid</span>
                                        <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">the conversion to an atomic vector if</span>
                                        <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">there is only one column left</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-12-4" class="outline-3">
        <h3 id="sec-12-4"><span class="section-number-3">12.4</span> Selecting
        rows and columns more easily</h3>

        <div class="outline-text-3" id="text-12-4">
          <p>Indexing approach.</p>

          <div class="org-src-container">
            <pre class="src src-R">
dfrm[dfrm$var1 &gt; 0 &amp; dfrm$var2 &gt; 0, c(1,2)] <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">subset on var1 and var2</span>
dfrm[dfrm$var1 &gt; 0 | dfrm$var2 &gt; 0, c(1,2)] <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">subset on var1 or var2</span>
</pre>
          </div>

          <p>Using the <code>subset</code> function.</p>

          <div class="org-src-container">
            <pre class="src src-R">
subset(dfrm, select=c(var1,var2), subset=(var1 &gt; 0 &amp; var2 &gt; 0))
subset(dfrm, select=c(var1,var2), subset=(var1 &gt; 0 | var2 &gt; 0))
</pre>
          </div>

          <p>Note that you do <i>not</i> quote the column names.</p>
        </div>
      </div>

      <div id="outline-container-sec-12-5" class="outline-3">
        <h3 id="sec-12-5"><span class="section-number-3">12.5</span> Removing
        rows that contain NAs from a data frame</h3>
      </div>

      <div id="outline-container-sec-12-6" class="outline-3">
        <h3 id="sec-12-6"><span class="section-number-3">12.6</span> Removing
        columns that contain NAs from a data frame</h3>

        <div class="outline-text-3" id="text-12-6">
          <p>Get rid of any column that has one or more NAs.</p>

          <div class="org-src-container">
            <pre class="src src-R">
df <span style="color: #6434A3;">&lt;-</span> df[,colSums(is.na(df))==0]
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-12-7" class="outline-3">
        <h3 id="sec-12-7"><span class="section-number-3">12.7</span> Merging
        data frames by commun column</h3>

        <div class="outline-text-3" id="text-12-7">
          <dl class="org-dl">
            <dt><code>merge(df1, df2, by = "CustomerId")</code></dt>

            <dd><b>Inner</b> join.</dd>

            <dt><code>merge(df1, df2, by = "CustomerId", all =
            TRUE)</code></dt>

            <dd><b>Full outer</b> join (all records from both tables).</dd>

            <dt><code>merge(df1, df2, by = "CustomerId", all.x =
            TRUE)</code></dt>

            <dd><b>Left</b> outer join.</dd>

            <dt><code>merge(df1, df2, by = "CustomerId", all.y =
            TRUE)</code></dt>

            <dd><b>Right</b> outer join.</dd>

            <dt><code>merge(df1, df2, by = NULL)</code></dt>

            <dd><b>Cross</b> join.</dd>
          </dl>

          <p>Merge data sets.</p>

          <div class="org-src-container">
            <pre class="src src-R">
mergedData <span style=
"color: #6434A3;">&lt;-</span> merge(df1, df2, by.x=<span style=
"color: #FF4700;">"id1"</span>, by.y=<span style=
"color: #FF4700;">"id2"</span>, all=<span style="color: #666666;">TRUE</span>)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-12-8" class="outline-3">
        <h3 id="sec-12-8"><span class="section-number-3">12.8</span>
        Converting</h3>

        <div class="outline-text-3" id="text-12-8">
          <dl class="org-dl">
            <dt><code>as.*()</code></dt>

            <dd>Explicitly coerce from one class to another.</dd>

            <dt><code>as.numeric()</code></dt>

            <dd>Coerce the (<code>character</code>) column to be
            <code>numeric</code>.</dd>

            <dt><code>as.Date("January 2, 2007", "%B %d, %Y")</code></dt>

            <dd>"2007-01-02"</dd>

            <dt><code>as.ts()</code></dt>

            <dd>Convert to a time series object.</dd>
          </dl>

          <p>You can always convert variables between types.</p>

          <div class="org-src-container">
            <pre class="src src-R">
dfrm$x <span style=
"color: #6434A3;">&lt;-</span> as.factor(dfrm$x)             <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">character to factor</span>
dfrm$x <span style=
"color: #6434A3;">&lt;-</span> as.character(dfrm$x)          <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">factor to character</span>
</pre>
          </div>

          <p>Warning: To convert factors to numeric or integer, first convert
          to character. Converting factors directly to numeric or integer data
          can lead to unwanted outcomes. Always check the results of a
          conversion to make sure R did what you wanted.</p>

          <p>Convert at once all the string columns to factors:</p>

          <div class="org-src-container">
            <pre class="src src-R">
ind <span style="color: #6434A3;">&lt;-</span> sapply(x, is.character)
x[ind] <span style="color: #6434A3;">&lt;-</span> lapply(x[ind], factor)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-12-9" class="outline-3">
        <h3 id="sec-12-9"><span class="section-number-3">12.9</span> Applying a
        function to each list element</h3>

        <div class="outline-text-3" id="text-12-9">
          <p>Alternative (to <code>for</code> <b>loops</b>) to apply a function
          (or summary statistics).</p>
        </div>

        <div id="outline-container-sec-12-9-1" class="outline-4">
          <h4 id="sec-12-9-1"><span class="section-number-4">12.9.1</span>
          <code>lapply</code></h4>

          <div class="outline-text-4" id="text-12-9-1">
            <p><b>Loop over a list</b> and apply a <b>function</b> on each
            element. <i>Always</i> returns a <b>list</b> back (that is, not a
            simplified result).</p>

            <ul class="org-ul">
              <li>(coerced) list <code>X</code></li>

              <li>function <code>FUN</code></li>

              <li>other arguments <code>...</code></li>
            </ul>

            <div class="org-src-container">
              <pre class="src src-R">
x <span style="color: #6434A3;">&lt;-</span> list(a = 1:5, b = rnorm(10))
lapply(x, mean)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-R">
lapply(1:4, runif, min = 0, max = 10)   <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">arguments passed through the `...'</span>
</pre>
            </div>

            <p>Extract the first column of each matrix of a list:</p>

            <div class="org-src-container">
              <pre class="src src-R">
lapply(x, <span style="color: #0000FF;">function</span>(elt) elt[,1])
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-12-9-2" class="outline-4">
          <h4 id="sec-12-9-2"><span class="section-number-4">12.9.2</span>
          <code>sapply</code></h4>

          <div class="outline-text-4" id="text-12-9-2">
            <p>Same as <code>lapply</code>, but tries to "<b>simplify</b>" the
            result in a much more compact format (put all the elements into a
            <b>vector</b> or a <b>matrix</b> if that is possible, instead of
            returning a list).</p>

            <div class="org-src-container">
              <pre class="src src-R">
sapply(s, <span style=
"color: #0000FF;">function</span>(x) colMeans(x[, c(<span style=
"color: #FF4700;">"Ozone"</span>, <span style=
"color: #FF4700;">"Solar.R"</span>, <span style=
"color: #FF4700;">"Wind"</span>)]))
</pre>
            </div>

            <p>Pass <code>na.rm</code> argument to <code>ColMeans</code> to
            remove the missing values before calculating the mean.</p>

            <div class="org-src-container">
              <pre class="src src-R">
sapply(s, <span style=
"color: #0000FF;">function</span>(x) colMeans(x[, c(<span style=
"color: #FF4700;">"Ozone"</span>, <span style=
"color: #FF4700;">"Solar.R"</span>, <span style=
"color: #FF4700;">"Wind"</span>)], na.rm = <span style=
"color: #666666;">TRUE</span>))
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-12-10" class="outline-3">
        <h3 id="sec-12-10"><span class="section-number-3">12.10</span>
        Splitting a vector into groups</h3>

        <div class="outline-text-3" id="text-12-10">
          <dl class="org-dl">
            <dt><code>split(x, f)</code></dt>

            <dd>
              Take a vector, and <b>split</b> it into subpieces (the number of
              groups identified by the levels of a <b>factor</b> variable).
              Always return a <b>list</b> (of lists?) back.

              <dl class="org-dl">
                <dt><code>drop = TRUE</code></dt>

                <dd>Don't keep the empty levels of the factor.</dd>
              </dl>
            </dd>
          </dl>

          <p>Auxiliary function, used in conjunction with functions like
          <code>lapply</code> or <code>sapply</code> to apply a function to
          those individual groups.</p>

          <div class="org-src-container">
            <pre class="src src-R">
lapply(split(x, f), mean)
</pre>
          </div>

          <p>Like <code>tapply</code>, but without applying the summary
          statistics.</p>

          <p>Splitting a data frame (or other kinds of lists), and apply an
          <i>anonymous function</i>:</p>

          <div class="org-src-container">
            <pre class="src src-R">
s <span style=
"color: #6434A3;">&lt;-</span> split(airquality, airquality$Month) <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">split according to month</span>
lapply(s, <span style=
"color: #0000FF;">function</span>(x) colMeans(x[, c(<span style=
"color: #FF4700;">"Ozone"</span>, <span style=
"color: #FF4700;">"Solar.R"</span>, <span style=
"color: #FF4700;">"Wind"</span>)])
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-12-11" class="outline-3">
        <h3 id="sec-12-11"><span class="section-number-3">12.11</span> Applying
        a function to every row/column</h3>

        <div class="outline-text-3" id="text-12-11">
          <dl class="org-dl">
            <dt><code>apply</code></dt>

            <dt>(no term)</dt>

            <dd>
              Apply a function over the <b>margins</b> of an array

              <ul class="org-ul">
                <li>Often used to apply a function to the rows or columns of a
                matrix</li>

                <li>Very useful if you wanna take <b>summaries</b> of matrices
                or higher-dimensional arrays (such as array of matrices)</li>
              </ul>
            </dd>

            <dt>(no term)</dt>

            <dd>
              apply(X, MARGIN, FUN, …)

              <ul class="org-ul">
                <li>X array (= vector which has dimensions attached to it)</li>

                <li>MARGIN is an integer vector which indicates which margins
                should be "retained"</li>

                <li>FUN you want to apply to each of the margins</li>

                <li>… for other arguments you wanna passed to the function</li>
              </ul>
            </dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-R">
x <span style="color: #6434A3;">&lt;-</span> matrix(rnorm(200), 20, 10)
apply(x, 2, mean)
</pre>
          </div>

          <ul class="org-ul">
            <li>margin 1 = apply FUN for each row (dimension 1); preserve all
            the rows, eliminate all columns, get a vector of the number of
            rows</li>

            <li>margin 2 = for each column (dimension 2); first dimension has
            been eliminated</li>

            <li>Shortcut functions (<i>much</i> faster on large matrices):

              <ul class="org-ul">
                <li>rowSums = apply(x, 1, sum)</li>

                <li>rowMeans = apply(x, 1, mean)</li>

                <li>colSums = apply(x, 2, sum)</li>

                <li>colMeans = apply(x, 2, mean)</li>
              </ul>
            </li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-R">
x <span style="color: #6434A3;">&lt;-</span> matrix(rnorm(200), 20, 10)
apply(x, 1, quantile, probs = c(0.25, 0.75)) <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">no default value for `probs'</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-12-12" class="outline-3">
        <h3 id="sec-12-12"><span class="section-number-3">12.12</span> Applying
        a function to groups of data</h3>

        <div class="outline-text-3" id="text-12-12">
          <dl class="org-dl">
            <dt><code>tapply(x, index, fun)</code></dt>

            <dd>
              Short for "<b>table apply</b>". Apply a <b>function</b> over
              <b>subsets</b> of a vector:

              <ul class="org-ul">
                <li>Splits up a vector into little groups (such as men and
                women, indicated by a <b>factor</b>),</li>

                <li>Applies a function to those groups and</li>

                <li>Brings the pieces back together</li>
              </ul>

              <p>Function may be anonymous.</p>

              <p><code>Simplify = FALSE</code> to get back a list (instead of
              an array).</p>

              <div class="org-src-container">
                <pre class="src src-R">
tapply(x, f, sum, simplify = <span style=
"color: #666666;">FALSE</span>) <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">= lapply(split(x, f), sum)</span>
tapply(x, f, mean)
tapply(x, f, length)
</pre>
              </div>
            </dd>

            <dt><code>interaction(f1, f2)</code></dt>

            <dd>Combines all the levels of the first factor with all the levels
            of the second factor.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-12-13" class="outline-3">
        <h3 id="sec-12-13"><span class="section-number-3">12.13</span> Applying
        a function to parallel vectors or lists</h3>

        <div class="outline-text-3" id="text-12-13">
          <dl class="org-dl">
            <dt><code>mapply</code></dt>

            <dt>(no term)</dt>

            <dd>mapply is a multivariate version of <code>lapply</code>:
            applies a function in parallel over a set of arguments</dd>

            <dt>(no term)</dt>

            <dd>
              Apply a <b>function</b> to the elements of <b>multiple lists</b>
              in parallel

              <ul class="org-ul">
                <li>For example, apply a function over 2 lists, where the
                elements of the first list go into one argument of the
                function, and the elements of the second list go into another
                argument of the function</li>
              </ul>
            </dd>

            <dt>(no term)</dt>

            <dd>
              <b>Vectorizing a function</b> (that doesn't allow for vector
              arguments)

              <div class="org-src-container">
                <pre class="src src-R">
mapply(rnorm, 1:5, 1:5, 2) <span style="color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">fixed standard deviation</span>
</pre>
              </div>

              <p>is the same as</p>

              <div class="org-src-container">
                <pre class="src src-R">
list(rnorm(1, 1, 2),
     rnorm(2, 2, 2),
     rnorm(3, 3, 2),
     rnorm(4, 4, 2),
     rnorm(5, 5, 2))
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-12-14" class="outline-3">
        <h3 id="sec-12-14"><span class="section-number-3">12.14</span> Checking
        on and removing inconsistent values</h3>
      </div>
    </div>

    <div id="outline-container-sec-13" class="outline-2">
      <h2 id="sec-13"><span class="section-number-2">13</span> 7. Strings and
      dates</h2>

      <div class="outline-text-2" id="text-13"></div>

      <div id="outline-container-sec-13-1" class="outline-3">
        <h3 id="sec-13-1"><span class="section-number-3">13.1</span> Getting
        the length of a string</h3>

        <div class="outline-text-3" id="text-13-1">
          <dl class="org-dl">
            <dt><code>nchar()</code></dt>

            <dd>Get the length of a string.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-13-2" class="outline-3">
        <h3 id="sec-13-2"><span class="section-number-3">13.2</span>
        Concatenating strings</h3>

        <div class="outline-text-3" id="text-13-2">
          <dl class="org-dl">
            <dt><code>paste()</code></dt>

            <dd><b>Concatenate</b> a set of <b>strings together</b> to create
            one string or a vector of strings.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-13-3" class="outline-3">
        <h3 id="sec-13-3"><span class="section-number-3">13.3</span> Regular
        expressions</h3>

        <div class="outline-text-3" id="text-13-3">
          <p>For the moment, we assume pattern matching on <b>ASCII
          strings</b>…</p>

          <p>Metacharacters:</p>

          <dl class="org-dl">
            <dt><code>^</code></dt>

            <dd>Start of a line (or negation of a character class).</dd>

            <dt><code>$</code></dt>

            <dd>End of a line.</dd>

            <dt><code>[]</code></dt>

            <dd>Character classes.</dd>

            <dt><code>.</code></dt>

            <dd>Any character.</dd>

            <dt><code>|</code></dt>

            <dd>Or.</dd>

            <dt><code>()</code></dt>

            <dd>Subexpressions (alternatives or "remember" matched text).</dd>

            <dt><code>?</code></dt>

            <dd>Optional.</dd>

            <dt>\</dt>

            <dd>"Escape" the metacharacter.</dd>

            <dt><code>+</code></dt>

            <dd>Any number, including none.</dd>

            <dt><code>*</code></dt>

            <dd>
              Any number, at least one – it is "greedy" so it always matches
              the <i>longest</i> possible string that satisfies the regular
              expression.

              <p>The greediness can be turned off with the <code>?</code>
              metacharacter (make the regex "lazy"), as in:</p>

              <div class="org-src-container">
                <pre class="src src-R">
^s(.*?)s$
</pre>
              </div>
            </dd>

            <dt><code>{}</code></dt>

            <dd>Interval quantifiers (minimum, maximum).</dd>
          </dl>

          <p>These functions can take vector arguments.</p>

          <dl class="org-dl">
            <dt><code>grep</code></dt>

            <dd>
              Return the <b>indices</b> into the character vector where the
              regex pattern matches (it won't do anything).

              <div class="org-src-container">
                <pre class="src src-R">
i <span style="color: #6434A3;">&lt;-</span> grep(<span style=
"color: #FF4700;">"regexp"</span>, vector) <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">get a set of indices</span>
j <span style="color: #6434A3;">&lt;-</span> grep(<span style=
"color: #FF4700;">"anotherregexp"</span>, vector) <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">get another set of indices</span>
setdiff(i, j) <span style="color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">substract j elements from i when they are the same</span>
setdiff(j, i) <span style="color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">different result</span>
</pre>
              </div>

              <p>Setting <code>value = TRUE</code> returns the <b>actual
              elements</b> of the character vector that match.</p>
            </dd>

            <dt><code>grepl</code></dt>

            <dd>Return a <b>logical vector</b> (<code>TRUE</code> /
            <code>FALSE</code>) indicating which element matches (used for
            <i>subsetting</i>).</dd>

            <dt><code>regexpr</code></dt>

            <dd>
              Return the indices (integer vector) of the string <b>where the
              first match begins</b> and the length of the match.

              <p>If I want to see what the match is, use
              <code>substr</code>:</p>

              <div class="org-src-container">
                <pre class="src src-R">
regexpr(<span style="color: #FF4700;">"..."</span>, string)
substr(string, start + length - 1)
</pre>
              </div>

              <p>Useful in conjunction with <code>regmatches</code> which
              extracts the matches in the strings without having you to use
              <code>substr</code>.</p>

              <div class="org-src-container">
                <pre class="src src-R">
r <span style="color: #6434A3;">&lt;-</span> regexpr(<span style=
"color: #FF4700;">"..."</span>, string)
regmatches(string, r)
</pre>
              </div>
            </dd>

            <dt><code>gregexpr</code></dt>

            <dd>Return <b>all of the matches</b> ("global") in a given
            string.</dd>

            <dt><code>sub</code></dt>

            <dd>Replace <b>the first match</b> with another string (used to
            strip out stuff by replacing the match with nothing).</dd>

            <dt><code>gsub</code></dt>

            <dd>Replace <b>all of the matches</b> with another string.</dd>

            <dt><code>regexec</code></dt>

            <dd>
              Give the indices (list) for parenthesized sub-expressions.

              <p>If I want to see what the submatch is:</p>

              <div class="org-src-container">
                <pre class="src src-R">
r <span style="color: #6434A3;">&lt;-</span> regexpr(<span style=
"color: #FF4700;">"... (.*) ..."</span>, string) <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">find all the date fields</span>
m <span style="color: #6434A3;">&lt;-</span> regmatches(string, r) <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">parse out</span>
dates <span style="color: #6434A3;">&lt;-</span> sapply(m, <span style=
"color: #0000FF;">function</span> (x) x[2]) <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">extract the 2nd element of each list object</span>
dates <span style="color: #6434A3;">&lt;-</span> as.Date(dates, <span style=
"color: #FF4700;">"%B %d, %Y"</span>) <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">convert to date</span>
hist(dates, <span style="color: #FF4700;">"month"</span>, freq = <span style=
"color: #666666;">TRUE</span>) <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">aggregate the dates by month and give an histogram</span>
</pre>
              </div>
            </dd>
          </dl>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-14" class="outline-2">
      <h2 id="sec-14"><span class="section-number-2">14</span> 8.
      Probability</h2>
    </div>

    <div id="outline-container-sec-15" class="outline-2">
      <h2 id="sec-15"><span class="section-number-2">15</span> 10.
      Graphics</h2>

      <div class="outline-text-2" id="text-15">
        <p>2 systems:</p>

        <dl class="org-dl">
          <dt><code>base</code></dt>

          <dd>
            Graphics are constructed piecemeal by <b>different function
            calls</b>; you can add things one by one:

            <ul class="org-ul">
              <li>annotate (some of the points in) the plot,</li>

              <li>put some points on the canvas,</li>

              <li>draw a title,</li>

              <li>add some axis labels,</li>

              <li>add some colors,</li>

              <li>add a legend.</li>
            </ul>
          </dd>

          <dt><code>lattice</code></dt>

          <dd>Graphics are constructed via a single function call: all options
          have to be specified at once (advantage: that allows R to calculate
          the necessary spacings, margins and font sizes).</dd>
        </dl>

        <p>Behavior:</p>

        <ul class="org-ul">
          <li>Base graphics functions have a "side effect": they plot data
          directly to the graphics device.</li>

          <li>Lattice graphics functions return an object of the class
          <code>trellis</code> (object designed for plotting).

            <p>When you call Lattice functions, even if you don't assign it to
            a "plot object", the result will be <b>auto-printed</b> (generate
            the plot <b>on the graphics device</b>), so it will look like
            Lattice functions have a "side effect"</p>
          </li>
        </ul>

        <p>You cannot use functions from the base plotting system in a Lattice
        plot.</p>
      </div>

      <div id="outline-container-sec-15-1" class="outline-3">
        <h3 id="sec-15-1"><span class="section-number-3">15.1</span> Base
        graphics</h3>

        <div class="outline-text-3" id="text-15-1"></div>

        <div id="outline-container-sec-15-1-1" class="outline-4">
          <h4 id="sec-15-1-1"><span class="section-number-4">15.1.1</span> Make
          a plot</h4>

          <div class="outline-text-4" id="text-15-1-1">
            <dl class="org-dl">
              <dt><code>plot</code></dt>

              <dd>Create a <b>scatter plot</b> (or another type of plot,
              depending on the class of the object being plotted).</dd>

              <dt><code>hist</code></dt>

              <dd>Make an <b>histogram</b> showing the distribution of the
              numeric vector <code>x</code>.</dd>

              <dt><code>boxplot</code></dt>

              <dd>Create a box plot of the <code>y</code> variable by the
              grouping variable <code>x</code> (usually a
              <code>factor</code>).</dd>
            </dl>
          </div>

          <ol class="org-ol">
            <li>Create a scatter plot<br />

              <div class="outline-text-5" id="text-15-1-1-1">
                <dl class="org-dl">
                  <dt><code>plot(x)</code></dt>

                  <dd>
                    Plot the (numeric) data against the index
                    (<code>1:N</code>).

                    <div class="org-src-container">
                      <pre class="src src-R">
data(iris)
plot(sort(iris$Petal.Width),
     main=<span style="color: #FF4700;">"Distribution of petal widths"</span>,
     xlab=<span style="color: #FF4700;">"Rank"</span>, ylab=<span style=
"color: #FF4700;">"Width"</span>, col=as.integer(iris$Species)+1)
</pre>
                    </div>

                    <div class="figure">
                      <p><img src="images/base-scatterplot-sort.png" alt=
                      "base-scatterplot-sort.png" /></p>
                    </div>
                  </dd>

                  <dt><code>plot(x, y)</code></dt>

                  <dd>
                    Create a scatter plot of <code>x</code> and <code>y</code>.

                    <div class="org-src-container">
                      <pre class="src src-R">
data(iris)
plot(iris$Petal.Length, iris$Petal.Width,
     main=<span style="color: #FF4700;">"Petals: Length vs Width"</span>,
     xlab=<span style="color: #FF4700;">"Length"</span>, ylab=<span style=
"color: #FF4700;">"Width"</span>, col=as.integer(iris$Species)+1)
</pre>
                    </div>

                    <div class="figure">
                      <p><img src="images/base-scatterplot.png" alt=
                      "base-scatterplot.png" /></p>
                    </div>
                  </dd>

                  <dt><code>plot(x, y, type = "n")</code></dt>

                  <dd>Set up the plot window, but don't actually plot the data
                  in there.</dd>

                  <dt><code>plot(dfrm)</code></dt>

                  <dd>
                    Create <b>multiple scatter plots</b> if your data frame
                    contains more than 2&nbsp;columns.

                    <div class="org-src-container">
                      <pre class="src src-R">
data(iris)
plot(iris[,1:4], main=<span style=
"color: #FF4700;">"Multiple scatter plots"</span>,
     col=as.integer(iris$Species)+1)
</pre>
                    </div>

                    <div class="figure">
                      <p><img src="images/base-multi-scatterplots.png" alt=
                      "base-multi-scatterplots.png" /></p>
                    </div>

                    <p>You can see that length and width appear strongly
                    correlated. You could check the correlation between
                    features with the <code>cor()</code> function.</p>

                    <div class="org-src-container">
                      <pre class="src src-R">
data(iris)
cor(iris[-5])
</pre>
                    </div>

                    <table border="2" cellspacing="0" cellpadding="6" rules=
                    "groups" frame="hsides">
                      <colgroup>
                        <col class="right" />
                        <col class="right" />
                        <col class="right" />
                        <col class="right" />
                      </colgroup>

                      <tbody>
                        <tr>
                          <td class="right">1</td>

                          <td class="right">-0.117569784133002</td>

                          <td class="right">0.871753775886583</td>

                          <td class="right">0.817941126271576</td>
                        </tr>

                        <tr>
                          <td class="right">-0.117569784133002</td>

                          <td class="right">1</td>

                          <td class="right">-0.42844010433054</td>

                          <td class="right">-0.366125932536439</td>
                        </tr>

                        <tr>
                          <td class="right">0.871753775886583</td>

                          <td class="right">-0.42844010433054</td>

                          <td class="right">1</td>

                          <td class="right">0.962865431402796</td>
                        </tr>

                        <tr>
                          <td class="right">0.817941126271576</td>

                          <td class="right">-0.366125932536439</td>

                          <td class="right">0.962865431402796</td>

                          <td class="right">1</td>
                        </tr>
                      </tbody>
                    </table>
                  </dd>
                </dl>
              </div>
            </li>

            <li>
              <code>hist</code><br />

              <div class="outline-text-5" id="text-15-1-1-2">
                <p>Generic function: you can call it on different types of
                data. When you call <code>hist</code> on a <code>Date</code>
                object, it requires an interval ("day" / "week" / "month" /
                "year") in order to break it up into sequences.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
data(iris)
hist(iris$Petal.Length, main=<span style=
"color: #FF4700;">"Histogram"</span>, col = <span style=
"color: #FF4700;">"lightblue"</span>)
</pre>
                </div>

                <div class="figure">
                  <p><img src="images/base-hist.png" alt="base-hist.png" /></p>
                </div>

                <p><code>breaks</code> is key: it specifies the number of
                categories to plot or the breakpoints for each category.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
data(iris)
hist(iris$Petal.Length, breaks=seq(1,7,by=0.1), main=<span style=
"color: #FF4700;">"Histogram"</span>, col = <span style=
"color: #FF4700;">"lightblue"</span>)
</pre>
                </div>

                <div class="figure">
                  <p><img src="images/base-hist-breaks.png" alt=
                  "base-hist-breaks.png" /></p>
                </div>

                <p>Can you explain the peculiar pattern? Graphical
                representations of data are useful at identifying these sorts
                of artifacts…</p>

                <div class="org-src-container">
                  <pre class="src src-R">
data(iris)
plot(table(iris$Petal.Length), main=<span style=
"color: #FF4700;">"Table"</span>, col = <span style=
"color: #FF4700;">"blue"</span>)
</pre>
                </div>

                <div class="figure">
                  <p><img src="images/base-plot-table.png" alt=
                  "base-plot-table.png" /></p>
                </div>

                <p>Note – In the table plot, x values with one occurrence (out
                of thousands) would be visible as one dot in the graphics. They
                don't in the histogram (as the line, being too small, would be
                on the x-axis itself).</p>
              </div>
            </li>

            <li>
              <code>boxplot</code><br />

              <div class="outline-text-5" id="text-15-1-1-3">
                <p><code>boxplot</code> draws plot summarizing</p>

                <ul class="org-ul">
                  <li>Median</li>

                  <li>Quartiles (Q1, Q3)</li>

                  <li>Outliers — by default, observations more than 1.5 * (Q3 -
                  Q1) distant from nearest quartile</li>
                </ul>

                <div class="org-src-container">
                  <pre class="src src-R">
data(iris)
boxplot(iris[,1:4], col=rainbow(4), main=<span style=
"color: #FF4700;">"Boxplot"</span>, ylab=<span style=
"color: #FF4700;">"Appropriate units"</span>)
</pre>
                </div>

                <div class="figure">
                  <p><img src="images/base-boxplot.png" alt=
                  "base-boxplot.png" /></p>
                </div>
              </div>
            </li>
          </ol>
        </div>

        <div id="outline-container-sec-15-1-2" class="outline-4">
          <h4 id="sec-15-1-2"><span class="section-number-4">15.1.2</span> Add
          to an existing plot</h4>

          <div class="outline-text-4" id="text-15-1-2">
            <dl class="org-dl">
              <dt><code>lines</code></dt>

              <dd>
                Add lines (connect all the dots).

                <div class="org-src-container">
                  <pre class="src src-R">
lines(x, y)                        <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">all lines</span>
</pre>
                </div>
              </dd>

              <dt><code>abline</code></dt>

              <dd>
                Add a straight line.

                <p>Plot the <b>regression line</b> of a scatter plot.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
data(iris)
<span style="color: #6434A3;">attach</span>(iris)
plot(Petal.Length, Petal.Width)
fit <span style="color: #6434A3;">&lt;-</span> lm(Petal.Width ~ Petal.Length)
abline(fit, lwd=3, col=<span style="color: #FF4700;">"blue"</span>)
</pre>
                </div>

                <div class="figure">
                  <p><img src="images/base-abline.png" alt=
                  "base-abline.png" /></p>
                </div>
              </dd>

              <dt><code>points</code></dt>

              <dd>
                Add points (<code>col</code> for boundary color,
                <code>bg</code> for fill color, <code>pch</code> for plotting
                character).

                <p>Plot points <b>in groups separately</b>.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
data(iris)
<span style="color: #6434A3;">attach</span>(iris)
plot(Petal.Length, Petal.Width, type=<span style="color: #FF4700;">"n"</span>)
points(Petal.Length[Species == <span style=
"color: #FF4700;">"setosa"</span>], Petal.Width[Species == <span style=
"color: #FF4700;">"setosa"</span>], col = <span style=
"color: #FF4700;">"red"</span>)
points(Petal.Length[Species == <span style=
"color: #FF4700;">"versicolor"</span>], Petal.Width[Species == <span style=
"color: #FF4700;">"versicolor"</span>], col = <span style=
"color: #FF4700;">"green"</span>, pch = 19)
points(Petal.Length[Species == <span style=
"color: #FF4700;">"virginica"</span>], Petal.Width[Species == <span style=
"color: #FF4700;">"virginica"</span>], col = <span style=
"color: #FF4700;">"blue"</span>, pch = 18)
</pre>
                </div>

                <div class="figure">
                  <p><img src="images/base-points-distinguished.png" alt=
                  "base-points-distinguished.png" /></p>
                </div>

                <div class="org-src-container">
                  <pre class="src src-R">
data(iris)
plot(iris$Petal.Length, iris$Petal.Width, col=as.integer(iris$Species)+1)
</pre>
                </div>

                <div class="figure">
                  <p><img src="images/base-points-distinguished-col.png" alt=
                  "base-points-distinguished-col.png" /></p>
                </div>

                <div class="org-src-container">
                  <pre class="src src-R">
data(iris)
plot(iris[,3:4], col=c(<span style="color: #FF4700;">"red"</span>,<span style=
"color: #FF4700;">"green"</span>,<span style=
"color: #FF4700;">"blue"</span>)[unclass(iris$Species)])
</pre>
                </div>

                <div class="figure">
                  <p><img src=
                  "images/base-points-distinguished-col-unclass.png" alt=
                  "base-points-distinguished-col-unclass.png" /></p>
                </div>
              </dd>
            </dl>

            <dl class="org-dl">
              <dt><code>text</code></dt>

              <dd>
                Add text labels (inside the plot region).

                <p>Could be used to label datapoints.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
text(-2, 2, <span style="color: #FF4700;">"Label"</span>)
</pre>
                </div>
              </dd>

              <dt><code>title</code></dt>

              <dd>
                Add a title (or axis labels, subtitle, …).

                <div class="org-src-container">
                  <pre class="src src-R">
title(<span style="color: #FF4700;">"plot"</span>)
plot(x, y, xlab = <span style=
"color: #FF4700;">"Weight"</span>, ylab = <span style=
"color: #FF4700;">"Height"</span>, main = <span style=
"color: #FF4700;">"Scatterplot"</span>)
</pre>
                </div>
              </dd>

              <dt><code>mtext</code></dt>

              <dd>
                Add text to the margins.

                <p>Can be used to add multiline legends.</p>
              </dd>

              <dt><code>axis</code></dt>

              <dd><b>Annotate the axis</b> (tick marks, labels).</dd>

              <dt><code>legend</code></dt>

              <dd>
                Add a legend.

                <div class="org-src-container">
                  <pre class="src src-R">
legend(<span style="color: #FF4700;">"topleft"</span>, legend = <span style=
"color: #FF4700;">"Data"</span>, pch = 1)
</pre>
                </div>
              </dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-sec-15-1-3" class="outline-4">
          <h4 id="sec-15-1-3"><span class="section-number-4">15.1.3</span>
          Changing graphical parameters</h4>

          <div class="outline-text-4" id="text-15-1-3">
            <dl class="org-dl">
              <dt><code>par()</code></dt>

              <dd>
                control <b>all the graphing parameters</b> that you can specify
                (<i>defaults</i> for all plots in a session, which can be
                overridden as arguments to specific plotting functions).

                <dl class="org-dl">
                  <dt><code>pch</code></dt>

                  <dd><b>Plotting character</b> (default: open circle
                  symbol).</dd>

                  <dt><code>lty</code></dt>

                  <dd>Line type (default: <code>solid</code> line).</dd>

                  <dt><code>lwd</code></dt>

                  <dd>Line width.</dd>

                  <dt><code>col</code></dt>

                  <dd>Plotting color.</dd>

                  <dt><code>las</code></dt>

                  <dd>Orientation of the axis labels on the plot (<code>las =
                  2</code> will set the tick labels to be perpendicular to the
                  axis).</dd>

                  <dt><code>bg</code></dt>

                  <dd>Background color (default:
                  <code>transparent</code>).</dd>

                  <dt><code>mar</code></dt>

                  <dd>
                    Margin size (vector of 4 numbers, 1 per side).

                    <div class="org-src-container">
                      <pre class="src src-R">
par(mar = c(2,2,1,1))
</pre>
                    </div>
                  </dd>

                  <dt><code>oma</code></dt>

                  <dd>Outer margin size (relevant if you have more than one
                  plot per canvas).</dd>

                  <dt><code>mfrow</code></dt>

                  <dd>
                    Number of <b>plots per row and per column</b> on the canvas
                    (filled row-wise).

                    <div class="org-src-container">
                      <pre class="src src-R">
par(mfrow = c(2,1))           <span style=
"color: #008200;"># </span><span style=
"color: #008200; font-style: italic;">2 rows and 1 column</span>
plot(x, y)
plot(x, z)
</pre>
                    </div>
                  </dd>

                  <dt><code>mfcol</code></dt>

                  <dd>Number of plots per row and per column on the canvas
                  (filled column-wise).</dd>
                </dl>

                <p>Look at the defaults:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
par(<span style="color: #FF4700;">"lty"</span>)
</pre>
                </div>
              </dd>

              <dt><code>?Devices</code></dt>

              <dd>
                List graphical devices.

                <dl class="org-dl">
                  <dt><code>pdf</code></dt>

                  <dd>Vector format (very, very large for a graphic with <b>2
                  million points</b> on it: specify information for every
                  single object on the plot).</dd>

                  <dt><code>png</code></dt>

                  <dd>Bitmapped format (specify information for pixels),
                  losless <b>compression</b>, but <b>does not resize
                  well</b>.</dd>

                  <dt><code>jpeg</code></dt>

                  <dd>Lossy compression.</dd>

                  <dt><code>bitmap</code></dt>

                  <dd>If you're running R in a batch mode (you can't use the
                  <code>png</code> and <code>jpeg</code> functions).</dd>
                </dl>
              </dd>

              <dt>(no term)</dt>

              <dd>
                Copy the plot to another device

                <dl class="org-dl">
                  <dt><code>dev.copy2pdf</code></dt>

                  <dd>copy a plot to PDF</dd>
                </dl>
              </dd>
            </dl>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-15-2" class="outline-3">
        <h3 id="sec-15-2"><span class="section-number-3">15.2</span> Lattice
        graphics</h3>
      </div>

      <div id="outline-container-sec-15-3" class="outline-3">
        <h3 id="sec-15-3"><span class="section-number-3">15.3</span>
        ggplot2</h3>

        <div class="outline-text-3" id="text-15-3">
          <p>See post of Antoine Lizée in <a href=
          "http://stackoverflow.com/questions/5234117/how-to-drop-columns-by-name-in-a-data-frame">
          http://stackoverflow.com/questions/5234117/how-to-drop-columns-by-name-in-a-data-frame</a>
          for an excellent performance reporting.</p>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-16" class="outline-2">
      <h2 id="sec-16"><span class="section-number-2">16</span> 11. Linear
      regression and ANOVA</h2>
    </div>
  </div>

  <div id="postamble" class="status">
    <div id="copyright">
      © Fabrice Niessen
    </div>
  </div>
</body>
</html>
