<!-- <xml version="1.0" encoding="utf-8"> -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Cygwin (vers 1st September 2004), see www.w3.org" />

  <title></title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Org-mode" />
  <meta name="author" content="Fabrice Niessen" />
  <link rel="stylesheet" type="text/css" href=
  "http://www.pirilampo.org/styles/bigblow/css/htmlize.css" />
  <link rel="stylesheet" type="text/css" href=
  "http://www.pirilampo.org/styles/bigblow/css/bigblow.css" />
  <link rel="stylesheet" type="text/css" href=
  "http://www.pirilampo.org/styles/bigblow/css/hideshow.css" />
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/jquery-1.11.0.min.js">
</script>
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/jquery-ui-1.10.2.min.js">
</script>
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/jquery.localscroll-min.js">
</script>
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js">
</script>
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/jquery.zclip.min.js">
</script>
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/bigblow.js">
</script>
<script type="text/javascript" src=
"http://www.pirilampo.org/styles/bigblow/js/hideshow.js">
</script>
</head>

<body>
  <div id="content">
    <h1 class="title"></h1>

    <div id="table-of-contents">
      <h2>Table of Contents</h2>

      <div id="text-table-of-contents">
        <ul>
          <li>
            <a href="#sec-1">1. R reference card</a>

            <ul>
              <li><a href="#sec-1-1">1.1. Documentation</a></li>

              <li><a href="#sec-1-2">1.2. Coding style</a></li>

              <li>
                <a href="#sec-1-3">1.3. Emacs Speaks Statistics (ESS) key
                bindings</a>

                <ul>
                  <li><a href="#unnumbered-1">References</a></li>

                  <li>
                    <a href="#unnumbered-2">Interacting with the ESS
                    process</a>

                    <ul>
                      <li><a href="#unnumbered-3">Command History</a></li>

                      <li><a href="#unnumbered-4">Hot keys for common
                      commands</a></li>

                      <li><a href="#unnumbered-5">Other commands provided by
                      inferior-ESS</a></li>
                    </ul>
                  </li>

                  <li><a href="#unnumbered-6">Sending code to the iESS
                  process</a></li>

                  <li><a href="#unnumbered-7">Manipulating saved transcript
                  files</a></li>

                  <li>
                    <a href="#unnumbered-8">Editing objects and functions</a>

                    <ul>
                      <li><a href="#unnumbered-9">Creating or modifying
                      objects</a></li>

                      <li><a href="#unnumbered-10">Loading source files into
                      the ESS process</a></li>

                      <li><a href="#unnumbered-11">Commands for motion,
                      completion and more</a></li>
                    </ul>
                  </li>

                  <li><a href="#unnumbered-13">Reading help files</a></li>

                  <li>
                    <a href="#unnumbered-14">Completion</a>

                    <ul>
                      <li><a href="#unnumbered-15">Integration with
                      auto-complete package</a></li>
                    </ul>
                  </li>

                  <li>
                    <a href="#unnumbered-16">Developing with ESS</a>

                    <ul>
                      <li><a href="#unnumbered-17">ESS tracebug</a></li>

                      <li><a href="#unnumbered-23">ESS developer</a></li>
                    </ul>
                  </li>

                  <li>
                    <a href="#unnumbered-24">Other ESS features and tools</a>

                    <ul>
                      <li><a href="#unnumbered-25">ElDoc</a></li>
                    </ul>
                  </li>

                  <li><a href="#unnumbered-26">Other Emacs features and
                  tools</a></li>
                </ul>
              </li>

              <li><a href="#sec-1-4">1.4. 0. Overview of R</a></li>

              <li><a href="#sec-1-5">1.5. 1. Getting started and getting
              help</a></li>

              <li>
                <a href="#sec-1-6">1.6. 2. Some basics</a>

                <ul>
                  <li><a href="#unnumbered-27">Print something</a></li>

                  <li><a href="#unnumbered-28">Setting variables</a></li>

                  <li><a href="#unnumbered-29">Listing variables</a></li>

                  <li><a href="#unnumbered-30">Deleting variables</a></li>

                  <li><a href="#unnumbered-31">Computing basic
                  statistics</a></li>

                  <li><a href="#unnumbered-32">Creating sequences</a></li>

                  <li><a href="#unnumbered-33">Operators</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-7">1.7. 3. Navigating the software</a>

                <ul>
                  <li><a href="#unnumbered-34">Running a batch script</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-8">1.8. 5. Data structures</a>

                <ul>
                  <li><a href="#unnumbered-35">Basic (“atomic”) vector
                  types</a></li>

                  <li><a href="#unnumbered-36">Vectors</a></li>

                  <li><a href="#unnumbered-37">Matrices</a></li>

                  <li><a href="#unnumbered-38">Arrays</a></li>

                  <li><a href="#unnumbered-39">Lists</a></li>

                  <li><a href="#unnumbered-40">Factors</a></li>

                  <li><a href="#unnumbered-41">Data frames</a></li>

                  <li><a href="#unnumbered-42">Vectorized operations (recycling
                  rule)</a></li>

                  <li><a href="#unnumbered-43">Selecting list elements or data
                  frame columns by position (subsetting)</a></li>

                  <li><a href="#unnumbered-44">Selecting list elements or data
                  frame columns by name (subsetting)</a></li>

                  <li><a href="#unnumbered-45">Selecting data frame columns by
                  position (subsetting)</a></li>

                  <li><a href="#unnumbered-46">Flatten a list into a
                  vector</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-9">1.9. Control structures</a>

                <ul>
                  <li><a href="#unnumbered-47">Conditional statements</a></li>

                  <li><a href="#unnumbered-48">Loops</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-10">1.10. Writing functions</a>

                <ul>
                  <li><a href="#unnumbered-49">Arguments</a></li>

                  <li><a href="#unnumbered-50">Scoping rules for R</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-11">1.11. 4. Data Input and output</a>

                <ul>
                  <li><a href="#unnumbered-51">Getting the current working
                  directory</a></li>

                  <li><a href="#unnumbered-52">Creating, opening and closing
                  connections</a></li>

                  <li><a href="#unnumbered-53">Make your data
                  available</a></li>

                  <li><a href="#unnumbered-54">Reading tabular data
                  files</a></li>

                  <li><a href="#unnumbered-55">Writing tabular data
                  files</a></li>

                  <li><a href="#unnumbered-56">Reading from CSV files</a></li>

                  <li><a href="#unnumbered-57">Reading from Excel
                  files</a></li>

                  <li><a href="#unnumbered-58">Reading from Google
                  spreadsheets</a></li>

                  <li><a href="#unnumbered-59">Reading files from the
                  Internet</a></li>

                  <li><a href="#unnumbered-60">Reading files with a complex
                  structure</a></li>

                  <li><a href="#unnumbered-61">Reading from SQL Server
                  databases</a></li>

                  <li><a href="#unnumbered-62">Saving and transporting
                  objects</a></li>

                  <li><a href="#unnumbered-63">Further resources</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-12">1.12. 12. Useful tricks</a>

                <ul>
                  <li><a href="#unnumbered-64">Peeking at your data</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-13">1.13. 9. General statistics</a>

                <ul>
                  <li><a href="#unnumbered-65">Summarizing your data</a></li>

                  <li><a href="#unnumbered-66">Tabulating factors</a></li>

                  <li><a href="#unnumbered-67">Testing categorical variables
                  for independence</a></li>

                  <li><a href="#unnumbered-68">Calculating quantiles (and
                  quartiles) of a dataset</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-14">1.14. 6. Data transformations</a>

                <ul>
                  <li><a href="#unnumbered-69">Fixing variable names</a></li>

                  <li><a href="#unnumbered-70">Creating new variables</a></li>

                  <li><a href="#unnumbered-71">Change the class of many columns
                  from factor to character (or numeric)</a></li>

                  <li><a href="#unnumbered-72">Removing list elements using a
                  condition</a></li>

                  <li><a href="#unnumbered-73">Selecting rows and columns more
                  easily</a></li>

                  <li><a href="#unnumbered-74">Removing NA from a list</a></li>

                  <li><a href="#unnumbered-75">Removing rows that contain NAs
                  from a data frame</a></li>

                  <li><a href="#unnumbered-76">Removing columns that contain
                  NAs from a data frame</a></li>

                  <li><a href="#unnumbered-77">Removing columns by
                  name</a></li>

                  <li><a href="#unnumbered-78">Merging data frames by common
                  column</a></li>

                  <li><a href="#unnumbered-79">Convert a list of data frames
                  into one data frame</a></li>

                  <li><a href="#unnumbered-80">Converting</a></li>

                  <li>
                    <a href="#unnumbered-81">Applying a function to each list
                    element</a>

                    <ul>
                      <li><a href="#unnumbered-82"><code>lapply</code></a></li>

                      <li><a href="#unnumbered-83"><code>sapply</code></a></li>
                    </ul>
                  </li>

                  <li><a href="#unnumbered-84">Splitting a vector into
                  groups</a></li>

                  <li><a href="#unnumbered-85">Applying a function to every
                  row/column</a></li>

                  <li><a href="#unnumbered-86">Applying a function to groups of
                  data</a></li>

                  <li><a href="#unnumbered-87">Applying a function to parallel
                  vectors or lists</a></li>

                  <li><a href="#unnumbered-88">Checking on and removing
                  inconsistent values</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-15">1.15. 7. Strings (and dates)</a>

                <ul>
                  <li><a href="#unnumbered-89">Getting the length of a
                  string</a></li>

                  <li><a href="#unnumbered-90">Concatenating strings</a></li>

                  <li>
                    <a href="#unnumbered-91">Regular expressions</a>

                    <ul>
                      <li><a href="#unnumbered-92">Metacharacters</a></li>

                      <li><a href="#unnumbered-93">Regular expressions in
                      R</a></li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-16">1.16. 8. Probability</a>

                <ul>
                  <li><a href="#unnumbered-94">Names of distributions</a></li>

                  <li><a href="#unnumbered-95">Generate reproducible random
                  numbers</a></li>

                  <li><a href="#unnumbered-96">Generate a random
                  sample</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-17">1.17. 10. Graphics</a>

                <ul>
                  <li>
                    <a href="#unnumbered-97">Base graphics</a>

                    <ul>
                      <li><a href="#unnumbered-98">Make a plot</a></li>

                      <li><a href="#unnumbered-104">Add to an existing
                      plot</a></li>

                      <li><a href="#unnumbered-105">Changing graphical
                      parameters</a></li>
                    </ul>
                  </li>

                  <li>
                    <a href="#unnumbered-106">Lattice graphics</a>

                    <ul>
                      <li><a href="#unnumbered-107">Splom</a></li>

                      <li><a href="#unnumbered-108">Histogram</a></li>
                    </ul>
                  </li>

                  <li><a href="#unnumbered-109">ggplot2</a></li>

                  <li>
                    <a href="#unnumbered-110">Other graphics</a>

                    <ul>
                      <li><a href="#unnumbered-111">Pareto diagrams</a></li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                <a href="#sec-1-18">1.18. 11. Linear regression and ANOVA</a>

                <ul>
                  <li><a href="#unnumbered-112">Linear model</a></li>

                  <li><a href="#unnumbered-113">Regression tree models</a></li>

                  <li><a href="#unnumbered-114">Classification tree
                  models</a></li>
                </ul>
              </li>

              <li><a href="#sec-1-19">1.19. Debugging</a></li>

              <li><a href="#sec-1-20">1.20. Assert</a></li>

              <li>
                <a href="#sec-1-21">1.21. Contributing</a>

                <ul>
                  <li><a href="#unnumbered-115">Issues</a></li>

                  <li><a href="#unnumbered-116">Patches</a></li>

                  <li><a href="#unnumbered-117">Donations</a></li>
                </ul>
              </li>

              <li><a href="#sec-1-22">1.22. License</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <div id="outline-container-sec-1" class="outline-2">
      <h2 id="sec-1"><span class="section-number-2">1</span> R reference card
      <a href="http://opensource.org/licenses/GPL-3.0"><object type=
      "image/svg+xml" data="http://img.shields.io/:license-gpl-blue.svg">
        Sorry, your browser does not support SVG.
      </object></a> <a href=
      "https://www.paypal.com/cgi-bin/webscr?cmd=_donations&amp;business=VCVAS6KPDQ4JC&amp;lc=BE&amp;item_number=refcard-R&amp;currency_code=EUR&amp;bn=PP-DonationsBF:btn_donate_LG.gif:NonHosted">
      <img src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif"
      alt="btn_donate_LG.gif" /></a></h2>

      <div class="outline-text-2" id="text-1">
        <p>Welcome to R reference card. It contains the reference documentation
        that describes how to perform <b>data analysis</b> using R.</p>
      </div>

      <div id="outline-container-sec-1-1" class="outline-3">
        <h3 id="sec-1-1"><span class="section-number-3">1.1</span>
        Documentation</h3>

        <div class="outline-text-3" id="text-1-1">
          <ul class="org-ul">
            <li><a href=
            "http://cran.r-project.org/doc/contrib/Short-refcard.pdf">R
            Reference Card</a></li>

            <li><a href="http://www.rdocumentation.org/">Search the
            documentation of R packages and R functions</a></li>

            <li><a href="http://www.statmethods.net/">Quick-R</a> – An
            excellent quick reference</li>

            <li>Cookbook for R: <a href=
            "http://www.cookbook-r.com/">http://www.cookbook-r.com/</a></li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-1-2" class="outline-3">
        <h3 id="sec-1-2"><span class="section-number-3">1.2</span> Coding
        style</h3>

        <div class="outline-text-3" id="text-1-2">
          <ul class="org-ul">
            <li><a href=
            "http://cran.r-project.org/doc/manuals/R-ints.html#R-coding-standards">
            R Internals manual, section 8. “R Coding Standards”</a></li>

            <li><a href="http://adv-r.had.co.nz/Style.html">R coding style
            guide</a></li>

            <li><a href=
            "https://docs.google.com/document/d/1esDVxyWvH8AsX-VJa-8oqWaHLs4stGlIbk8kLc5VlII/edit?pli=1">
            R Coding Conventions</a></li>

            <li>
              <p><a href=
              "http://google-styleguide.googlecode.com/svn/trunk/Rguide.xml">Google
              R Style Guide</a></p>

              <p><code>variable.name</code> (preferred,
              <code>variableName</code> accepted)<br />
              <code>FunctionName</code><br />
              <code>kConstantName</code></p>

              <p>Place spaces around all binary operators (=, +, -, &lt;-,
              etc.).<br />
              Exception: Spaces around =’s are optional when passing parameters
              in a function call.</p>

              <p>Do not place a space before a comma, but always place one
              after a comma.</p>
            </li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-1-3" class="outline-3">
        <h3 id="sec-1-3"><span class="section-number-3">1.3</span> Emacs Speaks
        Statistics (ESS) key bindings</h3>

        <div class="outline-text-3" id="text-1-3">
          <p>Most of the shortcuts are actually mnemonic and hierarchical:</p>

          <ul class="org-ul">
            <li><code>C-c C-d</code> for <code>doc-map</code>,</li>

            <li><code>C-c C-e</code> for <code>extra-map</code>,</li>

            <li><code>C-c C-t</code> for <code>dev-map</code> which includes
            mostly [t]racebug.</li>
          </ul>
        </div>

        <div id="outline-container-unnumbered-1" class="outline-4">
          <h4 id="unnumbered-1">References</h4>

          <div class="outline-text-4" id="text-unnumbered-1">
            <p>See</p>

            <ul class="org-ul">
              <li><a href=
              "http://ess.r-project.org/refcard.pdf">http://ess.r-project.org/refcard.pdf</a></li>

              <li><a href=
              "http://www.damtp.cam.ac.uk/user/sje30/ess11/ess-slides.pdf">http://www.damtp.cam.ac.uk/user/sje30/ess11/ess-slides.pdf</a></li>
            </ul>
          </div>
        </div>

        <div id="outline-container-unnumbered-2" class="outline-4">
          <h4 id="unnumbered-2">Interacting with the ESS process</h4>

          <div class="outline-text-4" id="text-unnumbered-2"></div>

          <div id="outline-container-unnumbered-3" class="outline-5">
            <h5 id="unnumbered-3">Command History</h5>

            <div class="outline-text-5" id="text-unnumbered-3">
              <dl class="org-dl">
                <dt><code>M-r</code></dt>

                <dd>
                  <p>Search for a regular expression backward in the command
                  history (using Isearch).</p>

                  <p>This is worth a wealth…</p>
                </dd>
              </dl>
            </div>
          </div>

          <div id="outline-container-unnumbered-4" class="outline-5">
            <h5 id="unnumbered-4">Hot keys for common commands</h5>

            <div class="outline-text-5" id="text-unnumbered-4">
              <p>ESS handling of <b>multiple processes</b> is pretty
              unique.</p>

              <dl class="org-dl">
                <dt><code>C-c C-s</code></dt>

                <dd>ess-switch-process</dd>

                <dt><code>C-c C-q</code></dt>

                <dd>
                  <p>Issue a <code>q()</code> command to the inferior process,
                  and kill all the temporary buffers.</p>

                  <p>Press <code>C-c C-q</code> + <code>M-x R</code> to quickly
                  restart the R console (without restarting the editor).</p>
                </dd>
              </dl>
            </div>
          </div>

          <div id="outline-container-unnumbered-5" class="outline-5">
            <h5 id="unnumbered-5">Other commands provided by inferior-ESS</h5>

            <div class="outline-text-5" id="text-unnumbered-5">
              <dl class="org-dl">
                <dt><code>C-c C-z</code></dt>

                <dd><b>Switch to</b> the (most recent) <b>script
                buffer</b>.</dd>
              </dl>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-6" class="outline-4">
          <h4 id="unnumbered-6">Sending code to the iESS process</h4>

          <div class="outline-text-4" id="text-unnumbered-6">
            <p>Primary process interaction commands:</p>

            <dl class="org-dl">
              <dt><code>C-M-x</code></dt>

              <dd><b>Send</b> the current <b>region or function or
              paragraph</b> to the ESS process.</dd>

              <dt><code>C-c C-c</code></dt>

              <dd>
                <p><b>Send</b> the current <b>region or function or
                paragraph</b> (defined as continuous set of lines surrounded by
                a blank line at top and bottom) to the ESS process <b>and
                step</b> to the next line of code, skipping comments.</p>

                <p>If you group R statements into tasks, send the whole task to
                the R process without selecting anything.</p>
              </dd>

              <dt><code>C-RET</code></dt>

              <dd><b>Send</b> the current <b>region or line</b> to the ESS
              process <b>and step</b> to the next line of code.</dd>
            </dl>

            <p>Other evaluation commands:</p>

            <dl class="org-dl">
              <dt><code>C-c C-b</code></dt>

              <dd><b>Send</b> the current <b>buffer</b> to the ESS
              process.</dd>

              <dt><code>C-c C-r</code></dt>

              <dd><b>Send</b> the current <b>region</b> to the ESS
              process.</dd>

              <dt><code>C-c C-f</code></dt>

              <dd><b>Send</b> the current <b>function</b> to the ESS
              process.</dd>

              <dt><code>C-c C-p</code></dt>

              <dd><b>Send</b> the current <b>paragraph</b> to the ESS process
              <b>and step</b> to the next line of code.</dd>

              <dt><code>C-c C-n</code></dt>

              <dd><b>Send</b> the current <b>line</b> to the ESS process <b>and
              step</b> to the next line of code.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-7" class="outline-4">
          <h4 id="unnumbered-7">Manipulating saved transcript files</h4>

          <div class="outline-text-4" id="text-unnumbered-7">
            <dl class="org-dl">
              <dt><code>C-u C-u C-y</code></dt>

              <dd>
                <p><b>Paste cleaned commands</b> (from a region copied with
                <code>M-w</code>) into a new R buffer or at the prompt: remove
                all prompts and command output, leaving only the commands.</p>

                <p>This is handy if you paste code from iESS, mail buffers or
                PDF documents.</p>
              </dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-8" class="outline-4">
          <h4 id="unnumbered-8">Editing objects and functions</h4>

          <div class="outline-text-4" id="text-unnumbered-8"></div>

          <div id="outline-container-unnumbered-9" class="outline-5">
            <h5 id="unnumbered-9">Creating or modifying objects</h5>

            <div class="outline-text-5" id="text-unnumbered-9">
              <p>In-session function editing.</p>

              <dl class="org-dl">
                <dt><code>C-c C-e C-d</code></dt>

                <dd><b>Edit</b> the code of an <b>object</b> (such as the
                function <code>lm</code>). Emacs opens a buffer called
                <code>&lt;user-login-name&gt;.&lt;object&gt;.R</code>.</dd>
              </dl>

              <p><code>C-c C-e d</code> and <code>C-c C-e C-d</code> can open
              file versions of R functions. <code>C-c C-e l</code> sends same
              back.</p>

              <p>Other nice tools ( probably not available in other
              editors):</p>

              <dl class="org-dl">
                <dt><code>C-c C-e i</code></dt>

                <dd><code>ess-install-library</code></dd>

                <dt><code>C-c C-e l</code></dt>

                <dd><code>ess-load-library</code></dd>

                <dt><code>C-c C-e C-w</code></dt>

                <dd><code>ess-execute-screen-options</code></dd>
              </dl>
            </div>
          </div>

          <div id="outline-container-unnumbered-10" class="outline-5">
            <h5 id="unnumbered-10">Loading source files into the ESS
            process</h5>

            <div class="outline-text-5" id="text-unnumbered-10">
              <dl class="org-dl">
                <dt><code>C-c C-l</code></dt>

                <dd>
                  <p><b>(Re-)Load a file</b> into the ESS process using
                  <code>source()</code>.</p>

                  <p>This usually works better than <code>C-c C-c</code> for
                  reporting parsing errors <i>with a trace</i>.</p>
                </dd>
              </dl>
            </div>
          </div>

          <div id="outline-container-unnumbered-11" class="outline-5">
            <h5 id="unnumbered-11">Commands for motion, completion and
            more</h5>

            <div class="outline-text-5" id="text-unnumbered-11">
              <dl class="org-dl">
                <dt><code>C-c C-z</code></dt>

                <dd><b>Switch to</b> the associated <b>iESS process
                buffer</b>.</dd>
              </dl>
            </div>

            <ul class="org-ul">
              <li>
                <a id="unnumbered-12" name="unnumbered-12"></a>Tags
                Tables<br />

                <div class="outline-text-6" id="text-unnumbered-12">
                  <dl class="org-dl">
                    <dt><code>C-c C-e C-t</code></dt>

                    <dd>
                      <p>Build tag tables.</p>

                      <p>After building tags, use <code>M-.</code> to <b>jump
                      to</b> function and objects <b>definitions</b>.</p>
                    </dd>
                  </dl>

                  <p>Probably the most used command of mine is
                  imenu-anywhere.</p>

                  <p>(global-set-key (kbd “C-.”) ‘imenu-anywhere)</p>

                  <p>and you will be able to navigate to the definition of the
                  symbol at point as long as the other file is open. This is
                  like tag navigation but more convenient IMO. Both ido and
                  helm interfaces are available.</p>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <div id="outline-container-unnumbered-13" class="outline-4">
          <h4 id="unnumbered-13">Reading help files</h4>

          <div class="outline-text-4" id="text-unnumbered-13">
            <p>Help at your fingertips:</p>

            <dl class="org-dl">
              <dt><code>C-c C-d C-d</code> (or <code>C-c C-v</code>)</dt>

              <dd>
                <p>Display <b>R help</b> on an object (which has an help file)
                <b>in Emacs</b>, for example for the function call you’re
                currently writing.</p>

                <p>Same as typing <code>?&lt;object&gt;</code> in the iESS
                buffer.</p>

                <p>Then Press <code>l</code> to <b>run example</b> in R help
                page, <b>line by line</b>.</p>
              </dd>

              <dt><code>C-c C-d C-a</code></dt>

              <dd>Create an Apropos buffer with a linked list of apropos
              topics.</dd>

              <dt><code>C-c C-d i</code></dt>

              <dd>Display index of package.</dd>

              <dt><code>C-c C-d C-v</code></dt>

              <dd>Display vignettes.</dd>

              <dt><code>C-c C-d C-e</code></dt>

              <dd>
                <p><b>Describe object at point</b>.</p>

                <p>Repeat <code>C-e</code> to cycle through the list of
                commands:</p>

                <ul class="org-ul">
                  <li><code>str()</code>,</li>

                  <li><code>htsummary()</code>,</li>

                  <li><code>summary()</code>.</li>
                </ul>
              </dd>

              <dt><code>C-c C-d o</code></dt>

              <dd>Create an Demos buffer with a linked list of available
              demos.</dd>

              <dt><code>C-c C-d C-w</code></dt>

              <dd>Search the web for documentation.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-14" class="outline-4">
          <h4 id="unnumbered-14">Completion</h4>

          <div class="outline-text-4" id="text-unnumbered-14"></div>

          <div id="outline-container-unnumbered-15" class="outline-5">
            <h5 id="unnumbered-15">Integration with auto-complete package</h5>

            <div class="outline-text-5" id="text-unnumbered-15">
              <p>Auto-completion of objects and arguments: <a href=
              "http://www.emacswiki.org/emacs/ESSAuto-complete">http://www.emacswiki.org/emacs/ESSAuto-complete</a>.</p>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-16" class="outline-4">
          <h4 id="unnumbered-16">Developing with ESS</h4>

          <div class="outline-text-4" id="text-unnumbered-16"></div>

          <div id="outline-container-unnumbered-17" class="outline-5">
            <h5 id="unnumbered-17">ESS tracebug</h5>

            <div class="outline-text-5" id="text-unnumbered-17">
              <p>Tracebug highlighting of errors.</p>
            </div>

            <ul class="org-ul">
              <li>
                <a id="unnumbered-18" name=
                "unnumbered-18"></a>Breakpoints<br />

                <div class="outline-text-6" id="text-unnumbered-18">
                  <dl class="org-dl">
                    <dt><code>C-c C-t b</code></dt>

                    <dd>Set breakpoint (repeat to cycle through the breakpoint
                    types: <code>browser</code> and <code>recover</code>).</dd>

                    <dt><code>C-c C-t B</code></dt>

                    <dd>Set conditional breakpoint.</dd>

                    <dt><code>C-c C-t l</code></dt>

                    <dd>Set logger breakpoint.</dd>

                    <dt><code>C-c C-t o</code></dt>

                    <dd>Toggle the active/commented state of the
                    breakpoint.</dd>

                    <dt><code>C-c C-t k</code></dt>

                    <dd>Kill breakpoint.</dd>

                    <dt><code>C-c C-t K</code></dt>

                    <dd>Kill all breakpoints.</dd>

                    <dt><code>C-c C-t n</code></dt>

                    <dd>Go to next breakpoint.</dd>

                    <dt><code>C-c C-t p</code></dt>

                    <dd>Go to previous breakpoint.</dd>
                  </dl>

                  <p>(<code>C-</code> prefixed equivalents are also
                  defined)</p>
                </div>
              </li>

              <li>
                <a id="unnumbered-19" name="unnumbered-19"></a>Debugging<br />

                <div class="outline-text-6" id="text-unnumbered-19">
                  <dl class="org-dl">
                    <dt><code>C-c C-t `</code> (also on <code>C-c
                    `</code>)</dt>

                    <dd>Show Traceback buffer (display source locations).</dd>

                    <dt><code>C-c C-t ~</code> (also on <code>C-c
                    ~</code>)</dt>

                    <dd>Show call stack (display source locations).</dd>

                    <dt><code>C-c C-t e</code></dt>

                    <dd>
                      Toggle <b>on-error action</b> (repeat to cycle):

                      <ul class="org-ul">
                        <li><code>NONE</code> (“-” in the mode line)</li>

                        <li><code>RECOVER</code> (“r” in the mode line)</li>

                        <li><code>TRACEBACK</code> (“t” in the mode line)</li>
                      </ul>
                    </dd>

                    <dt><code>C-c C-t d</code></dt>

                    <dd>Flag for debugging.</dd>

                    <dt><code>C-c C-t u</code></dt>

                    <dd>Unflag for debugging.</dd>

                    <dt><code>C-c C-t w</code></dt>

                    <dd>Use <code>ess-watch</code> while debugging to see
                    variables change at each step, or even just at the
                    prompt.</dd>
                  </dl>

                  <p>(<code>C-</code> prefixed equivalents are also
                  defined)</p>
                </div>
              </li>

              <li>
                <a id="unnumbered-20" name="unnumbered-20"></a>Interactive
                debugging<br />

                <div class="outline-text-6" id="text-unnumbered-20">
                  <dl class="org-dl">
                    <dt><code>M-C</code></dt>

                    <dd>Continue</dd>

                    <dt><code>C-M-S-c</code></dt>

                    <dd>Continue multi</dd>

                    <dt><code>M-N</code></dt>

                    <dd>Next step</dd>

                    <dt><code>C-M-S-n</code></dt>

                    <dd>Next step multi</dd>

                    <dt><code>M-U</code></dt>

                    <dd>Up frame</dd>

                    <dt><code>M-Q</code></dt>

                    <dd>Quit debugging</dd>
                  </dl>
                </div>
              </li>

              <li>
                <a id="unnumbered-21" name="unnumbered-21"></a>Navigation to
                errors<br />

                <div class="outline-text-6" id="text-unnumbered-21">
                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-constant">source</span><span class=
"org-builtin">(</span>file<span class="org-constant">=</span><span class=
"org-string">"missing-file.R"</span><span class="org-builtin">)</span>
<span class="org-ess-function-call">list</span><span class=
"org-builtin">(</span>a<span class="org-constant">=</span><span class=
"org-ess-numbers">22</span>, b<span class="org-constant">=</span><span class=
"org-ess-numbers">343</span><span class="org-builtin">)</span>
^
protocol <span class="org-constant">&lt;-</span> <span class=
"org-type">NULL</span>
<span class="org-ess-function-call">paste</span><span class=
"org-builtin">(</span><span class="org-string">"{**"</span>, <span class=
"org-builtin">})</span>
<span class="org-keyword">stop</span><span class=
"org-builtin">(</span><span class="org-string">"Test error"</span><span class=
"org-builtin">)</span>
</pre>
                  </div>

                  <p>The arrow in the left fringe of the iESS buffer is an
                  indicator of the <b>beginning of the last evaluation</b>. It
                  helps you to quickly pinpoint the first error (often the most
                  relevant one) in the <code>*R*</code> buffer by searching for
                  this arrow.</p>

                  <p>Error navigation in the <code>*R*</code> buffer is limited
                  to the region between this arrow and the end of the
                  buffer.</p>

                  <dl class="org-dl">
                    <dt><code>M-g n</code> (<code>M-x next-error</code>)</dt>

                    <dd>Next error.</dd>

                    <dt><code>M-g p</code> (<code>M-x
                    previous-error</code>)</dt>

                    <dd>Previous error.</dd>
                  </dl>
                </div>
              </li>

              <li><a id="unnumbered-22" name="unnumbered-22"></a>Tracebug
              visual debugger<br /></li>
            </ul>
          </div>

          <div id="outline-container-unnumbered-23" class="outline-5">
            <h5 id="unnumbered-23">ESS developer</h5>

            <div class="outline-text-5" id="text-unnumbered-23">
              <dl class="org-dl">
                <dt><code>C-c C-t C-a</code></dt>

                <dd>Add a package to your development list.</dd>

                <dt><code>C-c C-t C-t</code></dt>

                <dd>Toggle developer mode on and off.</dd>

                <dt><code>C-c C-t l</code></dt>

                <dd>ess-developer-load-package (this one is in ESS dev as
                yet).</dd>
              </dl>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-24" class="outline-4">
          <h4 id="unnumbered-24">Other ESS features and tools</h4>

          <div class="outline-text-4" id="text-unnumbered-24"></div>

          <div id="outline-container-unnumbered-25" class="outline-5">
            <h5 id="unnumbered-25">ElDoc</h5>

            <div class="outline-text-5" id="text-unnumbered-25">
              <p><b>ElDoc</b> support: automatic display of function arguments
              in the <b>echo area</b>.</p>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-26" class="outline-4">
          <h4 id="unnumbered-26">Other Emacs features and tools</h4>

          <div class="outline-text-4" id="text-unnumbered-26">
            <p>I would add C-s and C-r to search in the help buffer and M-\ to
            indent</p>

            <p>Also the ability to mix in other, general purpose Emacs
            tools:</p>

            <p>paredit-mode to give me good shortcuts to navigate around and
            manipulate parentheses and braces,</p>

            <p>git-gutter-mode to keep tabs on lines I’ve changed in a
            file.</p>

            <p>M-/ to complete long words the second time I type them.</p>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-4" class="outline-3">
        <h3 id="sec-1-4"><span class="section-number-3">1.4</span> 0. Overview
        of R</h3>

        <div class="outline-text-3" id="text-1-4">
          <p>R system that you download from <a href=
          "http://cran.r-project.org/">CRAN</a>:</p>

          <ul class="org-ul">
            <li><code>base</code> package</li>

            <li>Familiar packages (<code>utils</code>, <code>datasets</code>,
            …)</li>

            <li>Recommended packages (<code>lattice</code>, …)</li>

            <li>4,000 other packages</li>
          </ul>

          <p><a href=
          "http://cran.r-project.org/doc/contrib/Short-refcard.pdf">R Reference
          Card</a></p>

          <p>Some <a href="http://cran.r-project.org/manuals.html">R
          manuals</a>:</p>

          <ul class="org-ul">
            <li><a href="http://cran.r-project.org/doc/manuals/R-intro.html">An
            introduction to R</a></li>

            <li><a href=
            "http://cran.r-project.org/doc/manuals/r-release/R-data.html">R
            data import/export</a></li>

            <li><a href=
            "http://cran.r-project.org/doc/manuals/R-exts.html">Writing R
            extensions</a></li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-1-5" class="outline-3">
        <h3 id="sec-1-5"><span class="section-number-3">1.5</span> 1. Getting
        started and getting help</h3>

        <div class="outline-text-3" id="text-1-5">
          <div class="org-src-container">
            <pre class="src src-R">
?<span class="org-keyword">function</span>
?dataset
package ? lattice
<span class="org-constant">library</span><span class=
"org-builtin">(</span>help<span class=
"org-constant">=</span>lattice<span class="org-builtin">)</span>
</pre>
          </div>

          <dl class="org-dl">
            <dt><code>args(function)</code></dt>

            <dd>Look at the arguments of a FUNCTION.</dd>
          </dl>

          <p>Other ways:</p>

          <ul class="org-ul">
            <li><a href="http://www.google.com/">Google</a></li>

            <li><a href="mailto:r-help@r-project.org">R general mailing
            list</a></li>

            <li><a href="http://stackoverflow.com/questions/tagged/r">Stack
            Overflow</a></li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-1-6" class="outline-3">
        <h3 id="sec-1-6"><span class="section-number-3">1.6</span> 2. Some
        basics</h3>

        <div class="outline-text-3" id="text-1-6"></div>

        <div id="outline-container-unnumbered-27" class="outline-4">
          <h4 id="unnumbered-27">Print something</h4>

          <div class="outline-text-4" id="text-unnumbered-27">
            <dl class="org-dl">
              <dt><code>print(object)</code></dt>

              <dd>Explicitly print out an object.</dd>

              <dt><code>cat()</code></dt>

              <dd>Concatenate together a set of strings and prints out the
              concatenated string (to a file or to the console).</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-28" class="outline-4">
          <h4 id="unnumbered-28">Setting variables</h4>

          <div class="outline-text-4" id="text-unnumbered-28">
            <dl class="org-dl">
              <dt><code>&lt;-</code></dt>

              <dd>Assign a value to a variable.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-29" class="outline-4">
          <h4 id="unnumbered-29">Listing variables</h4>

          <div class="outline-text-4" id="text-unnumbered-29">
            <dl class="org-dl">
              <dt><code>ls()</code>, <code>ls.str()</code></dt>

              <dd>Show objects in my workspace.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-30" class="outline-4">
          <h4 id="unnumbered-30">Deleting variables</h4>

          <div class="outline-text-4" id="text-unnumbered-30">
            <dl class="org-dl">
              <dt><code>rm()</code></dt>

              <dd>
                <p>Remove objects from your workspace.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">rm</span><span class=
"org-builtin">(</span>list<span class="org-constant">=</span><span class=
"org-ess-function-call">ls</span><span class=
"org-builtin">())</span>                      <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">remove everything from the workspace</span>
</pre>
                </div>
              </dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-31" class="outline-4">
          <h4 id="unnumbered-31">Computing basic statistics</h4>

          <div class="outline-text-4" id="text-unnumbered-31">
            <dl class="org-dl">
              <dt><code>mean()</code></dt>

              <dd>Take the mean.</dd>

              <dt><code>median()</code></dt>

              <dd>Take the median.</dd>

              <dt><code>cor()</code></dt>

              <dd>Correlation function.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-32" class="outline-4">
          <h4 id="unnumbered-32">Creating sequences</h4>

          <div class="outline-text-4" id="text-unnumbered-32">
            <dl class="org-dl">
              <dt><code>n:m</code></dt>

              <dd>Create an <b>sequence of</b> integers from <code>n</code> to
              <code>m</code> (<code>n</code> &lt; <code>m</code> or
              <code>n</code> &gt; <code>m</code>).</dd>

              <dt><code>seq(from, to, len)</code></dt>

              <dd>Create a <b>sequence of</b> <code>len</code> equally spaced
              fractional numbers.</dd>

              <dt><code>rep(x, times)</code></dt>

              <dd>Create a series of repeated values.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-33" class="outline-4">
          <h4 id="unnumbered-33">Operators</h4>

          <div class="outline-text-4" id="text-unnumbered-33">
            <dl class="org-dl">
              <dt><code>==</code></dt>

              <dd>Compare.</dd>

              <dt><code>%in%</code></dt>

              <dd>Test membership.</dd>
            </dl>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-7" class="outline-3">
        <h3 id="sec-1-7"><span class="section-number-3">1.7</span> 3.
        Navigating the software</h3>

        <div class="outline-text-3" id="text-1-7">
          <dl class="org-dl">
            <dt><code>library(package)</code></dt>

            <dd>
              <p>Load PACKAGE.</p>

              <div class="org-src-container">
                <pre class="src src-R">
<span class="org-constant">library</span><span class=
"org-builtin">(</span>datasets<span class="org-builtin">)</span>
airquality
</pre>
              </div>
            </dd>

            <dt><code>data(dataset)</code></dt>

            <dd>Load DATASET.</dd>

            <dt><code>source("file.R")</code></dt>

            <dd>Evaluate R code file.</dd>
          </dl>
        </div>

        <div id="outline-container-unnumbered-34" class="outline-4">
          <h4 id="unnumbered-34">Running a batch script</h4>

          <div class="outline-text-4" id="text-unnumbered-34">
            <p>You may write a script containing R code:</p>

            <div class="org-src-container">
              <pre class="src src-sh">
<span class="org-comment-delimiter">#</span><span class=
"org-comment">!/usr/bin/</span><span class="org-keyword">env</span><span class=
"org-comment"> Rscript</span>

argv &lt;- commandArgs(TRUE)
x &lt;- as.numeric(argv[1])

<span class="org-comment-delimiter"># </span><span class=
"org-comment">etc.</span>

<span class="org-function-name">png</span>(<span class=
"org-string">"graph.png"</span>, 500, 500)
<span class="org-function-name">plot</span>(graph)
<span class="org-function-name">graphics.off</span>()
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-8" class="outline-3">
        <h3 id="sec-1-8"><span class="section-number-3">1.8</span> 5. Data
        structures</h3>

        <div class="outline-text-3" id="text-1-8">
          <p>What is data?</p>

          <dl class="org-dl">
            <dt>Population</dt>

            <dd>Set of items.</dd>

            <dt>Variable</dt>

            <dd>
              Measurement or characteristic.

              <dl class="org-dl">
                <dt>Qualitative</dt>

                <dd>Can be defined by a label and have discrete values.</dd>

                <dt>Quantitative</dt>

                <dd>Measured on a numerical scale.</dd>
              </dl>
            </dd>
          </dl>
        </div>

        <div id="outline-container-unnumbered-35" class="outline-4">
          <h4 id="unnumbered-35">Basic (“atomic”) vector types</h4>

          <div class="outline-text-4" id="text-unnumbered-35">
            <table border="2" cellspacing="0" cellpadding="6" rules="groups"
            frame="hsides">
              <colgroup>
                <col class="left" />
                <col class="left" />
              </colgroup>

              <thead>
                <tr>
                  <th scope="col" class="left">Class</th>

                  <th scope="col" class="left">Example</th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td class="left"><code>logical</code></td>

                  <td class="left"><code>TRUE</code> / <code>FALSE</code></td>
                </tr>

                <tr>
                  <td class="left"><code>integer</code></td>

                  <td class="left"><code>1L</code> (with explicit
                  <code>L</code> suffix)</td>
                </tr>

                <tr>
                  <td class="left"><code>numeric</code></td>

                  <td class="left"><code>0.5</code> or <code>1</code>
                  (<i>real</i> numbers)</td>
                </tr>

                <tr>
                  <td class="left"><code>complex</code></td>

                  <td class="left"><code>1+0i</code></td>
                </tr>

                <tr>
                  <td class="left"><code>character</code></td>

                  <td class="left">“hello” (= lowest class)</td>
                </tr>
              </tbody>
            </table>

            <dl class="org-dl">
              <dt><code>class()</code></dt>

              <dd>
                <p>Show the class of the object.</p>

                <div class="note">
                  <p>Note that an object can belong to more than one class.</p>
                </div>
              </dd>

              <dt><code>unclass(vector)</code></dt>

              <dd>Strip out the class (see factors).</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-36" class="outline-4">
          <h4 id="unnumbered-36">Vectors</h4>

          <div class="outline-text-4" id="text-unnumbered-36">
            <p><b>Vectors</b> are sets of <b>elements of the same
            class</b>.</p>

            <p>When objects of different classes are mixed in a vector,
            <i>coercion</i> occurs behind the scene so that every element is of
            the same class (the “lowest common denominator” class).</p>

            <dl class="org-dl">
              <dt><code>c()</code></dt>

              <dd>Create a vector of objects (that is, <b>concatenate</b> or
              combine things together).</dd>

              <dt><code>vector(class, length)</code></dt>

              <dd>Create an empty vector.</dd>

              <dt><code>names()</code></dt>

              <dd>
                <p>Show or give a name to each <b>element</b> of a vector.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">names</span><span class=
"org-builtin">(</span>df<span class="org-builtin">)</span> <span class=
"org-constant">&lt;-</span> <span class=
"org-ess-function-call">tolower</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">names</span><span class=
"org-builtin">(</span>df<span class="org-builtin">))</span>
</pre>
                </div>
              </dd>

              <dt><code>length()</code></dt>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-37" class="outline-4">
          <h4 id="unnumbered-37">Matrices</h4>

          <div class="outline-text-4" id="text-unnumbered-37">
            <p>Matrices are <b>vectors with 2 dimensions</b> attached to them
            (see <code>dimension</code> attribute).</p>

            <p>They are constructed <i>column-wise</i> (vector inserted by
            column).</p>

            <p>They can be created from vectors by adding a dimension
            attribute:</p>

            <div class="org-src-container">
              <pre class="src src-R">
v <span class="org-constant">&lt;-</span> <span class=
"org-ess-numbers">1</span>:<span class="org-ess-numbers">10</span>
<span class="org-ess-function-call">dim</span><span class=
"org-builtin">(</span>v<span class="org-builtin">)</span> <span class=
"org-constant">&lt;-</span> <span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-ess-numbers">2</span>, <span class="org-ess-numbers">5</span><span class=
"org-builtin">)</span>
<span class="org-ess-function-call">print</span><span class=
"org-builtin">(</span>v<span class="org-builtin">)</span>
</pre>
            </div>

            <table border="2" cellspacing="0" cellpadding="6" rules="groups"
            frame="hsides">
              <colgroup>
                <col class="right" />
                <col class="right" />
                <col class="right" />
                <col class="right" />
                <col class="right" />
              </colgroup>

              <tbody>
                <tr>
                  <td class="right">1</td>

                  <td class="right">3</td>

                  <td class="right">5</td>

                  <td class="right">7</td>

                  <td class="right">9</td>
                </tr>

                <tr>
                  <td class="right">2</td>

                  <td class="right">4</td>

                  <td class="right">6</td>

                  <td class="right">8</td>

                  <td class="right">10</td>
                </tr>
              </tbody>
            </table>

            <p>They can be created by <i>column-binding</i> or
            <i>row-binding</i>.</p>

            <dl class="org-dl">
              <dt><code>matrix(nrow=x, ncol=y)</code></dt>

              <dd>Create an empty matrix.</dd>

              <dt><code>cbind()</code></dt>

              <dd>Column-bind (if the row order matches; otherwise, use
              <code>merge</code>).</dd>

              <dt><code>rbind()</code></dt>

              <dd>Row-bind.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-38" class="outline-4">
          <h4 id="unnumbered-38">Arrays</h4>

          <div class="outline-text-4" id="text-unnumbered-38">
            <p>Arrays are <b>n-dimensional matrices</b>.</p>

            <dl class="org-dl">
              <dt><code>array()</code></dt>

              <dd>Create an array.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-39" class="outline-4">
          <h4 id="unnumbered-39">Lists</h4>

          <div class="outline-text-4" id="text-unnumbered-39">
            <p><b>Lists</b> are vectors of objects of possibly different
            classes.</p>

            <p>The indexes of the elements of a list have double brackets
            around them.</p>

            <dl class="org-dl">
              <dt><code>list()</code></dt>

              <dd>Construct a list.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-40" class="outline-4">
          <h4 id="unnumbered-40">Factors</h4>

          <div class="outline-text-4" id="text-unnumbered-40">
            <p><b>Factors</b> are <i>qualitative</i> variables used to
            represent <i>categorical</i> data, to store self-describing codes
            for <i>labels</i> (such as “male” and “female”, or “low”, “medium”
            and “high”).</p>

            <p>Unordered or ordered.</p>

            <dl class="org-dl">
              <dt><code>factor(character vector)</code></dt>

              <dd>Create a factor variable (with levels by alphabetical
              order).</dd>

              <dt><code>levels(x)</code></dt>

              <dd>Return the value of the levels.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-41" class="outline-4">
          <h4 id="unnumbered-41">Data frames</h4>

          <div class="outline-text-4" id="text-unnumbered-41">
            <p><b>Data frames</b> are used to store tabular data where each
            column can be of a different class: special type of <b>list (of
            columns)</b> where every element has the same length.</p>

            <ul class="org-ul">
              <li>Row = observation, column = variable</li>

              <li>Special attribute <code>row.names</code> (every row has a
              name, or defaults to a sequence of integers)</li>

              <li>Most often created by calling <code>read.table()</code> or
              <code>read.csv()</code></li>

              <li id="&lt;code&gt;data.frame()&lt;/code&gt;">
                <p>Create a data frame.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
df <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">data.frame</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">cbind</span><span class=
"org-builtin">(</span>v1, v2<span class="org-builtin">))</span>    <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">create a dataframe of two vectors</span>
</pre>
                </div>
              </li>

              <li id="&lt;code&gt;data.matrix()&lt;/code&gt;">Convert a data
              frame to a <i>numeric</i> matrix (forced <b>coercion</b>!).</li>

              <li id="&lt;code&gt;names()&lt;/code&gt;">Tell the names of each
              <b>column</b> included in the data frame.</li>
            </ul>
          </div>
        </div>

        <div id="outline-container-unnumbered-42" class="outline-4">
          <h4 id="unnumbered-42">Vectorized operations (recycling rule)</h4>

          <div class="outline-text-4" id="text-unnumbered-42">
            <p>Avoid writing loops (code is a lot simpler):</p>

            <div class="org-src-container">
              <pre class="src src-R">
x <span class=
"org-constant">+</span> y                                   <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">element-wise addition</span>
</pre>
            </div>

            <p>Similar for the matrices:</p>

            <div class="org-src-container">
              <pre class="src src-R">
x * y                                   <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">element-wise multiplication</span>
x <span class="org-constant">%</span>*<span class=
"org-constant">%</span> y                                 <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">true matrix multiplication</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-43" class="outline-4">
          <h4 id="unnumbered-43">Selecting list elements or data frame columns
          by position (subsetting)</h4>

          <div class="outline-text-4" id="text-unnumbered-43">
            <dl class="org-dl">
              <dt><code>[</code></dt>

              <dd>
                <p>Return an <b>object</b> of the <b>same class as the
                original</b>: a list of elements (or a data frame built from
                multiple columns). The data type is <b>preserved</b>.</p>

                <p>Extract multiple elements of a list:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
x<span class="org-builtin">[</span><span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-ess-numbers">1</span>, <span class="org-ess-numbers">3</span><span class=
"org-builtin">)]</span>
</pre>
                </div>

                <p>Remove the first column:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
df<span class="org-builtin">[</span>, <span class=
"org-constant">-</span><span class="org-ess-numbers">1</span><span class=
"org-builtin">]</span>
</pre>
                </div>
              </dd>

              <dt><code>[[</code></dt>

              <dd>
                <p>Extract a <b>single element of a list</b> (or a single
                column of a data frame) <b>by index</b>.</p>

                <p>Can be used with <i>computed</i> indices.</p>

                <p>Can extract nested elements of a list:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
x<span class="org-builtin">[[</span><span class=
"org-ess-numbers">1</span><span class="org-builtin">]][[</span><span class=
"org-ess-numbers">3</span><span class=
"org-builtin">]]</span>                        <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">same as: x[[c(1, 3)]]</span>
                                   <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">third element of the first element</span>
</pre>
                </div>

                <p>Partial matching allowed at the command-line:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
x<span class="org-builtin">[[</span><span class=
"org-string">"a"</span>, exact<span class="org-constant">=</span><span class=
"org-type">FALSE</span><span class=
"org-builtin">]]</span>              <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">instead of: x[["aardvark"]]</span>
</pre>
                </div>
              </dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-44" class="outline-4">
          <h4 id="unnumbered-44">Selecting list elements or data frame columns
          by name (subsetting)</h4>

          <div class="outline-text-4" id="text-unnumbered-44">
            <dl class="org-dl">
              <dt><code>$</code></dt>

              <dd>
                <p>Extract a <b>single element of a list</b> (or a single
                column of a data frame) <b>by name</b>: you don’t have to
                remember where the element is in the list.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
x$bar                              <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">same as x[["bar"]]</span>
</pre>
                </div>

                <p>Can only be used with literal names.</p>

                <p>Partial matching allowed at the command-line:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
x$a                                <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">instead of: x$aardvark</span>
</pre>
                </div>
              </dd>
            </dl>

            <div class="note">
              <p>The only (typical data) class that uses <code>$</code> as a
              accessor is <b>list</b> (from which <b>dataframes</b> inherit).
              Hence, you can’t use <code>$</code> notation with
              <b>matrices</b>. You need to use <code>x["ratio"]</code> or
              <code>x[["ratio"]]</code>.</p>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-45" class="outline-4">
          <h4 id="unnumbered-45">Selecting data frame columns by position
          (subsetting)</h4>

          <div class="outline-text-4" id="text-unnumbered-45">
            <p>Matrices can be subsetted with <code>(row, col)</code> type
            indices.</p>

            <p>Indices can also be missing:</p>

            <dl class="org-dl">
              <dt><code>x[i, ]</code></dt>

              <dd>Row i.</dd>

              <dt><code>x[, j]</code></dt>

              <dd>Column j.</dd>
            </dl>

            <p>By default,</p>

            <ul class="org-ul">
              <li>a single element is retrieved as a vector of length 1 rather
              than a 1x1 matrix.</li>

              <li>a single column or a single row is retrieved as a vector, not
              as a matrix.</li>
            </ul>

            <p>This can be turned off by setting <code>drop=FALSE</code> (don’t
            drop the dimension).</p>
          </div>
        </div>

        <div id="outline-container-unnumbered-46" class="outline-4">
          <h4 id="unnumbered-46">Flatten a list into a vector</h4>

          <div class="outline-text-4" id="text-unnumbered-46">
            <dl class="org-dl">
              <dt><code>unlist</code></dt>

              <dd>Flatten the <b>list into</b> a <b>vector</b> (for functions
              which work on vectors but not on lists.)</dd>
            </dl>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-9" class="outline-3">
        <h3 id="sec-1-9"><span class="section-number-3">1.9</span> Control
        structures</h3>

        <div class="outline-text-3" id="text-1-9">
          <p>Control structures mentioned here are primarily useful for writing
          programs. For command-line interactive work, the <code>*apply</code>
          functions are more useful.</p>
        </div>

        <div id="outline-container-unnumbered-47" class="outline-4">
          <h4 id="unnumbered-47">Conditional statements</h4>

          <div class="outline-text-4" id="text-unnumbered-47">
            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-keyword">if</span> <span class=
"org-builtin">(</span>condition<span class="org-builtin">)</span> <span class=
"org-builtin">{</span>
  <span class="org-comment-delimiter">## </span><span class=
"org-comment">do something</span>
<span class="org-builtin">}</span> <span class=
"org-keyword">else</span> <span class="org-builtin">{</span>
  <span class="org-comment-delimiter">## </span><span class=
"org-comment">do something else</span>
<span class="org-builtin">}</span>
</pre>
            </div>

            <p>Here, the entire <code>if/else</code> construct is all about
            assigning a value to <code>y</code>:</p>

            <div class="org-src-container">
              <pre class="src src-R">
y <span class="org-constant">&lt;-</span> <span class=
"org-keyword">if</span><span class="org-builtin">(</span>x <span class=
"org-constant">&gt;</span> <span class="org-ess-numbers">3</span><span class=
"org-builtin">)</span> <span class=
"org-builtin">{</span>                        <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">x must be a scalar here, not a vector</span>
  <span class="org-ess-numbers">10</span>
<span class="org-builtin">}</span> <span class=
"org-keyword">else</span> <span class="org-builtin">{</span>
  <span class="org-ess-numbers">0</span>
<span class="org-builtin">}</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-48" class="outline-4">
          <h4 id="unnumbered-48">Loops</h4>

          <div class="outline-text-4" id="text-unnumbered-48">
            <p>Loop over the <b>elements</b>:</p>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-keyword">for</span> <span class=
"org-builtin">(</span>x <span class="org-keyword">in</span> xs<span class=
"org-builtin">)</span> <span class=
"org-builtin">{</span>                         <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">take elements from the vector</span>
  <span class="org-comment-delimiter">## </span><span class=
"org-comment">do something</span>
<span class="org-builtin">}</span>
</pre>
            </div>

            <p>Loop over the <b>numeric indices</b>:</p>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-keyword">for</span> <span class=
"org-builtin">(</span>i <span class="org-keyword">in</span> <span class=
"org-ess-function-call">seq_along</span><span class=
"org-builtin">(</span>xs<span class="org-builtin">))</span> <span class=
"org-builtin">{</span>              <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">successive values from a sequence or</span>
  <span class="org-comment-delimiter">## </span><span class=
"org-comment">do something                       # vector</span>
<span class="org-builtin">}</span>
</pre>
            </div>

            <dl class="org-dl">
              <dt><code>seq_along(vector)</code></dt>

              <dd>Create an integer sequence that’s equal to the <b>length of
              the input vector</b>.</dd>

              <dt><code>seq_len(integer)</code></dt>

              <dd>Create an integer sequence that’s as long as the integer in
              input.</dd>

              <dt><code>nrow(dataset)</code></dt>

              <dd>Tell the number of rows.</dd>

              <dt><code>ncol(dataset)</code></dt>

              <dd>Tell the number of columns.</dd>
            </dl>

            <p>Loop over the <b>names</b>:</p>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-keyword">for</span> <span class=
"org-builtin">(</span>nm <span class="org-keyword">in</span> <span class=
"org-ess-function-call">names</span><span class=
"org-builtin">(</span>xs<span class="org-builtin">))</span> <span class=
"org-builtin">{</span>
  <span class="org-comment-delimiter">## </span><span class=
"org-comment">do something</span>
<span class="org-builtin">}</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-keyword">while</span> <span class=
"org-builtin">(</span>z <span class="org-constant">&gt;=</span> <span class=
"org-ess-numbers">3</span> &amp;&amp; z <span class=
"org-constant">&lt;=</span> <span class="org-ess-numbers">10</span><span class=
"org-builtin">)</span> <span class=
"org-builtin">{</span>             <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">conditions are always evaluated from</span>
                                        <span class=
"org-comment-delimiter"># </span><span class="org-comment">left to right</span>
  <span class="org-comment-delimiter">## </span><span class=
"org-comment">do something</span>
<span class="org-builtin">}</span>
</pre>
            </div>

            <p>Initiate an infinite loop:</p>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-keyword">repeat</span> <span class="org-builtin">{</span>
  <span class="org-comment-delimiter">## </span><span class=
"org-comment">do something</span>
  <span class="org-keyword">if</span><span class=
"org-builtin">(</span><span class=
"org-constant">&lt;</span>condition<span class=
"org-constant">&gt;</span><span class="org-builtin">)</span> <span class=
"org-builtin">{</span>
    <span class=
"org-keyword">break</span>                               <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">only way to exit a repeat loop</span>
  <span class="org-builtin">}</span>
<span class="org-builtin">}</span>
</pre>
            </div>

            <dl class="org-dl">
              <dt><code>break</code></dt>

              <dd>Break the iteration of a loop.</dd>

              <dt><code>next</code></dt>

              <dd>Skip an iteration of a loop.</dd>

              <dt><code>return</code></dt>

              <dd>Exit an entire function and return a given value.</dd>
            </dl>

            <p>Better to use a <code>for</code> loop with an hard limit on the
            number of iterations that it’s allowed to run.</p>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-10" class="outline-3">
        <h3 id="sec-1-10"><span class="section-number-3">1.10</span> Writing
        functions</h3>

        <div class="outline-text-3" id="text-1-10">
          <ul class="org-ul">
            <li>
              <p>Functions are R objects of class <code>function</code></p>

              <div class="org-src-container">
                <pre class="src src-R">
<span class="org-function-name">MyFunction</span> <span class=
"org-constant">&lt;-</span> <span class=
"org-keyword">function</span><span class=
"org-builtin">(</span>arguments<span class="org-builtin">)</span> <span class=
"org-builtin">{</span>
  <span class="org-comment-delimiter"># </span><span class=
"org-comment">Function documentation.</span>
  <span class="org-comment-delimiter">## </span><span class=
"org-comment">do something</span>
<span class="org-builtin">}</span>
</pre>
              </div>
            </li>

            <li>Functions can be <b>passed as arguments to other
            functions</b></li>

            <li>Functions can be nested, so that you can define a function
            inside of another function (implications: see <b>lexical
            scoping</b>)</li>

            <li>You can omit <code>return</code> if you want to return the
            <b>last value</b> produced in function.</li>

            <li>3 types of…

              <ul class="org-ul">
                <li>formal argument</li>

                <li>local variable</li>

                <li>free variable</li>
              </ul>
            </li>

            <li>
              <p>R <b>pass arguments by copy</b>, not by reference.</p>

              <div class="note">
                <p>To add a column in the data frame within a function, return
                new values either by
                <code>return(data_frame_I_work_with)</code> or
                <code>return(column_I_made)</code>.</p>
              </div>
            </li>
          </ul>
        </div>

        <div id="outline-container-unnumbered-49" class="outline-4">
          <h4 id="unnumbered-49">Arguments</h4>

          <div class="outline-text-4" id="text-unnumbered-49">
            <ul class="org-ul">
              <li><i>Named arguments</i> can potentially have <i>default
              values</i> (useful: not every function call makes use of all the
              formal arguments; some can be <i>missing</i>)</li>

              <li>The <i>formal arguments</i> are the arguments included in the
              function definition</li>

              <li><code>formals()</code> returns a list of all the formal
              arguments of a function</li>

              <li>Arguments can be matched <b>positionally</b> or <b>by
              name</b>

                <ul class="org-ul">
                  <li>When an argument is matched by name, it is “taken out” of
                  the argument list and the remaining unnamed arguments are
                  matched in the order that they are listed in the function
                  definition</li>
                </ul>
              </li>

              <li>Named arguments help when:

                <ul class="org-ul">
                  <li>you want to use the defaults for everything except for an
                  argument near the end of the list</li>

                  <li>you can’t remember the position of the argument</li>
                </ul>
              </li>

              <li>Function arguments can also be partially <i>matched</i>

                <ol class="org-ol">
                  <li>Check for an exact match</li>

                  <li>Check for a partial match</li>

                  <li>Check for a positional match</li>
                </ol>
              </li>

              <li>When defining a function, you can also set an argument value
              to <code>NULL</code> (there is <b>no value</b> there)</li>

              <li>Arguments to functions are evaluated <i>lazily</i> (only when
              needed to be evaluated</li>

              <li>The <code>...</code> argument indicates a variable number of
              arguments

                <ul class="org-ul">
                  <li>Used when extending a function and you don’t want to copy
                  the entire argument list of the original function</li>

                  <li>Used by generic functions (such as <code>mean</code>) so
                  that extra arguments can be passed to methods</li>

                  <li>Used when the number of arguments cannot be known in
                  advance (see <code>paste</code> function)</li>

                  <li>Any argument that appears <i>after</i> the
                  <code>...</code> must be named explicitly and cannot be
                  partially matched</li>
                </ul>
              </li>
            </ul>
          </div>
        </div>

        <div id="outline-container-unnumbered-50" class="outline-4">
          <h4 id="unnumbered-50">Scoping rules for R</h4>

          <div class="outline-text-4" id="text-unnumbered-50">
            <ul class="org-ul">
              <li>R searches through the <i>search list</i> (a series of <code>
                environments</code>, an environment being a collection of
                symbol/value pairs) to bind the appropriate value to a symbol:

                <ul class="org-ul">
                  <li>Search the global environment <code>.GlobalEnv</code>
                  (always the first)</li>

                  <li>
                    <p>Search the namespaces of each of the packages on the
                    search list</p>

                    <div class="org-src-container">
                      <pre class="src src-R">
<span class="org-ess-function-call">search</span><span class=
"org-builtin">()</span>                            <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">find the search list</span>
</pre>
                    </div>
                  </li>

                  <li>Search the <code>base</code> package (always the last
                  element)</li>
                </ul>
              </li>

              <li>Last loaded package gets put in position 2 of the search list
              and everything else gets shifted</li>

              <li>Separate namespaces for functions and non-function
              objects</li>

              <li>R uses <b>lexical</b> (or <i>static</i>) <b>scoping</b>
              (instead of <i>dynamic scoping</i>): <i>the value of free
              variables are searched for in the environment in which the
              function</i> <i>was</i> <b>defined</b> (until the empty
              environment, after the <code>base</code> package)

                <ul class="org-ul">
                  <li>With <b>dynamic</b> scoping, the value of free variables
                  is looked up in the environment from which the function was
                  <b>called</b> (<i>calling environment</i> = <i>parent
                  frame</i>) – see slide 24 of “Scoping Rules for R” for a
                  comparative example</li>

                  <li>Other languages that support lexical scoping: Scheme,
                  Perl, Python, Common Lisp</li>

                  <li>Consequences: all objects must be stored in memory, and
                  all functions must carry a <b>pointer to their respective
                  defining environment</b></li>
                </ul>
              </li>

              <li>Every environment has one parent environment (next thing down
              on the search list); it is possible for an environment to have
              mulitple “children”</li>

              <li>A function + an environment = a (<i>function</i>)
              <i>closure</i></li>

              <li>
                <p>In R (unlike C), you can have functions defined <i>inside
                other functions</i> – in this case, the environment in which a
                function is defined is the body of another function!</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-function-name">make.power</span> <span class=
"org-constant">&lt;-</span> <span class=
"org-keyword">function</span><span class="org-builtin">(</span>n<span class=
"org-builtin">)</span> <span class=
"org-builtin">{</span>           <span class="org-comment-delimiter"># </span><span class="org-comment">"constructor" function</span>
  <span class="org-function-name">pow</span> <span class=
"org-constant">&lt;-</span> <span class=
"org-keyword">function</span><span class="org-builtin">(</span>x<span class=
"org-builtin">)</span> <span class="org-builtin">{</span>
    x^n                               <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">n is a free variable (not defined</span>
                                      <span class=
"org-comment-delimiter"># </span><span class="org-comment">inside pow)</span>
  <span class="org-builtin">}</span>
  pow                                 <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">return function as return value</span>
<span class="org-builtin">}</span>
</pre>
                </div>

                <p>This function returns another function as its value</p>

                <div class="org-src-container">
                  <pre class="src src-R">
cube <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">make.power</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">3</span><span class=
"org-builtin">)</span>
square <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">make.power</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">2</span><span class=
"org-builtin">)</span>
</pre>
                </div>
              </li>

              <li>Functions:

                <dl class="org-dl">
                  <dt><code>environment(f)</code></dt>

                  <dt><code>parent.env(environment)</code></dt>

                  <dd>Next thing down on the search list</dd>

                  <dt><code>ls(environment)</code></dt>

                  <dd>List all the variables in the environment</dd>

                  <dt><code>get(object, environment)</code></dt>

                  <dd>Get the value of an object inside an environment</dd>
                </dl>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-11" class="outline-3">
        <h3 id="sec-1-11"><span class="section-number-3">1.11</span> 4. Data
        Input and output</h3>

        <div class="outline-text-3" id="text-1-11">
          <p>Types of files:</p>

          <ul class="org-ul">
            <li>Tab-delimited</li>

            <li>CSV</li>

            <li>Excel</li>

            <li>JSON</li>

            <li>HTML/XML</li>

            <li>Database</li>
          </ul>
        </div>

        <div id="outline-container-unnumbered-51" class="outline-4">
          <h4 id="unnumbered-51">Getting the current working directory</h4>

          <div class="outline-text-4" id="text-unnumbered-51">
            <dl class="org-dl">
              <dt><code>getwd()</code></dt>

              <dd>Figure out what your <b>working directory</b> is.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-52" class="outline-4">
          <h4 id="unnumbered-52">Creating, opening and closing connections</h4>

          <div class="outline-text-4" id="text-unnumbered-52">
            <dl class="org-dl">
              <dt><code>file()</code></dt>

              <dd>
                <ul class="org-ul">
                  <li><code>description</code> is the name of the file</li>

                  <li><code>open</code> is a code (read-only, write,
                  append)</li>
                </ul>

                <div class="org-src-container">
                  <pre class="src src-R">
con <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">file</span><span class=
"org-builtin">(</span><span class=
"org-string">"./data/cameras.csv"</span>, <span class=
"org-string">"r"</span><span class="org-builtin">)</span>
cameraData <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">read.csv</span><span class=
"org-builtin">(</span>con<span class="org-builtin">)</span>
<span class="org-ess-function-call">close</span><span class=
"org-builtin">(</span>con<span class="org-builtin">)</span>
</pre>
                </div>
              </dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-53" class="outline-4">
          <h4 id="unnumbered-53">Make your data available</h4>

          <div class="outline-text-4" id="text-unnumbered-53">
            <p>Data can be imported directly into R with the
            <code>textConnection</code> function:</p>

            <div class="org-src-container">
              <pre class="src src-R">
con <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">textConnection</span><span class=
"org-builtin">(</span><span class="org-string">"</span>
<span class="org-string">index   email</span>
<span class="org-string">A       abc@example.com</span>
<span class="org-string">B       def@example.com</span>
<span class="org-string">C       def@example.com</span>
<span class="org-string">D       ghi@example.com</span>
<span class="org-string">E       abc@example.com</span>
<span class="org-string">F       def@example.com"</span><span class=
"org-builtin">)</span>
df <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">read.table</span><span class=
"org-builtin">(</span>con, header <span class=
"org-constant">=</span> <span class="org-type">TRUE</span><span class=
"org-builtin">)</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-54" class="outline-4">
          <h4 id="unnumbered-54">Reading tabular data files</h4>

          <div class="outline-text-4" id="text-unnumbered-54">
            <dl class="org-dl">
              <dt><code>read.table(file)</code></dt>

              <dd>
                <p>Read tabular data file, create data frame.</p>

                <p>Important arguments:</p>

                <ul class="org-ul">
                  <li><code>file</code></li>

                  <li><code>header</code></li>

                  <li><code>sep</code> (defaults to the <b>space</b>)</li>

                  <li><code>quote</code></li>

                  <li><code>colClasses</code> (class of each column, also used
                  to <b>skip columns</b>)</li>

                  <li><code>nrows</code></li>

                  <li><code>skip</code> (number of lines to skip from the
                  beginning)</li>

                  <li><code>comment.char</code></li>

                  <li><code>stringsAsFactors</code> (defaults to
                  <code>TRUE</code>)</li>

                  <li><code>text</code> to <b>feed your data text
                  representation</b> directly to <code>read.table</code></li>
                </ul>

                <div class="org-src-container">
                  <pre class="src src-R">
data <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">read.table</span><span class=
"org-builtin">(</span><span class=
"org-string">"./data/file.txt"</span>, header<span class=
"org-constant">=</span><span class="org-type">T</span>, sep<span class=
"org-constant">=</span><span class="org-string">"\t"</span>, quote<span class=
"org-constant">=</span><span class="org-string">""</span><span class=
"org-builtin">)</span>
</pre>
                </div>
              </dd>
            </dl>

            <p>For <b>large datasets</b>:</p>

            <ul class="org-ul">
              <li>Set <code>comment.char</code> = "" if there are no comments
              in your file.</li>

              <li>
                <p>Use the <code>colClasses</code> argument.</p>

                <p>Quick and dirty way to figure out the classes of each column
                (if there aren’t any classes that you want to change from their
                defaults): read in the first rows, <i>determine the classes
                from that</i>, and then import the rest of the file.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
tabSample <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">read.table</span><span class=
"org-builtin">(</span><span class=
"org-string">"datatable.txt"</span>, nrows<span class=
"org-constant">=</span><span class="org-ess-numbers">100</span><span class=
"org-builtin">)</span>
classes <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">sapply</span><span class=
"org-builtin">(</span>tabSample, class<span class="org-builtin">)</span>
tabAll <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">read.table</span><span class=
"org-builtin">(</span><span class=
"org-string">"datatanble.txt"</span>, colClasses<span class=
"org-constant">=</span>classes<span class="org-builtin">)</span>
                                      <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">save time on importing data</span>
</pre>
                </div>
              </li>

              <li>Set <code>nrows</code> helps with memory usage.</li>
            </ul>

            <p>R equivalent of Linux <code>cut</code> (to read only certain
            columns from a file):</p>

            <div class="org-src-container">
              <pre class="src src-R">
whichCols <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">rep</span><span class=
"org-builtin">(</span><span class="org-string">"NULL"</span>, <span class=
"org-ess-numbers">28</span><span class=
"org-builtin">)</span>            <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">assuming 28 colums</span>
whichCols<span class="org-builtin">[</span><span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-ess-numbers">1</span>, <span class=
"org-ess-numbers">5</span>, <span class="org-ess-numbers">28</span><span class=
"org-builtin">)]</span> <span class="org-constant">&lt;-</span> <span class=
"org-type">NA</span>
df <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">read.table</span><span class=
"org-builtin">(</span>file, colClasses<span class=
"org-constant">=</span>whichCols<span class="org-builtin">)</span>
</pre>
            </div>

            <p>To call some shell script to do the column extraction and then
            using <code>read.table</code> on its output:</p>

            <div class="org-src-container">
              <pre class="src src-R">
df <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">read.table</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">pipe</span><span class=
"org-builtin">(</span><span class=
"org-string">"cut -f1,5,28 myFile.txt"</span><span class=
"org-builtin">))</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-55" class="outline-4">
          <h4 id="unnumbered-55">Writing tabular data files</h4>

          <div class="outline-text-4" id="text-unnumbered-55">
            <dl class="org-dl">
              <dt><code>write.table()</code></dt>

              <dd>Write data.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-56" class="outline-4">
          <h4 id="unnumbered-56">Reading from CSV files</h4>

          <div class="outline-text-4" id="text-unnumbered-56">
            <dl class="org-dl">
              <dt><code>read.csv(file)</code></dt>

              <dd>
                <p>Read data from CSV file, create data frame.</p>

                <ul class="org-ul">
                  <li><code>header</code> (defaults to <code>TRUE</code>)</li>

                  <li><code>separator</code> (defaults to <b>comma</b>)</li>

                  <li><code>na.strings</code> (“NULL”, defaults to “NA”)</li>
                </ul>

                <div class="org-src-container">
                  <pre class="src src-R">
data <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">read.csv</span><span class=
"org-builtin">(</span><span class=
"org-string">"./data/file.csv"</span><span class="org-builtin">)</span>

<span class="org-ess-function-call">read.csv</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">file.choose</span><span class=
"org-builtin">())</span>            <span class=
"org-comment-delimiter"># </span><span class="org-comment">pick a file</span>
</pre>
                </div>

                <p>It calls <code>read.table</code> with some default values.
                To look at them, just look at the code of <code>read.csv</code>
                by typing <code>read.csv</code> and hitting &lt;enter&gt; at
                your R command line).</p>
              </dd>

              <dt><code>read.csv2(file)</code></dt>

              <dd>
                Read data from CSV file, create data frame.

                <ul class="org-ul">
                  <li><code>header</code> (defaults to <code>TRUE</code>)</li>

                  <li><code>separator</code> (defaults to <code>;</code>)</li>
                </ul>
              </dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-57" class="outline-4">
          <h4 id="unnumbered-57">Reading from Excel files</h4>

          <div class="outline-text-4" id="text-unnumbered-57">
            <dl class="org-dl">
              <dt><code>read.xlsx()</code>, <code>read.xlsx2()</code></dt>

              <dd>Read Excel files.</dd>
            </dl>

            <p>You can also read from Excel spreadsheets using RODBC and
            <code>sqlQuery</code>.</p>
          </div>
        </div>

        <div id="outline-container-unnumbered-58" class="outline-4">
          <h4 id="unnumbered-58">Reading from Google spreadsheets</h4>

          <div class="outline-text-4" id="text-unnumbered-58">
            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-constant">require</span><span class=
"org-builtin">(</span>RCurl<span class="org-builtin">)</span>
myCsv <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">getURL</span><span class=
"org-builtin">(</span><span class=
"org-string">"https://docs.google.com/spreadsheet/pub?...&amp;output=csv"</span><span class="org-builtin">)</span>
<span class="org-ess-function-call">read.csv</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">textConnection</span><span class=
"org-builtin">(</span>myCsv<span class="org-builtin">))</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-59" class="outline-4">
          <h4 id="unnumbered-59">Reading files from the Internet</h4>

          <div class="outline-text-4" id="text-unnumbered-59">
            <dl class="org-dl">
              <dt><code>download.file()</code></dt>

              <dd>
                <p>Download a file from the Internet.</p>

                <p>Be sure to record when you downloaded it.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
fileUrl <span class="org-constant">&lt;-</span> <span class=
"org-string">"http://..."</span>
<span class="org-ess-function-call">download.file</span><span class=
"org-builtin">(</span>fileUrl, destfile<span class=
"org-constant">=</span><span class=
"org-string">"./data/file.csv"</span>, method<span class=
"org-constant">=</span><span class="org-string">"curl"</span><span class=
"org-builtin">)</span>
</pre>
                </div>
              </dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-60" class="outline-4">
          <h4 id="unnumbered-60">Reading files with a complex structure</h4>

          <div class="outline-text-4" id="text-unnumbered-60">
            <dl class="org-dl">
              <dt><code>readLines()</code></dt>

              <dd>
                <p>Read lines of text from a connection.</p>

                <p><i>Connections</i> can be made to:</p>

                <ul class="org-ul">
                  <li><code>file</code> (most common)</li>

                  <li><code>gzfile</code>, file compressed with
                  <code>gzip</code></li>

                  <li><code>bzfile</code>, file compressed with
                  <code>bzip2</code></li>

                  <li><code>url</code></li>
                </ul>

                <p><b>Remember to close connections</b>.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
con <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">url</span><span class=
"org-builtin">(</span><span class="org-string">"http://scholar.google.com/citations"</span><span class="org-builtin">)</span>
htmlCode <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">readLines</span><span class=
"org-builtin">(</span>con<span class="org-builtin">)</span>
<span class="org-ess-function-call">close</span><span class=
"org-builtin">(</span>con<span class="org-builtin">)</span>

<span class="org-comment-delimiter"># </span><span class=
"org-comment">get data off webpages</span>
html3 <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">htmlTreeParse</span><span class=
"org-builtin">(</span><span class="org-string">"..."</span><span class=
"org-builtin">)</span>

<span class="org-comment-delimiter"># </span><span class=
"org-comment">find value of title tag</span>
<span class="org-ess-function-call">xpathSApply</span><span class=
"org-builtin">(</span>html3, <span class=
"org-string">"//title"</span>, xmlValue<span class="org-builtin">)</span>

<span class="org-comment-delimiter"># </span><span class=
"org-comment">access parts of the table</span>
<span class="org-ess-function-call">xpathSApply</span><span class=
"org-builtin">(</span>html3, <span class=
"org-string">"//td[@id='col-citedby']"</span>, xmlValue<span class=
"org-builtin">)</span>
</pre>
                </div>
              </dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-61" class="outline-4">
          <h4 id="unnumbered-61">Reading from SQL Server databases</h4>

          <div class="outline-text-4" id="text-unnumbered-61">
            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-comment-delimiter">## </span><span class=
"org-comment">install.packages("RODBC")</span>
<span class="org-constant">library</span><span class=
"org-builtin">(</span>RODBC<span class="org-builtin">)</span>

<span class="org-comment-delimiter">## </span><span class=
"org-comment">channel &lt;- odbcConnect("DSN", uid="username", pwd="password")</span>
<span class="org-comment-delimiter">## </span><span class=
"org-comment">channel &lt;- odbcDriverConnect("DSN=DSN;UID=username;PWD=password")</span>

<span class="org-comment-delimiter">## </span><span class=
"org-comment">channel &lt;- odbcDriverConnect("driver={SQL Server};server=hostname;database=dbname;trusted_connection=true")</span>
channel <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">odbcDriverConnect</span><span class=
"org-builtin">(</span><span class=
"org-string">"driver={SQL Server};server=hostname;database=dbname;uid=username;pwd=password"</span><span class="org-builtin">)</span>

<span class="org-comment-delimiter"># </span><span class=
"org-comment">Check that connection is working.</span>
<span class="org-keyword">if</span> <span class=
"org-builtin">(</span>channel <span class="org-constant">==</span> <span class=
"org-constant">-</span><span class="org-ess-numbers">1L</span><span class=
"org-builtin">)</span> <span class="org-builtin">{</span>
  <span class="org-keyword">stop</span><span class=
"org-builtin">(</span><span class=
"org-string">"Error establishing an ODBC connection."</span><span class=
"org-builtin">)</span>
<span class="org-builtin">}</span> <span class="org-keyword">else</span>
  <span class="org-ess-function-call">odbcGetInfo</span><span class=
"org-builtin">(</span>channel<span class="org-builtin">)</span>

sql <span class="org-constant">&lt;-</span>
 <span class="org-string">"SELECT *</span>
<span class="org-string">  FROM table"</span>
sql <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">gsub</span><span class=
"org-builtin">(</span><span class="org-string">"\n"</span>, <span class=
"org-string">" "</span>, sql<span class=
"org-builtin">)</span>             <span class=
"org-comment-delimiter"># </span><span class="org-comment">optional</span>

df <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">sqlQuery</span><span class=
"org-builtin">(</span>channel, sql<span class="org-builtin">)</span>

<span class="org-keyword">if</span> <span class=
"org-builtin">(</span><span class=
"org-ess-function-call">is.character</span><span class=
"org-builtin">(</span>df<span class="org-builtin">))</span> <span class=
"org-builtin">{</span>                 <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">SQL error (no data frame returned)</span>
  <span class="org-keyword">stop</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">paste</span><span class=
"org-builtin">(</span>df, collapse<span class=
"org-constant">=</span><span class="org-string">"\n"</span><span class=
"org-builtin">))</span>
<span class="org-builtin">}</span> <span class=
"org-keyword">else</span> <span class="org-keyword">if</span> <span class=
"org-builtin">(</span><span class=
"org-ess-function-call">nrow</span><span class=
"org-builtin">(</span>df<span class="org-builtin">)</span> <span class=
"org-constant">==</span> <span class="org-ess-numbers">0</span><span class=
"org-builtin">)</span> <span class="org-builtin">{</span>
  <span class="org-ess-function-call">cat</span><span class=
"org-builtin">(</span><span class="org-string">"No data\n"</span><span class=
"org-builtin">)</span>
<span class="org-builtin">}</span> <span class="org-keyword">else</span>
  <span class="org-ess-function-call">print</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">head</span><span class=
"org-builtin">(</span>df<span class="org-builtin">))</span>

<span class="org-ess-function-call">odbcClose</span><span class=
"org-builtin">(</span>channel<span class="org-builtin">)</span>
</pre>
            </div>

            <div class="tip">
              <ul class="org-ul">
                <li>Check the class of each column with <code>lapply(df,
                class)</code>!</li>

                <li>Display the factor columns with <code>df[sapply(df,
                is.factor)]</code>!</li>
              </ul>
            </div>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-keyword">if</span> <span class=
"org-builtin">(</span>transaction<span class=
"org-builtin">)</span> <span class="org-ess-function-call">sqlQuery</span><span class="org-builtin">(</span>channel, <span class="org-string">'START TRANSACTION'</span><span class="org-builtin">)</span>

<span class="org-keyword">if</span> <span class=
"org-builtin">(</span>success &amp; transaction<span class=
"org-builtin">)</span> <span class="org-builtin">{</span>
  <span class="org-ess-function-call">sqlQuery</span><span class=
"org-builtin">(</span>channel, <span class=
"org-string">'COMMIT'</span><span class="org-builtin">)</span>
<span class="org-builtin">}</span> <span class=
"org-keyword">else</span> <span class="org-keyword">if</span> <span class=
"org-builtin">(</span>transaction<span class="org-builtin">){</span>
  <span class="org-ess-function-call">sqlQuery</span><span class=
"org-builtin">(</span>channel, <span class=
"org-string">'ROLLBACK'</span><span class="org-builtin">)</span>
<span class="org-builtin">}</span>
</pre>
            </div>

            <p>There is a convergence movement to the DBI package.</p>

            <p><a href="https://github.com/agstudy/rsqlserver">rsqlserver</a>
            is part of it, but it is less mature than RODBC (though it’s still
            high quality).</p>
          </div>
        </div>

        <div id="outline-container-unnumbered-62" class="outline-4">
          <h4 id="unnumbered-62">Saving and transporting objects</h4>

          <div class="outline-text-4" id="text-unnumbered-62">
            <p>Textual formats (potentially recoverable in case of
            corruption).</p>

            <dl class="org-dl">
              <dt><code>dput()</code></dt>

              <dd>Deparse a single R object.</dd>

              <dt><code>dump()</code></dt>

              <dd>Can be used on multiple R objects.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-63" class="outline-4">
          <h4 id="unnumbered-63">Further resources</h4>

          <div class="outline-text-4" id="text-unnumbered-63">
            <p>Packages:</p>

            <dl class="org-dl">
              <dt><code>httr</code></dt>

              <dd>For working with HTTP connections.</dd>

              <dt><code>RMySQL</code></dt>

              <dd>For interfacing with mySQL.</dd>

              <dt><code>bigmemory</code></dt>

              <dd>For handling data larger than RAM.</dd>

              <dt><code>foreign</code></dt>

              <dd>For getting data into R from SAS, SPSS, Octave, etc.</dd>
            </dl>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-12" class="outline-3">
        <h3 id="sec-1-12"><span class="section-number-3">1.12</span> 12. Useful
        tricks</h3>

        <div class="outline-text-3" id="text-1-12"></div>

        <div id="outline-container-unnumbered-64" class="outline-4">
          <h4 id="unnumbered-64">Peeking at your data</h4>

          <div class="outline-text-4" id="text-unnumbered-64">
            <dl class="org-dl">
              <dt><code>head()</code></dt>

              <dd>Look at the first 6 rows.</dd>

              <dt><code>tail()</code></dt>

              <dd>Look at the last 6 rows.</dd>

              <dt><code>str()</code></dt>

              <dd>
                <p><i>Compactly</i> display the internal <b>structure</b>
                (<b>classes</b>, etc.) of an object.</p>

                <p>Alternative to <code>summary()</code>.</p>

                <p>When applied to functions, show the <b>arguments</b>.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">str</span><span class=
"org-builtin">(</span>.Platform<span class=
"org-builtin">)</span>                     <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">what is the operating system</span>
</pre>
                </div>
              </dd>

              <dt><code>attributes()</code></dt>

              <dd>Access (set or modify) the (list of) attributes of an
              object.</dd>
            </dl>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-13" class="outline-3">
        <h3 id="sec-1-13"><span class="section-number-3">1.13</span> 9. General
        statistics</h3>

        <div class="outline-text-3" id="text-1-13"></div>

        <div id="outline-container-unnumbered-65" class="outline-4">
          <h4 id="unnumbered-65">Summarizing your data</h4>

          <div class="outline-text-4" id="text-unnumbered-65">
            <dl class="org-dl">
              <dt><code>range()</code></dt>

              <dd>
                <p>Give the <b>min</b> and the <b>max</b> (vector 2 elements)
                of the observations (vector of numbers).</p>

                <p>Useful to give the <b>extremes of a range to the
                <code>xlim</code> and <code>ylim</code> arguments</b> of an
                axis.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
yrange <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">range</span><span class=
"org-builtin">(</span><span class="org-ess-function-call">c</span><span class=
"org-builtin">(</span>x1, x2, x3<span class="org-builtin">))</span>
</pre>
                </div>
              </dd>

              <dt><code>summary()</code></dt>

              <dd>
                <p>Produce a summary of the object.</p>

                <p>Display the <b>number of NA values</b> in each column.</p>
              </dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-66" class="outline-4">
          <h4 id="unnumbered-66">Tabulating factors</h4>

          <div class="outline-text-4" id="text-unnumbered-66">
            <dl class="org-dl">
              <dt><a id="table" name="table"></a> <code>table(f)</code></dt>

              <dd>
                <p><b>Count</b> the number of observations in each <i>level</i>
                (only works on <i>factors</i>). Give a <b>frequency</b> of how
                many levels there are (sorted by level).</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">unique</span><span class=
"org-builtin">(</span>df$f<span class="org-builtin">)</span>
<span class="org-ess-function-call">length</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">unique</span><span class=
"org-builtin">(</span>df$f<span class=
"org-builtin">))</span>               <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">how many unique values</span>

<span class="org-ess-function-call">table</span><span class=
"org-builtin">(</span>df$f, useNA<span class=
"org-constant">=</span><span class="org-string">"ifany"</span><span class=
"org-builtin">)</span>         <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">number of times each unique value</span>
                                   <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">appears (show missing values as well)</span>
</pre>
                </div>

                <p>Sort by decreasing count:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">sort</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">table</span><span class=
"org-builtin">(</span>df$f, useNA<span class=
"org-constant">=</span><span class="org-string">"ifany"</span><span class=
"org-builtin">)</span>, decreasing<span class=
"org-constant">=</span><span class="org-type">TRUE</span><span class=
"org-builtin">)</span>
</pre>
                </div>

                <p>Convert it into a data frame if you’re more comfortable
                working with that:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">as.data.frame</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">table</span><span class=
"org-builtin">(</span>df$f, useNA<span class=
"org-constant">=</span><span class="org-string">"ifany"</span><span class=
"org-builtin">))</span>
</pre>
                </div>

                <p>Relative frequencies:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
tbl <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">table</span><span class=
"org-builtin">(</span>df$f, useNA<span class=
"org-constant">=</span><span class="org-string">"ifany"</span><span class=
"org-builtin">)</span>
tbl <span class="org-constant">/</span> <span class=
"org-ess-function-call">sum</span><span class=
"org-builtin">(</span>tbl<span class="org-builtin">)</span>
</pre>
                </div>

                <p>Use the <code>cut</code> function to calculate tables with
                <i>numeric</i> values.</p>

                <div class="org-src-container">
                  <pre class="src src-R">
f <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">cut</span><span class=
"org-builtin">(</span>df$x, breaks<span class=
"org-constant">=</span><span class="org-ess-numbers">30</span><span class=
"org-builtin">)</span>          <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">use `labels' to give nice names</span>
<span class="org-ess-function-call">table</span><span class=
"org-builtin">(</span>f, useNA<span class="org-constant">=</span><span class=
"org-string">"ifany"</span><span class="org-builtin">)</span>
</pre>
                </div>

                <p>Draw a useful graphical summary (to describe
                proportions):</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">pie</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">table</span><span class=
"org-builtin">(</span>df$x<span class="org-builtin">))</span>
<span class="org-ess-function-call">pie</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">sort</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">table</span><span class=
"org-builtin">(</span>df$x<span class=
"org-builtin">)))</span>             <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">bigger and bigger</span>
</pre>
                </div>
              </dd>

              <dt><code>table(f1, f2)</code></dt>

              <dd>
                <p>Produce a <i>contingency table</i> (cross-tabulation).</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">table</span><span class=
"org-builtin">(</span>df$f1, df$f2<span class=
"org-builtin">)</span>                <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">look at the relationship between f1</span>
                                   <span class=
"org-comment-delimiter"># </span><span class="org-comment">and f2</span>
</pre>
                </div>
              </dd>

              <dt><code>ftable(f)</code></dt>

              <dd>3-dimensional contingency table.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-67" class="outline-4">
          <h4 id="unnumbered-67">Testing categorical variables for
          independence</h4>

          <div class="outline-text-4" id="text-unnumbered-67">
            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-ess-function-call">summary</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">table</span><span class=
"org-builtin">(</span>f1, f2<span class="org-builtin">))</span>
</pre>
            </div>

            <p>Conventionally, a <i>p</i>-value of less than 0.05 indicates
            that the variables are likely not independent (there is some
            connection between the variables).</p>
          </div>
        </div>

        <div id="outline-container-unnumbered-68" class="outline-4">
          <h4 id="unnumbered-68">Calculating quantiles (and quartiles) of a
          dataset</h4>

          <div class="outline-text-4" id="text-unnumbered-68">
            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-ess-function-call">quantile</span><span class=
"org-builtin">(</span>vec, na.rm<span class="org-constant">=</span><span class=
"org-type">TRUE</span><span class="org-builtin">)</span>
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-14" class="outline-3">
        <h3 id="sec-1-14"><span class="section-number-3">1.14</span> 6. Data
        transformations</h3>

        <div class="outline-text-3" id="text-1-14">
          <p>(Partial list of) munging operations (= key process)</p>

          <ul class="org-ul">
            <li><b>These steps must be recorded</b> in their own R script</li>

            <li><b>90% of your effort will often be spent here</b></li>
          </ul>

          <p>Processed (<b>tidy</b>) data:</p>

          <ul class="org-ul">
            <li>Each variable forms a column.</li>

            <li>Each observation forms a row.</li>

            <li>Each table / file stores data about one kind of
            observation.</li>
          </ul>
        </div>

        <div id="outline-container-unnumbered-69" class="outline-4">
          <h4 id="unnumbered-69">Fixing variable names</h4>

          <div class="outline-text-4" id="text-unnumbered-69">
            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-ess-function-call">tolower</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">names</span><span class=
"org-builtin">(</span>df<span class="org-builtin">))</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-R">
splitNames <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">strsplit</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">names</span><span class=
"org-builtin">(</span>df<span class="org-builtin">)</span>, <span class=
"org-string">"\\."</span><span class="org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">split at period in names</span>
<span class="org-function-name">firstElement</span> <span class=
"org-constant">&lt;-</span> <span class=
"org-keyword">function</span><span class="org-builtin">(</span>x<span class=
"org-builtin">)</span> x<span class="org-builtin">[</span><span class=
"org-ess-numbers">1</span><span class=
"org-builtin">]</span>        <span class="org-comment-delimiter"># </span><span class="org-comment">select the 1st component of the vector</span>
<span class="org-ess-function-call">sapply</span><span class=
"org-builtin">(</span>splitNames, firstElement<span class=
"org-builtin">)</span>        <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">remove everything after the trailing</span>
                                        <span class=
"org-comment-delimiter"># </span><span class="org-comment">dot</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-ess-function-call">gsub</span><span class=
"org-builtin">(</span><span class="org-string">"_"</span>, <span class=
"org-string">""</span>, <span class=
"org-ess-function-call">names</span><span class=
"org-builtin">(</span>df<span class="org-builtin">))</span>
</pre>
            </div>

            <p>Rename one named column:</p>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-ess-function-call">colnames</span><span class=
"org-builtin">(</span>df<span class="org-builtin">)[</span><span class=
"org-ess-function-call">colnames</span><span class=
"org-builtin">(</span>df<span class="org-builtin">)</span> <span class=
"org-constant">==</span> <span class="org-string">"old"</span><span class=
"org-builtin">]</span> <span class="org-constant">&lt;-</span> <span class=
"org-string">"new"</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-70" class="outline-4">
          <h4 id="unnumbered-70">Creating new variables</h4>

          <div class="outline-text-4" id="text-unnumbered-70">
            <div class="org-src-container">
              <pre class="src src-R">
df$ranges <span class=
"org-constant">&lt;-</span> ranges                     <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">add a variable to the data frame</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-71" class="outline-4">
          <h4 id="unnumbered-71">Change the class of many columns from factor
          to character (or numeric)</h4>

          <div class="outline-text-4" id="text-unnumbered-71">
            <div class="org-src-container">
              <pre class="src src-R">
unfactor.cols <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-string">"V1"</span>, <span class="org-string">"V2"</span><span class=
"org-builtin">)</span>
d<span class="org-builtin">[</span>, unfactor.cols<span class=
"org-builtin">]</span> <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">lapply</span><span class=
"org-builtin">(</span>unfactor.cols,
                           <span class=
"org-keyword">function</span><span class="org-builtin">(</span>x<span class=
"org-builtin">)</span> <span class=
"org-ess-function-call">as.character</span><span class=
"org-builtin">(</span>d<span class="org-builtin">[</span>, x<span class=
"org-builtin">]))</span>
</pre>
            </div>

            <p>Add <code>as.numeric</code> to convert them to numeric (may
            induce <code>NA</code>).</p>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-comment-delimiter">## </span><span class=
"org-comment">Convert all factors from a data frame to character</span>
<span class="org-function-name">unfactor</span> <span class=
"org-constant">&lt;-</span> <span class=
"org-keyword">function</span> <span class="org-builtin">(</span>df<span class=
"org-builtin">)</span> <span class="org-builtin">{</span>
  cols <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">sapply</span><span class=
"org-builtin">(</span>df, is.factor<span class=
"org-builtin">)</span>         <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">find the factors</span>
  df<span class="org-builtin">[</span>cols<span class=
"org-builtin">]</span> <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">lapply</span><span class=
"org-builtin">(</span>df<span class="org-builtin">[</span>cols<span class=
"org-builtin">]</span>, as.character<span class=
"org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class="org-comment">convert to character</span>
  df
<span class="org-builtin">}</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-72" class="outline-4">
          <h4 id="unnumbered-72">Removing list elements using a condition</h4>

          <div class="outline-text-4" id="text-unnumbered-72">
            <p><b>Subsetting</b> by using 2 types of index:</p>

            <ul class="org-ul">
              <li>a numeric vector (<code>x[2]</code>,
              <code>x[1:4]</code>)</li>

              <li>a <b>logical vector</b> (<code>x[x &gt; "a"]</code>)</li>
            </ul>

            <p>Create a logical vector:</p>

            <div class="org-src-container">
              <pre class="src src-R">
u <span class="org-constant">&lt;-</span> x <span class=
"org-constant">&gt;</span> <span class="org-string">"a"</span>
x<span class="org-builtin">[</span>u<span class=
"org-builtin">]</span>                                    <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">get all elements which are greater</span>
                                        <span class=
"org-comment-delimiter"># </span><span class="org-comment">than "a"</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-73" class="outline-4">
          <h4 id="unnumbered-73">Selecting rows and columns more easily</h4>

          <div class="outline-text-4" id="text-unnumbered-73">
            <p>Subset on V1 and/or V2 &gt; 0.</p>

            <div class="org-src-container">
              <pre class="src src-R">
df<span class="org-builtin">[</span>df$V1 <span class=
"org-constant">&gt;</span> <span class=
"org-ess-numbers">0</span> &amp; df$V2 <span class=
"org-constant">&gt;</span> <span class="org-ess-numbers">0</span>, <span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-string">"V1"</span>, <span class="org-string">"V2"</span><span class=
"org-builtin">)]</span>
df<span class="org-builtin">[</span>df$V1 <span class=
"org-constant">&gt;</span> <span class=
"org-ess-numbers">0</span> | df$V2 <span class=
"org-constant">&gt;</span> <span class="org-ess-numbers">0</span>, <span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-string">"V1"</span>, <span class="org-string">"V2"</span><span class=
"org-builtin">)]</span>
</pre>
            </div>

            <p>Using the <code>subset</code> function.</p>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-ess-function-call">subset</span><span class=
"org-builtin">(</span>df, select<span class="org-constant">=</span><span class=
"org-ess-function-call">c</span><span class=
"org-builtin">(</span>V1, V2<span class=
"org-builtin">)</span>, subset<span class="org-constant">=</span><span class=
"org-builtin">(</span>V1 <span class="org-constant">&gt;</span> <span class=
"org-ess-numbers">0</span> &amp; V2 <span class=
"org-constant">&gt;</span> <span class="org-ess-numbers">0</span><span class=
"org-builtin">))</span>
<span class="org-ess-function-call">subset</span><span class=
"org-builtin">(</span>df, select<span class="org-constant">=</span><span class=
"org-ess-function-call">c</span><span class=
"org-builtin">(</span>V1, V2<span class=
"org-builtin">)</span>, subset<span class="org-constant">=</span><span class=
"org-builtin">(</span>V1 <span class="org-constant">&gt;</span> <span class=
"org-ess-numbers">0</span> | V2 <span class=
"org-constant">&gt;</span> <span class="org-ess-numbers">0</span><span class=
"org-builtin">))</span>
</pre>
            </div>

            <p>Note that you <b>do <i>not</i> quote the column names</b> in the
            <code>subset</code> argument (and you <i>must</i> omit them in the
            <code>select</code> argument <i>if</i> the vector is negated).</p>

            <div class="warning">
              <p>This is a convenience function intended <b>for interactive
              use</b>. For programming, it is better to use the standard
              subsetting functions like <code>[</code>. In particular, the
              non-standard evaluation of argument <code>subset</code> can have
              unanticipated consequences.</p>
            </div>

            <p>Use the <code>%in%</code> operator to compare a variable to a
            list of desired values.</p>
          </div>
        </div>

        <div id="outline-container-unnumbered-74" class="outline-4">
          <h4 id="unnumbered-74">Removing NA from a list</h4>

          <div class="outline-text-4" id="text-unnumbered-74">
            <p>Remove missing values (<code>NA</code>) from a <b>list</b>:</p>

            <div class="org-src-container">
              <pre class="src src-R">
missing <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">is.na</span><span class=
"org-builtin">(</span>x<span class=
"org-builtin">)</span>                     <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">logical vector</span>
y <span class="org-constant">&lt;-</span> x<span class=
"org-builtin">[</span>!missing<span class="org-builtin">]</span>
<span class="org-ess-function-call">sum</span><span class=
"org-builtin">(</span>y<span class=
"org-builtin">)</span>                                  <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">= sum(x, na.rm=TRUE)</span>
</pre>
            </div>

            <div class="note">
              <p>The function <code>sum</code> (like many other math functions
              in R) takes an argument <code>na.rm</code>. If you set
              <code>na.rm=TRUE</code>, R removes all NA values before doing the
              calculation.</p>
            </div>

            <p>The analogue of <code>is.na</code> for <b>data frames</b> is
            <code>complete.cases</code>.</p>
          </div>
        </div>

        <div id="outline-container-unnumbered-75" class="outline-4">
          <h4 id="unnumbered-75">Removing rows that contain NAs from a data
          frame</h4>

          <div class="outline-text-4" id="text-unnumbered-75">
            <p>Remove rows that contain any NA values:</p>

            <div class="org-src-container">
              <pre class="src src-R">
df <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">na.omit</span><span class=
"org-builtin">(</span>df<span class="org-builtin">)</span>
</pre>
            </div>

            <p>List all the rows of a data frame with <b>missing
            values</b>:</p>

            <div class="org-src-container">
              <pre class="src src-R">
nonmissing <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">complete.cases</span><span class=
"org-builtin">(</span>df<span class="org-builtin">)</span>
df<span class="org-builtin">[</span>!nonmissing, <span class=
"org-builtin">]</span>
</pre>
            </div>

            <p>Take the subset of all objects (<code>dfx</code> and
            <code>dfy</code>) that has no missing values:</p>

            <div class="org-src-container">
              <pre class="src src-R">
bothnonmissing <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">complete.cases</span><span class=
"org-builtin">(</span>dfx, dfy<span class="org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">logical vector</span>
dfx<span class="org-builtin">[</span>bothnonmissing, <span class=
"org-builtin">]</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-76" class="outline-4">
          <h4 id="unnumbered-76">Removing columns that contain NAs from a data
          frame</h4>

          <div class="outline-text-4" id="text-unnumbered-76">
            <p>Get rid of any column that has one or more NAs.</p>

            <div class="org-src-container">
              <pre class="src src-R">
df <span class="org-constant">&lt;-</span> df<span class=
"org-builtin">[</span>, <span class=
"org-ess-function-call">colSums</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">is.na</span><span class=
"org-builtin">(</span>df<span class="org-builtin">))</span> <span class=
"org-constant">==</span> <span class="org-ess-numbers">0</span><span class=
"org-builtin">]</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-77" class="outline-4">
          <h4 id="unnumbered-77">Removing columns by name</h4>

          <div class="outline-text-4" id="text-unnumbered-77">
            <p>To <b>drop columns by name</b> in a data frame, you can use
            direct indexing (with booleans vectors) and then, simply reassign
            data:</p>

            <div class="org-src-container">
              <pre class="src src-R">
tokeep <span class="org-constant">&lt;-</span> !<span class=
"org-ess-function-call">names</span><span class=
"org-builtin">(</span>df<span class="org-builtin">)</span> <span class=
"org-constant">%</span><span class="org-keyword">in</span><span class=
"org-constant">%</span> <span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-string">"remove1"</span>, <span class=
"org-string">"remove2"</span><span class="org-builtin">)</span>
df <span class="org-constant">&lt;-</span> df<span class=
"org-builtin">[</span>, tokeep<span class=
"org-builtin">]</span>                      <span class=
"org-comment-delimiter"># </span><span class="org-comment">or...</span>
df <span class="org-constant">&lt;-</span> df<span class=
"org-builtin">[</span>, tokeep, drop<span class=
"org-constant">=</span><span class="org-type">FALSE</span><span class=
"org-builtin">]</span>          <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">you will need this option to avoid the</span>
                                        <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">conversion to an atomic vector if</span>
                                        <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">there is only one column left</span>

df <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">subset</span><span class=
"org-builtin">(</span>df, select<span class=
"org-constant">=-</span><span class="org-ess-function-call">c</span><span class="org-builtin">(</span>remove1, remove2<span class="org-builtin">))</span>
                                        <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">use the `-' operator directly on a</span>
                                        <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">vector of column names</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-comment-delimiter">## </span><span class=
"org-comment">remove columns</span>
df$remove3 <span class="org-constant">&lt;-</span> <span class=
"org-type">NULL</span>

<span class="org-comment-delimiter">## </span><span class=
"org-comment">rename columns</span>
<span class="org-ess-function-call">colnames</span><span class=
"org-builtin">(</span>df<span class="org-builtin">)[</span><span class=
"org-ess-function-call">colnames</span><span class=
"org-builtin">(</span>df<span class="org-builtin">)</span> <span class=
"org-constant">==</span> <span class="org-string">"old"</span><span class=
"org-builtin">]</span> <span class="org-constant">&lt;-</span> <span class=
"org-string">"new"</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-78" class="outline-4">
          <h4 id="unnumbered-78">Merging data frames by common column</h4>

          <div class="outline-text-4" id="text-unnumbered-78">
            <dl class="org-dl">
              <dt><code>merge(df1, df2, by="CustomerId")</code></dt>

              <dd>Natural join (special case of <b>inner</b> join).</dd>

              <dt><code>merge(df1, df2, by="CustomerId",
              all.x=TRUE)</code></dt>

              <dd><b>Left</b> (outer) join.</dd>

              <dt><code>merge(df1, df2, by="CustomerId",
              all.y=TRUE)</code></dt>

              <dd><b>Right</b> (outer) join.</dd>

              <dt><code>merge(df1, df2, by="CustomerId", all=TRUE)</code></dt>

              <dd><b>(Full) outer</b> join (all records from both tables).</dd>
            </dl>

            <p>Merge data sets (of different columns).</p>

            <div class="org-src-container">
              <pre class="src src-R">
merged.data <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">merge</span><span class=
"org-builtin">(</span>df1, df2, by.x<span class=
"org-constant">=</span><span class="org-string">"id1"</span>, by.y<span class=
"org-constant">=</span><span class="org-string">"id2"</span>, all<span class=
"org-constant">=</span><span class="org-type">TRUE</span><span class=
"org-builtin">)</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-79" class="outline-4">
          <h4 id="unnumbered-79">Convert a list of data frames into one data
          frame</h4>

          <div class="outline-text-4" id="text-unnumbered-79">
            <p>Combine a list of data frames (of identical columns) into a
            single data frame:</p>

            <div class="org-src-container">
              <pre class="src src-R">
df <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">do.call</span><span class=
"org-builtin">(</span><span class=
"org-string">"rbind"</span>, list.of.data.frames<span class=
"org-builtin">)</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-80" class="outline-4">
          <h4 id="unnumbered-80">Converting</h4>

          <div class="outline-text-4" id="text-unnumbered-80">
            <dl class="org-dl">
              <dt><code>as.*()</code></dt>

              <dd>Explicitly coerce from one class to another.</dd>

              <dt><code>as.numeric()</code></dt>

              <dd>Coerce the (<code>character</code>) column to be
              <code>numeric</code>.</dd>

              <dt><code>as.Date("January 2, 2007", "%B %d, %Y")</code></dt>

              <dd>“2007-01-02”</dd>

              <dt><code>as.ts()</code></dt>

              <dd>Convert to a time series object.</dd>
            </dl>

            <p>You can always convert variables between types.</p>

            <div class="org-src-container">
              <pre class="src src-R">
df$x <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">as.factor</span><span class=
"org-builtin">(</span>df$x<span class=
"org-builtin">)</span>                 <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">character to factor</span>
df$x <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">as.character</span><span class=
"org-builtin">(</span>df$x<span class=
"org-builtin">)</span>              <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">factor to character</span>
</pre>
            </div>

            <div class="warning">
              <p><b>Warning</b><br />
              To convert factors to numeric or integer, first convert to
              character. Converting factors directly to numeric or integer data
              can lead to unwanted outcomes. Always check the results of a
              conversion to make sure R did what you wanted.</p>
            </div>

            <p>Convert at once all the string columns to factors:</p>

            <div class="org-src-container">
              <pre class="src src-R">
ind <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">sapply</span><span class=
"org-builtin">(</span>x, is.character<span class="org-builtin">)</span>
x<span class="org-builtin">[</span>ind<span class=
"org-builtin">]</span> <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">lapply</span><span class=
"org-builtin">(</span>x<span class="org-builtin">[</span>ind<span class=
"org-builtin">]</span>, factor<span class="org-builtin">)</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-81" class="outline-4">
          <h4 id="unnumbered-81">Applying a function to each list element</h4>

          <div class="outline-text-4" id="text-unnumbered-81">
            <p>Alternative (to <code>for</code> <b>loops</b>) to apply a
            function (or summary statistics).</p>

            <p>The following two articles provide the necessary background to
            motivate the <b>functional programming</b> techniques that are
            being provided by the <code>apply</code> family of functions.</p>

            <ul class="org-ul">
              <li><a href=
              "http://adv-r.had.co.nz/Functional-programming.html">Advanced R:
              Functional Programming</a>, by Hadley Wickham</li>

              <li><a href=
              "http://www.bioinformaticszen.com/post/simple-functional-programming-in-r/">
              Simple Functional Programming in R</a>, by Michael Barton</li>
            </ul>
          </div>

          <div id="outline-container-unnumbered-82" class="outline-5">
            <h5 id="unnumbered-82"><code>lapply</code></h5>

            <div class="outline-text-5" id="text-unnumbered-82">
              <p><b>Loop over a list</b> (or every <i>column</i> of a data
              frame) and apply a <b>function</b> on each <b>element.
              <i>Always</i> returns a list</b> back (that is, not a simplified
              result).</p>

              <ul class="org-ul">
                <li>(coerced) list <code>X</code></li>

                <li>function <code>FUN</code></li>

                <li>other arguments you wanna pass to the function
                <code>...</code></li>
              </ul>

              <div class="org-src-container">
                <pre class="src src-R">
x <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">list</span><span class=
"org-builtin">(</span>a<span class="org-constant">=</span><span class=
"org-ess-numbers">1</span>:<span class=
"org-ess-numbers">5</span>, b<span class="org-constant">=</span><span class=
"org-ess-function-call">rnorm</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">10</span><span class=
"org-builtin">))</span>
<span class="org-ess-function-call">lapply</span><span class=
"org-builtin">(</span>x, mean<span class="org-builtin">)</span>
</pre>
              </div>

              <div class="org-src-container">
                <pre class="src src-R">
<span class="org-ess-function-call">lapply</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">1</span>:<span class=
"org-ess-numbers">4</span>, runif, min<span class=
"org-constant">=</span><span class="org-ess-numbers">0</span>, max<span class=
"org-constant">=</span><span class="org-ess-numbers">10</span><span class=
"org-builtin">)</span>       <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">arguments passed through the `...'</span>
</pre>
              </div>

              <p>Extract the first column of each matrix of a list:</p>

              <div class="org-src-container">
                <pre class="src src-R">
<span class="org-ess-function-call">lapply</span><span class=
"org-builtin">(</span>x, <span class="org-keyword">function</span><span class=
"org-builtin">(</span>x<span class="org-builtin">)</span> x<span class=
"org-builtin">[</span>, <span class="org-ess-numbers">1</span><span class=
"org-builtin">])</span>
</pre>
              </div>
            </div>
          </div>

          <div id="outline-container-unnumbered-83" class="outline-5">
            <h5 id="unnumbered-83"><code>sapply</code></h5>

            <div class="outline-text-5" id="text-unnumbered-83">
              <p>Same as <code>lapply</code> (for lists or <i>columns</i> of
              data frames), but tries to “<b>simplify</b>” the <b>result</b> in
              a much more compact format (return the simplest possible data
              structure that can represent the output and is useful
              interactively, by putting all the elements into a <b>vector</b>
              or a <b>matrix</b> when possible, instead of returning a
              list).</p>

              <div class="org-src-container">
                <pre class="src src-R">
<span class="org-ess-function-call">sapply</span><span class=
"org-builtin">(</span>s, <span class="org-keyword">function</span><span class=
"org-builtin">(</span>x<span class="org-builtin">)</span> <span class=
"org-ess-function-call">colMeans</span><span class=
"org-builtin">(</span>x<span class="org-builtin">[</span>, <span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-string">"Ozone"</span>, <span class=
"org-string">"Solar.R"</span>, <span class=
"org-string">"Wind"</span><span class="org-builtin">)]))</span>
</pre>
              </div>

              <p>Pass <code>na.rm</code> argument to <code>ColMeans</code> to
              remove the missing values before calculating the mean.</p>

              <div class="org-src-container">
                <pre class="src src-R">
<span class="org-ess-function-call">sapply</span><span class=
"org-builtin">(</span>s, <span class="org-keyword">function</span><span class=
"org-builtin">(</span>x<span class="org-builtin">)</span> <span class=
"org-ess-function-call">colMeans</span><span class=
"org-builtin">(</span>x<span class="org-builtin">[</span>, <span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-string">"Ozone"</span>, <span class=
"org-string">"Solar.R"</span>, <span class=
"org-string">"Wind"</span><span class=
"org-builtin">)]</span>, na.rm<span class="org-constant">=</span><span class=
"org-type">TRUE</span><span class="org-builtin">))</span>
</pre>
              </div>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-84" class="outline-4">
          <h4 id="unnumbered-84">Splitting a vector into groups</h4>

          <div class="outline-text-4" id="text-unnumbered-84">
            <dl class="org-dl">
              <dt><code>split(x, f)</code></dt>

              <dd>
                Take a vector, and <b>split</b> it into subpieces (the number
                of groups identified by the levels of a <b>factor</b>
                variable). Always return a <b>list</b> (of lists?) back.

                <dl class="org-dl">
                  <dt><code>drop=TRUE</code></dt>

                  <dd>Don’t keep the empty levels of the factor.</dd>
                </dl>
              </dd>
            </dl>

            <p>Auxiliary function, used in conjunction with functions like
            <code>lapply</code> or <code>sapply</code> to apply a function to
            those individual groups.</p>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-ess-function-call">lapply</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">split</span><span class=
"org-builtin">(</span>x, f<span class="org-builtin">)</span>, mean<span class=
"org-builtin">)</span>
</pre>
            </div>

            <p>Like <code>tapply</code>, but without applying the summary
            statistics.</p>

            <p>Split a data frame (or other kinds of lists), and apply an
            <i>anonymous function</i>:</p>

            <div class="org-src-container">
              <pre class="src src-R">
s <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">split</span><span class=
"org-builtin">(</span>airquality, airquality$Month<span class=
"org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class="org-comment">split according to month</span>
<span class="org-ess-function-call">lapply</span><span class=
"org-builtin">(</span>s, <span class="org-keyword">function</span><span class=
"org-builtin">(</span>x<span class="org-builtin">)</span> <span class=
"org-ess-function-call">colMeans</span><span class=
"org-builtin">(</span>x<span class="org-builtin">[</span>, <span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-string">"Ozone"</span>, <span class=
"org-string">"Solar.R"</span>, <span class=
"org-string">"Wind"</span><span class="org-builtin">)])</span>
</pre>
            </div>

            <p>Split a data frame into chunks of size <code>max</code>:</p>

            <div class="org-src-container">
              <pre class="src src-R">
size.max <span class="org-constant">&lt;-</span> <span class=
"org-ess-numbers">20</span>
<span class="org-ess-function-call">split</span><span class=
"org-builtin">(</span>x, <span class=
"org-ess-function-call">ceiling</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">seq_along</span><span class=
"org-builtin">(</span>x$V1<span class="org-builtin">)</span> <span class=
"org-constant">/</span> size.max<span class="org-builtin">))</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-85" class="outline-4">
          <h4 id="unnumbered-85">Applying a function to every row/column</h4>

          <div class="outline-text-4" id="text-unnumbered-85">
            <dl class="org-dl">
              <dt><code>apply(df, margin, fun, ...)</code></dt>

              <dd>
                <p>Apply a function over the <i>margins</i> of an
                <b>array</b>.</p>

                <p>Often used to apply a function to the rows or columns of a
                matrix. Very useful if you wanna take <b>summaries</b> of
                matrices or higher-dimensional arrays (such as array of
                matrices).</p>

                <p><code>MARGIN</code> is an integer vector which indicates
                which margins should be “retained”:</p>

                <ul class="org-ul">
                  <li><b>margin 1</b> = apply FUN <b>for each row</b>
                  (dimension 1): preserve all the rows, eliminate all columns,
                  get a vector of the number of rows</li>

                  <li><b>margin 2</b> = <b>for each column</b> (dimension 2);
                  first dimension has been eliminated</li>
                </ul>

                <div class="org-src-container">
                  <pre class="src src-R">
x <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">matrix</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">rnorm</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">200</span><span class=
"org-builtin">)</span>, <span class="org-ess-numbers">20</span>, <span class=
"org-ess-numbers">10</span><span class="org-builtin">)</span>
<span class="org-ess-function-call">apply</span><span class=
"org-builtin">(</span>x, <span class=
"org-ess-numbers">2</span>, mean<span class="org-builtin">)</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre class="src src-R">
x <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">matrix</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">rnorm</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">200</span><span class=
"org-builtin">)</span>, <span class="org-ess-numbers">20</span>, <span class=
"org-ess-numbers">10</span><span class="org-builtin">)</span>
<span class="org-ess-function-call">apply</span><span class=
"org-builtin">(</span>x, <span class=
"org-ess-numbers">1</span>, quantile, probs<span class=
"org-constant">=</span><span class="org-ess-function-call">c</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">0.25</span>, <span class=
"org-ess-numbers">0.75</span><span class="org-builtin">))</span> <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">no default value for `probs'</span>
</pre>
                </div>

                <p>Shortcut functions (<i>much</i> faster on large
                matrices):</p>

                <ul class="org-ul">
                  <li><code>rowSums</code> = <code>apply(x, 1, sum)</code></li>

                  <li><code>rowMeans</code> = <code>apply(x, 1,
                  mean)</code></li>

                  <li><code>colSums</code> = <code>apply(x, 2, sum)</code></li>

                  <li><code>colMeans</code> = <code>apply(x, 2,
                  mean)</code></li>
                </ul>
              </dd>
            </dl>

            <div class="warning">
              <p><code>apply</code> works on matrices, <b>not data frames</b>.
              It will <b>coerce</b> the first argument <b>to a matrix</b>, by
              converting its columns to the lowest common form – which you can
              see with <code>apply(df, 2, class)</code>.</p>

              <p>If you are using a data frame which has character data as well
              as numeric data, <i>the whole matrix will be converted to
              character</i> and numerical operations will probably not give
              what you expect.</p>

              <p>Unlike <code>apply</code>, <code>sapply</code> does not coerce
              the data frame to a matrix: see <code>sapply(df,
              class)</code>.</p>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-86" class="outline-4">
          <h4 id="unnumbered-86">Applying a function to groups of data</h4>

          <div class="outline-text-4" id="text-unnumbered-86">
            <dl class="org-dl">
              <dt><code>tapply(x, index, fun)</code></dt>

              <dd>
                <p>Short for “<b>table apply</b>” (or “tagged apply”, where the
                tags identify the subsets).</p>

                <p>Apply a <b>function</b> over <b>subsets</b> of a vector:</p>

                <ul class="org-ul">
                  <li>Splits up a vector into little groups (such as men and
                  women, indicated by a <b>factor</b>),</li>

                  <li>Applies a function to those groups and</li>

                  <li>Brings the pieces back together.</li>
                </ul>

                <p>Function may be anonymous.</p>

                <p><code>Simplify=FALSE</code> to get back a list (instead of
                an array).</p>

                <p><code>tapply</code> is one of the most useful commands
                you’ll ever need. For example, to calculate statistics of
                <code>x</code> separately for each group identified in the
                variable <code>f</code>:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">tapply</span><span class=
"org-builtin">(</span>x, f, sum, simplify<span class=
"org-constant">=</span><span class="org-type">FALSE</span><span class=
"org-builtin">)</span>  <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">= lapply(split(x, f), sum)</span>
<span class="org-ess-function-call">tapply</span><span class=
"org-builtin">(</span>x, f, mean<span class=
"org-builtin">)</span>                 <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">= sapply(split(x, f), mean)</span>
<span class="org-ess-function-call">tapply</span><span class=
"org-builtin">(</span>x, f, length<span class="org-builtin">)</span>
</pre>
                </div>

                <p>For counting the number of elements, see <a href=
                "#table">table</a>.</p>
              </dd>

              <dt><code>interaction(f1, f2)</code></dt>

              <dd>
                <p>Combines all the levels of the first factor with all the
                levels of the second factor.</p>

                <p>You can also use <code>aggregate</code> to analyze groups
                defined by more than one categorical variable (e.g., month and
                year).</p>
              </dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-87" class="outline-4">
          <h4 id="unnumbered-87">Applying a function to parallel vectors or
          lists</h4>

          <div class="outline-text-4" id="text-unnumbered-87">
            <dl class="org-dl">
              <dt><code>mapply</code></dt>

              <dd>
                <p>Apply a <b>function</b> to the elements of <b>multiple
                lists</b> in parallel (multivariate version of
                <code>lapply</code>).</p>

                <p>For example, apply a function over 2 lists, where the
                elements of the first list go into one argument of the
                function, and the elements of the second list go into another
                argument of the function</p>

                <p><b>Vectorizing a function</b> (that doesn’t allow for vector
                arguments).</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">mapply</span><span class=
"org-builtin">(</span>rnorm, <span class=
"org-ess-numbers">1</span>:<span class="org-ess-numbers">3</span>, <span class=
"org-ess-numbers">1</span>:<span class="org-ess-numbers">3</span>, <span class=
"org-ess-numbers">2</span><span class=
"org-builtin">)</span>         <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">fixed standard deviation</span>
</pre>
                </div>

                <p>is the same as</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">list</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">rnorm</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">1</span>, <span class=
"org-ess-numbers">1</span>, <span class="org-ess-numbers">2</span><span class=
"org-builtin">)</span>,
     <span class="org-ess-function-call">rnorm</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">2</span>, <span class=
"org-ess-numbers">2</span>, <span class="org-ess-numbers">2</span><span class=
"org-builtin">)</span>,
     <span class="org-ess-function-call">rnorm</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">3</span>, <span class=
"org-ess-numbers">3</span>, <span class="org-ess-numbers">2</span><span class=
"org-builtin">))</span>
</pre>
                </div>
              </dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-88" class="outline-4">
          <h4 id="unnumbered-88">Checking on and removing inconsistent
          values</h4>
        </div>
      </div>

      <div id="outline-container-sec-1-15" class="outline-3">
        <h3 id="sec-1-15"><span class="section-number-3">1.15</span> 7. Strings
        (and dates)</h3>

        <div class="outline-text-3" id="text-1-15"></div>

        <div id="outline-container-unnumbered-89" class="outline-4">
          <h4 id="unnumbered-89">Getting the length of a string</h4>

          <div class="outline-text-4" id="text-unnumbered-89">
            <dl class="org-dl">
              <dt><code>nchar()</code></dt>

              <dd>Get the length of a string.</dd>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-90" class="outline-4">
          <h4 id="unnumbered-90">Concatenating strings</h4>

          <div class="outline-text-4" id="text-unnumbered-90">
            <dl class="org-dl">
              <dt><code>paste()</code></dt>

              <dd>
                <p><b>Concatenate</b> a set of <b>strings together</b> to
                create one string or a vector of strings.</p>

                <p>Convert a vector to a string:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">paste</span><span class=
"org-builtin">(</span><span class="org-ess-function-call">c</span><span class=
"org-builtin">(</span><span class="org-string">"This"</span>, <span class=
"org-string">"is"</span>, <span class="org-string">"one"</span>, <span class=
"org-string">"sentence."</span><span class=
"org-builtin">)</span>, collapse<span class="org-constant">=</span><span class=
"org-string">" "</span><span class="org-builtin">)</span>
</pre>
                </div>
                <pre class="example">
This is one sentence.
</pre>
              </dd>

              <dt><code>paste0(...)</code></dt>

              <dd>Equivalent to <code>paste(..., sep="")</code>.</dd>

              <dt><code>sprintf()</code></dt>
            </dl>
          </div>
        </div>

        <div id="outline-container-unnumbered-91" class="outline-4">
          <h4 id="unnumbered-91">Regular expressions</h4>

          <div class="outline-text-4" id="text-unnumbered-91"></div>

          <div id="outline-container-unnumbered-92" class="outline-5">
            <h5 id="unnumbered-92">Metacharacters</h5>

            <div class="outline-text-5" id="text-unnumbered-92">
              <dl class="org-dl">
                <dt><code>^</code></dt>

                <dd>Start of a line (or negation of a character class).</dd>

                <dt><code>$</code></dt>

                <dd>End of a line.</dd>

                <dt><code>[]</code></dt>

                <dd>Character classes.</dd>

                <dt><code>.</code></dt>

                <dd>Any character.</dd>

                <dt><code>|</code></dt>

                <dd>Or.</dd>

                <dt><code>()</code></dt>

                <dd>Subexpressions (alternatives or “remember” matched
                text).</dd>

                <dt><code>?</code></dt>

                <dd>Optional.</dd>

                <dt>\</dt>

                <dd>“Escape” the metacharacter.</dd>

                <dt><code>+</code></dt>

                <dd>Any number, including none.</dd>

                <dt><code>*</code></dt>

                <dd>
                  <p>Any number, at least one – it is “greedy” so it always
                  matches the <i>longest</i> possible string that satisfies the
                  regular expression.</p>

                  <p>The greediness can be turned off with the <code>?</code>
                  metacharacter (make the regex “lazy”), as in:</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
^<span class="org-ess-function-call">s</span><span class=
"org-builtin">(</span>.*?<span class="org-builtin">)</span>s$
</pre>
                  </div>
                </dd>

                <dt><code>{}</code></dt>

                <dd>Interval quantifiers (minimum, maximum).</dd>
              </dl>
            </div>
          </div>

          <div id="outline-container-unnumbered-93" class="outline-5">
            <h5 id="unnumbered-93">Regular expressions in R</h5>

            <div class="outline-text-5" id="text-unnumbered-93">
              <p>For the moment, we assume pattern matching on <b>ASCII
              strings</b>…</p>

              <p>These functions can take vector arguments.</p>

              <dl class="org-dl">
                <dt><code>grep</code></dt>

                <dd>
                  <p>Return the <b>indices</b> into the character vector where
                  the regex pattern matches (it won’t do anything).</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
i <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">grep</span><span class=
"org-builtin">(</span><span class=
"org-string">"regexp"</span>, vector<span class=
"org-builtin">)</span>        <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">get a set of indices</span>
j <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">grep</span><span class=
"org-builtin">(</span><span class=
"org-string">"anotherregexp"</span>, vector<span class=
"org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class="org-comment">get another set of indices</span>
<span class="org-ess-function-call">setdiff</span><span class=
"org-builtin">(</span>i, j<span class=
"org-builtin">)</span>                      <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">substract j elements from i when they are the same</span>
<span class="org-ess-function-call">setdiff</span><span class=
"org-builtin">(</span>j, i<span class=
"org-builtin">)</span>                      <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">different result</span>
</pre>
                  </div>

                  <p>Setting <code>value=TRUE</code> returns the <b>actual
                  elements</b> of the character vector that match.</p>
                </dd>

                <dt><code>grepl</code></dt>

                <dd>Return a <b>logical vector</b> (<code>TRUE</code> /
                <code>FALSE</code>) indicating which element matches (used for
                <i>subsetting</i>).</dd>

                <dt><code>regexpr</code></dt>

                <dd>
                  <p>Return the indices (integer vector) of the string <b>where
                  the first match begins</b> and the length of the match.</p>

                  <p>If I want to see what the match is, use
                  <code>substr</code>:</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">regexpr</span><span class=
"org-builtin">(</span><span class="org-string">"..."</span>, string<span class=
"org-builtin">)</span>
<span class="org-ess-function-call">substr</span><span class=
"org-builtin">(</span>string, start <span class=
"org-constant">+</span> length <span class="org-constant">-</span> <span class=
"org-ess-numbers">1</span><span class="org-builtin">)</span>
</pre>
                  </div>

                  <p>Useful in conjunction with <code>regmatches</code> which
                  extracts the matches in the strings without having you to use
                  <code>substr</code>.</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
r <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">regexpr</span><span class=
"org-builtin">(</span><span class="org-string">"..."</span>, string<span class=
"org-builtin">)</span>
<span class="org-ess-function-call">regmatches</span><span class=
"org-builtin">(</span>string, r<span class="org-builtin">)</span>
</pre>
                  </div>
                </dd>

                <dt><code>gregexpr</code></dt>

                <dd>Return <b>all of the matches</b> (“global”) in a given
                string.</dd>

                <dt><code>sub</code></dt>

                <dd>Replace <b>the first match</b> with another string (used to
                strip out stuff by replacing the match with nothing).</dd>

                <dt><code>gsub</code></dt>

                <dd>
                  <p>Replace <b>all of the matches</b> with another string.</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">names</span><span class=
"org-builtin">(</span>data<span class="org-builtin">)[</span>i<span class=
"org-builtin">]</span> <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">gsub</span><span class=
"org-builtin">(</span><span class="org-string">"-"</span>, <span class=
"org-string">"."</span>, <span class=
"org-ess-function-call">names</span><span class=
"org-builtin">(</span>data<span class="org-builtin">)[</span>i<span class=
"org-builtin">])</span>
</pre>
                  </div>
                </dd>

                <dt><code>regexec</code></dt>

                <dd>
                  <p>Give the indices (list) for parenthesized
                  sub-expressions.</p>

                  <p>If I want to see what the submatch is:</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
r <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">regexpr</span><span class=
"org-builtin">(</span><span class=
"org-string">"... (.*) ..."</span>, string<span class=
"org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class="org-comment">find all the date fields</span>
m <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">regmatches</span><span class=
"org-builtin">(</span>string, r<span class=
"org-builtin">)</span>         <span class=
"org-comment-delimiter"># </span><span class="org-comment">parse out</span>
dates <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">sapply</span><span class=
"org-builtin">(</span>m, <span class="org-keyword">function</span><span class=
"org-builtin">(</span>x<span class="org-builtin">)</span> x<span class=
"org-builtin">[</span><span class="org-ess-numbers">2</span><span class=
"org-builtin">])</span> <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">extract the 2nd element of each list object</span>
dates <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">as.Date</span><span class=
"org-builtin">(</span>dates, <span class=
"org-string">"%B %d, %Y"</span><span class="org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">convert to date</span>
<span class="org-ess-function-call">hist</span><span class=
"org-builtin">(</span>dates, <span class=
"org-string">"month"</span>, freq<span class=
"org-constant">=</span><span class="org-type">TRUE</span><span class=
"org-builtin">)</span>    <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">aggregate the dates by month and give an histogram</span>
</pre>
                  </div>
                </dd>
              </dl>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-16" class="outline-3">
        <h3 id="sec-1-16"><span class="section-number-3">1.16</span> 8.
        Probability</h3>

        <div class="outline-text-3" id="text-1-16"></div>

        <div id="outline-container-unnumbered-94" class="outline-4">
          <h4 id="unnumbered-94">Names of distributions</h4>

          <div class="outline-text-4" id="text-unnumbered-94">
            <ul class="org-ul">
              <li>Functions for <b>probability distributions</b>

                <dl class="org-dl">
                  <dt>rnorm(n, mean, sd)</dt>

                  <dd>Generate <code>n</code> <b>normal</b> random
                  variates</dd>

                  <dt>runif(n)</dt>

                  <dd>Generate <code>n</code> <b>uniform</b> random
                  variates</dd>

                  <dt>rpois(n, lambda)</dt>

                  <dd>Generate <code>n</code> <b>Poisson</b> random variates
                  with a given rate</dd>

                  <dt>rbinom(n, size, prob)</dt>

                  <dd>Generate binary data</dd>

                  <dt>rexp</dt>
                </dl>
              </li>
            </ul>

            <dl class="org-dl">
              <dt>rgamma</dt>
            </dl>

            <ul class="org-ul">
              <li>Associated functions

                <dl class="org-dl">
                  <dt>r*</dt>

                  <dd>Generate <b>random</b> numbers (draw samples)</dd>

                  <dt>d*</dt>

                  <dd>Evaluate the probability <b>density</b></dd>

                  <dt>p*</dt>

                  <dd>
                    <p>Evaluate the <b>cumulative distribution</b> function</p>

                    <div class="org-src-container">
                      <pre class="src src-R">
<span class="org-ess-function-call">ppois</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">4</span>, <span class=
"org-ess-numbers">2</span><span class=
"org-builtin">)</span>                      <span class=
"org-comment-delimiter"># </span><span class="org-comment">Pr(x &lt;= 4)</span>
<span class="org-ess-function-call">ppois</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">6</span>, <span class=
"org-ess-numbers">2</span><span class=
"org-builtin">)</span>                      <span class=
"org-comment-delimiter"># </span><span class="org-comment">Pr(x &lt;= 6)</span>
</pre>
                    </div>
                  </dd>

                  <dt>q*</dt>

                  <dd>evaluate the <b>quantile</b> function</dd>
                </dl>
              </li>
            </ul>
          </div>
        </div>

        <div id="outline-container-unnumbered-95" class="outline-4">
          <h4 id="unnumbered-95">Generate reproducible random numbers</h4>

          <div class="outline-text-4" id="text-unnumbered-95">
            <p>Set the random number <b>seed</b> is critical for
            <b>reproducibility</b>: <b>always set it when conducting a
            simulation!</b></p>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-ess-function-call">set.seed</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">1</span><span class=
"org-builtin">)</span>                           <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">or use any other positive integer</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-96" class="outline-4">
          <h4 id="unnumbered-96">Generate a random sample</h4>

          <div class="outline-text-4" id="text-unnumbered-96">
            <p><b>Sample randomly</b> from a specified vector of scalar
            objects.</p>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-ess-function-call">sample</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">1</span>:<span class=
"org-ess-numbers">10</span>, <span class="org-ess-numbers">4</span><span class=
"org-builtin">)</span>                         <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">select 4 different numbers at random</span>
<span class="org-ess-function-call">sample</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">1</span>:<span class=
"org-ess-numbers">10</span><span class=
"org-builtin">)</span>                            <span class=
"org-comment-delimiter"># </span><span class="org-comment">permutation</span>
<span class="org-ess-function-call">sample</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">1</span>:<span class=
"org-ess-numbers">10</span>, replace<span class=
"org-constant">=</span><span class="org-type">TRUE</span><span class=
"org-builtin">)</span>              <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">sample with replacement (I can get repeats)</span>
</pre>
            </div>

            <p>Sample can draw according to a set of probabilities.</p>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-17" class="outline-3">
        <h3 id="sec-1-17"><span class="section-number-3">1.17</span> 10.
        Graphics</h3>

        <div class="outline-text-3" id="text-1-17">
          <p>2 systems:</p>

          <dl class="org-dl">
            <dt><code>base</code></dt>

            <dd>
              Graphics are constructed piecemeal by <b>different function
              calls</b>; you can add things one by one:

              <ul class="org-ul">
                <li>annotate (some of the points in) the plot,</li>

                <li>put some points on the canvas,</li>

                <li>draw a title,</li>

                <li>add some axis labels,</li>

                <li>add some colors,</li>

                <li>add a legend.</li>
              </ul>
            </dd>

            <dt><code>lattice</code></dt>

            <dd>Graphics are constructed via a single function call: all
            options have to be specified at once (advantage: that allows R to
            calculate the necessary spacings, margins and font sizes).</dd>
          </dl>

          <p>Behavior:</p>

          <ul class="org-ul">
            <li>Base graphics functions have a “side effect”: they plot data
            directly to the graphics device.</li>

            <li>
              <p>Lattice graphics functions return an object of the class
              <code>trellis</code> (object designed for plotting).</p>

              <p>When you call Lattice functions, even if you don’t assign it
              to a “plot object”, the result will be <b>auto-printed</b>
              (generate the plot <b>on the graphics device</b>), so it will
              look like Lattice functions have a “side effect”</p>
            </li>
          </ul>

          <p>You cannot use functions from the base plotting system in a
          Lattice plot.</p>

          <p>Excellent resource for graphics: <a href=
          "http://www.cookbook-r.com/Graphs/Scatterplot/">http://www.cookbook-r.com/Graphs/Scatterplot/</a>.</p>
        </div>

        <div id="outline-container-unnumbered-97" class="outline-4">
          <h4 id="unnumbered-97">Base graphics</h4>

          <div class="outline-text-4" id="text-unnumbered-97"></div>

          <div id="outline-container-unnumbered-98" class="outline-5">
            <h5 id="unnumbered-98">Make a plot</h5>

            <div class="outline-text-5" id="text-unnumbered-98">
              <dl class="org-dl">
                <dt><code>plot</code></dt>

                <dd>Create a <b>scatter plot</b> (or another type of plot,
                depending on the class of the object being plotted).</dd>

                <dt><code>barplot</code></dt>

                <dd>Create a <b>bar chart</b> (analogue of an histogram for
                categorical data).</dd>

                <dt><code>hist</code></dt>

                <dd>Make an <b>histogram</b> showing the <b>distribution</b> of
                the numeric vector <code>x</code>.</dd>

                <dt><code>boxplot</code></dt>

                <dd>Create a box-and-whisker plot of the <code>y</code>
                variable by the grouping variable <code>x</code> (usually a
                <code>factor</code>).</dd>
              </dl>
            </div>

            <ul class="org-ul">
              <li>
                <a id="unnumbered-99" name="unnumbered-99"></a>Create a scatter
                plot<br />

                <div class="outline-text-6" id="text-unnumbered-99">
                  <dl class="org-dl">
                    <dt><code>plot(x)</code></dt>

                    <dd>
                      <p>Plot the (numeric) data against the index
                      (<code>1:N</code>).</p>

                      <div class="org-src-container">
                        <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">sort</span><span class=
"org-builtin">(</span>iris$Petal.Width<span class="org-builtin">)</span>,
     main<span class="org-constant">=</span><span class=
"org-string">"Distribution of petal widths"</span>,
     xlab<span class="org-constant">=</span><span class=
"org-string">"Rank"</span>, ylab<span class="org-constant">=</span><span class=
"org-string">"Width"</span>, col<span class="org-constant">=</span><span class=
"org-ess-function-call">as.integer</span><span class=
"org-builtin">(</span>iris$Species<span class=
"org-builtin">)</span><span class="org-constant">+</span><span class=
"org-ess-numbers">1</span><span class="org-builtin">)</span>
</pre>
                      </div>

                      <div class="figure">
                        <p><img src="Rplots/base-scatterplot-sort.png" alt=
                        "base-scatterplot-sort.png" /></p>
                      </div>
                    </dd>

                    <dt><code>plot(x, y)</code></dt>

                    <dd>
                      <p>Create a scatter plot of <code>x</code> and
                      <code>y</code>.</p>

                      <div class="org-src-container">
                        <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span>iris$Petal.Length, iris$Petal.Width,
     main<span class="org-constant">=</span><span class=
"org-string">"Petals: Length vs Width"</span>,
     xlab<span class="org-constant">=</span><span class=
"org-string">"Length"</span>, ylab<span class=
"org-constant">=</span><span class="org-string">"Width"</span>, col<span class=
"org-constant">=</span><span class=
"org-ess-function-call">as.integer</span><span class=
"org-builtin">(</span>iris$Species<span class=
"org-builtin">)</span><span class="org-constant">+</span><span class=
"org-ess-numbers">1</span><span class="org-builtin">)</span>
</pre>
                      </div>

                      <div class="figure">
                        <p><img src="Rplots/base-scatterplot.png" alt=
                        "base-scatterplot.png" /></p>
                      </div>
                    </dd>

                    <dt><code>plot(x, y, type="n")</code></dt>

                    <dd>
                      <p>Set up the plot window, but don’t actually plot the
                      data in there.</p>

                      <p>Note that you have <code>POSIXct</code> dates in your
                      data frame… XXX</p>
                    </dd>

                    <dt><code>plot(df)</code></dt>

                    <dd>
                      <p>Create <b>multiple scatter plots</b> if your data
                      frame contains more than 2&nbsp;columns.</p>

                      <div class="org-src-container">
                        <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">[</span>, <span class=
"org-ess-numbers">1</span>:<span class="org-ess-numbers">4</span><span class=
"org-builtin">]</span>, main<span class="org-constant">=</span><span class=
"org-string">"Multiple scatter plots"</span>,
     col<span class="org-constant">=</span><span class=
"org-ess-function-call">as.integer</span><span class=
"org-builtin">(</span>iris$Species<span class=
"org-builtin">)</span><span class="org-constant">+</span><span class=
"org-ess-numbers">1</span><span class="org-builtin">)</span>
</pre>
                      </div>

                      <div class="figure">
                        <p><img src="Rplots/base-multi-scatterplots.png" alt=
                        "base-multi-scatterplots.png" /></p>
                      </div>

                      <p>You can see that petal length and width appear
                      strongly correlated. You could check the correlation
                      between features with the <code>cor()</code>
                      function.</p>

                      <div class="org-src-container">
                        <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">cor</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">[</span><span class=
"org-constant">-</span><span class="org-ess-numbers">5</span><span class=
"org-builtin">])</span>
</pre>
                      </div>

                      <table border="2" cellspacing="0" cellpadding="6" rules=
                      "groups" frame="hsides">
                        <colgroup>
                          <col class="right" />
                          <col class="right" />
                          <col class="right" />
                          <col class="right" />
                        </colgroup>

                        <tbody>
                          <tr>
                            <td class="right">1</td>

                            <td class="right">-0.117569784133002</td>

                            <td class="right">0.871753775886583</td>

                            <td class="right">0.817941126271576</td>
                          </tr>

                          <tr>
                            <td class="right">-0.117569784133002</td>

                            <td class="right">1</td>

                            <td class="right">-0.42844010433054</td>

                            <td class="right">-0.366125932536439</td>
                          </tr>

                          <tr>
                            <td class="right">0.871753775886583</td>

                            <td class="right">-0.42844010433054</td>

                            <td class="right">1</td>

                            <td class="right">0.962865431402796</td>
                          </tr>

                          <tr>
                            <td class="right">0.817941126271576</td>

                            <td class="right">-0.366125932536439</td>

                            <td class="right">0.962865431402796</td>

                            <td class="right">1</td>
                          </tr>
                        </tbody>
                      </table>
                    </dd>
                  </dl>
                </div>
              </li>

              <li>
                <a id="unnumbered-100" name="unnumbered-100"></a><span class=
                "todo TODO">TODO</span> <code>barplot</code><br />

                <div class="outline-text-6" id="text-unnumbered-100">
                  <p>See <a href=
                  "http://onertipaday.blogspot.be/2007/05/barplots-of-two-sets.html">
                  http://onertipaday.blogspot.be/2007/05/barplots-of-two-sets.html</a>
                  for barplot with figures above the bars.</p>
                </div>
              </li>

              <li>
                <a id="unnumbered-101" name=
                "unnumbered-101"></a><code>hist</code><br />

                <div class="outline-text-6" id="text-unnumbered-101">
                  <p>Histogram (<b>distribution</b> of data, <b>frequency</b> =
                  exact number).</p>

                  <p>Generic function: you can call it on different types of
                  data. When you call <code>hist</code> on a <code>Date</code>
                  object, it requires an interval (“day” / “week” / “month” /
                  “year”) in order to break it up into sequences.</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">hist</span><span class=
"org-builtin">(</span>iris$Petal.Length, main<span class=
"org-constant">=</span><span class=
"org-string">"Histogram"</span>, col<span class=
"org-constant">=</span><span class="org-string">"lightblue"</span><span class=
"org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class="org-comment">shape of distribution</span>
</pre>
                  </div>

                  <div class="figure">
                    <p><img src="Rplots/base-hist.png" alt=
                    "base-hist.png" /></p>
                  </div>

                  <p><code>breaks</code> is key: it specifies the number of
                  categories to plot or the breakpoints for each category.</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">hist</span><span class=
"org-builtin">(</span>iris$Petal.Length, breaks<span class=
"org-constant">=</span><span class=
"org-ess-function-call">seq</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">1</span>, <span class=
"org-ess-numbers">7</span>, by<span class="org-constant">=</span><span class=
"org-ess-numbers">0.1</span><span class=
"org-builtin">)</span>, main<span class="org-constant">=</span><span class=
"org-string">"Histogram"</span>, col<span class=
"org-constant">=</span><span class="org-string">"lightblue"</span><span class=
"org-builtin">)</span>
                                        <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">much more fine-grained distribution</span>
</pre>
                  </div>

                  <div class="figure">
                    <p><img src="Rplots/base-hist-breaks.png" alt=
                    "base-hist-breaks.png" /></p>
                  </div>

                  <p>Can you explain the peculiar pattern? Graphical
                  representations of data are useful at identifying these sorts
                  of artifacts…</p>

                  <p>Report where the distribution is centered:</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">hist</span><span class=
"org-builtin">(</span>iris$Petal.Length, breaks<span class=
"org-constant">=</span><span class=
"org-ess-numbers">100</span>, main<span class=
"org-constant">=</span><span class=
"org-string">"Histogram"</span>, col<span class=
"org-constant">=</span><span class="org-string">"lightblue"</span><span class=
"org-builtin">)</span>
meanValue <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">mean</span><span class=
"org-builtin">(</span>iris$Petal.Length<span class="org-builtin">)</span>
<span class="org-ess-function-call">lines</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">rep</span><span class="org-builtin">(</span>meanValue, <span class="org-ess-numbers">100</span><span class="org-builtin">)</span>, <span class="org-ess-function-call">seq</span><span class="org-builtin">(</span><span class="org-ess-numbers">0</span>, <span class="org-ess-numbers">100</span>, length<span class="org-constant">=</span><span class="org-ess-numbers">100</span><span class="org-builtin">)</span>, col<span class="org-constant">=</span><span class="org-string">"red"</span>, lwd<span class="org-constant">=</span><span class="org-ess-numbers">5</span><span class="org-builtin">)</span>
</pre>
                  </div>

                  <div class="figure">
                    <p><img src="Rplots/base-hist-center.png" alt=
                    "base-hist-center.png" /></p>
                  </div>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">table</span><span class=
"org-builtin">(</span>iris$Petal.Length<span class=
"org-builtin">)</span>, main<span class="org-constant">=</span><span class=
"org-string">"Table"</span>, col<span class="org-constant">=</span><span class=
"org-string">"blue"</span><span class="org-builtin">)</span>
</pre>
                  </div>

                  <div class="figure">
                    <p><img src="Rplots/base-plot-table.png" alt=
                    "base-plot-table.png" /></p>
                  </div>

                  <p>Note – In the table plot, x values with one occurrence
                  (out of thousands) would be visible as one dot in the
                  graphics. They don’t in the histogram (as the line, being too
                  small, would be on the x-axis itself).</p>

                  <ul class="org-ul">
                    <li>
                      <p>Density plot (smoother histogram)</p>

                      <p><b>Density</b> = percentage of observations</p>

                      <div class="org-src-container">
                        <pre class="src src-R">
  dens <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">density</span><span class=
"org-builtin">(</span>data$var<span class="org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">smooth density function</span>
  <span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span>dens, lwd<span class="org-constant">=</span><span class=
"org-ess-numbers">3</span>, col<span class="org-constant">=</span><span class=
"org-string">"blue"</span><span class="org-builtin">)</span>
<span class="org-comment-delimiter"># </span><span class=
"org-comment">or: lines(dens, lwd=3, col="blue") after hist plot</span>
</pre>
                      </div>

                      <p>Easy to compare multiple distributions:</p>

                      <div class="org-src-container">
                        <pre class="src src-R">
<span class="org-comment-delimiter"># </span><span class=
"org-comment">add another density</span>
densMales <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">density</span><span class=
"org-builtin">(</span>data$var<span class="org-builtin">[</span><span class=
"org-ess-function-call">which</span><span class=
"org-builtin">(</span>data$sex<span class="org-constant">==</span><span class=
"org-ess-numbers">1</span><span class="org-builtin">)])</span>
<span class="org-ess-function-call">lines</span><span class=
"org-builtin">(</span>densMales, lwd<span class=
"org-constant">=</span><span class="org-ess-numbers">3</span>, col<span class=
"org-constant">=</span><span class="org-string">"orange"</span><span class=
"org-builtin">)</span>
</pre>
                      </div>
                    </li>
                  </ul>
                </div>
              </li>

              <li>
                <a id="unnumbered-102" name=
                "unnumbered-102"></a><code>boxplot</code><br />

                <div class="outline-text-6" id="text-unnumbered-102">
                  <p><code>boxplot</code> draws plot summarizing:</p>

                  <ul class="org-ul">
                    <li>Median (wide line)</li>

                    <li>Quartiles (Q1, Q3)</li>

                    <li>Lowest data still within 1.5 * IQR (= Q3 - Q1) of the
                    lower quartile, and the highest datum still within 1.5 *
                    IQR of the upper quartile</li>

                    <li>Outliers — By default, observations more than 1.5 * IQR
                    distant from nearest quartile</li>
                  </ul>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">boxplot</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">[</span>, <span class=
"org-ess-numbers">1</span>:<span class="org-ess-numbers">4</span><span class=
"org-builtin">]</span>, col<span class="org-constant">=</span><span class=
"org-ess-function-call">rainbow</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">4</span><span class=
"org-builtin">)</span>, main<span class="org-constant">=</span><span class=
"org-string">"Boxplot"</span>, ylab<span class=
"org-constant">=</span><span class=
"org-string">"Appropriate units"</span><span class="org-builtin">)</span>
</pre>
                  </div>

                  <div class="figure">
                    <p><img src="Rplots/base-boxplot.png" alt=
                    "base-boxplot.png" /></p>
                  </div>
                </div>
              </li>

              <li>
                <a id="unnumbered-103" name=
                "unnumbered-103"></a>violinplot<br />

                <div class="outline-text-6" id="text-unnumbered-103">
                  <p>See <a href=
                  "http://www.math.csi.cuny.edu/Statistics/R/simpleR/stat006.html">
                  http://www.math.csi.cuny.edu/Statistics/R/simpleR/stat006.html</a></p>
                </div>
              </li>
            </ul>
          </div>

          <div id="outline-container-unnumbered-104" class="outline-5">
            <h5 id="unnumbered-104">Add to an existing plot</h5>

            <div class="outline-text-5" id="text-unnumbered-104">
              <dl class="org-dl">
                <dt><code>points</code></dt>

                <dd>
                  <p><b>Add points to a plot</b> (<code>col</code> for boundary
                  color, <code>bg</code> for fill color, <code>pch</code> for
                  plotting character).</p>

                  <p>Plot points <b>in groups separately</b>.</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-constant">attach</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span>Petal.Length, Petal.Width, type<span class=
"org-constant">=</span><span class="org-string">"n"</span><span class=
"org-builtin">)</span>
<span class="org-ess-function-call">points</span><span class=
"org-builtin">(</span>Petal.Length<span class=
"org-builtin">[</span>Species <span class="org-constant">==</span> <span class=
"org-string">"setosa"</span><span class=
"org-builtin">]</span>, Petal.Width<span class=
"org-builtin">[</span>Species <span class="org-constant">==</span> <span class=
"org-string">"setosa"</span><span class="org-builtin">]</span>,
       col<span class="org-constant">=</span><span class=
"org-string">"red"</span><span class="org-builtin">)</span>
<span class="org-ess-function-call">points</span><span class=
"org-builtin">(</span>Petal.Length<span class=
"org-builtin">[</span>Species <span class="org-constant">==</span> <span class=
"org-string">"versicolor"</span><span class=
"org-builtin">]</span>, Petal.Width<span class=
"org-builtin">[</span>Species <span class="org-constant">==</span> <span class=
"org-string">"versicolor"</span><span class="org-builtin">]</span>,
       col<span class="org-constant">=</span><span class=
"org-string">"green"</span>, pch<span class="org-constant">=</span><span class=
"org-ess-numbers">19</span><span class="org-builtin">)</span>
<span class="org-ess-function-call">points</span><span class=
"org-builtin">(</span>Petal.Length<span class=
"org-builtin">[</span>Species <span class="org-constant">==</span> <span class=
"org-string">"virginica"</span><span class=
"org-builtin">]</span>, Petal.Width<span class=
"org-builtin">[</span>Species <span class="org-constant">==</span> <span class=
"org-string">"virginica"</span><span class="org-builtin">]</span>,
       col<span class="org-constant">=</span><span class=
"org-string">"blue"</span>, pch<span class="org-constant">=</span><span class=
"org-ess-numbers">18</span><span class="org-builtin">)</span>
</pre>
                  </div>

                  <div class="figure">
                    <p><img src="Rplots/base-points-distinguished.png" alt=
                    "base-points-distinguished.png" /></p>
                  </div>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span>iris$Petal.Length, iris$Petal.Width, col<span class=
"org-constant">=</span><span class=
"org-ess-function-call">as.integer</span><span class=
"org-builtin">(</span>iris$Species<span class=
"org-builtin">)</span><span class="org-constant">+</span><span class=
"org-ess-numbers">1</span><span class="org-builtin">)</span>
</pre>
                  </div>

                  <div class="figure">
                    <p><img src="Rplots/base-points-distinguished-col.png" alt=
                    "base-points-distinguished-col.png" /></p>
                  </div>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">[</span>, <span class=
"org-ess-numbers">3</span>:<span class="org-ess-numbers">4</span><span class=
"org-builtin">]</span>, col<span class="org-constant">=</span><span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-string">"red"</span>, <span class=
"org-string">"green"</span>, <span class="org-string">"blue"</span><span class=
"org-builtin">)[</span><span class=
"org-ess-function-call">unclass</span><span class=
"org-builtin">(</span>iris$Species<span class="org-builtin">)])</span>
</pre>
                  </div>

                  <div class="figure">
                    <p><img src=
                    "Rplots/base-points-distinguished-col-unclass.png" alt=
                    "base-points-distinguished-col-unclass.png" /></p>
                  </div>
                </dd>

                <dt><code>lines</code></dt>

                <dd>
                  <p><b>Add lines</b> (connect all the dots) <b>to a
                  plot</b>.</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">lines</span><span class=
"org-builtin">(</span>x, y<span class=
"org-builtin">)</span>                        <span class=
"org-comment-delimiter"># </span><span class="org-comment">all lines</span>
</pre>
                  </div>

                  <p>Even better: option <code>type="b"</code> to plot method
                  for <i>both</i> <b>points and lines</b>.</p>
                </dd>

                <dt><code>abline</code></dt>

                <dd>
                  <p>Add a straight line.</p>

                  <p>Plot the <b>regression line</b> of a scatter plot.</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-constant">attach</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span>Petal.Length, Petal.Width<span class=
"org-builtin">)</span>
fit <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">lm</span><span class=
"org-builtin">(</span>Petal.Width ~ Petal.Length<span class=
"org-builtin">)</span>
<span class="org-ess-function-call">abline</span><span class=
"org-builtin">(</span>fit, lwd<span class="org-constant">=</span><span class=
"org-ess-numbers">3</span>, col<span class="org-constant">=</span><span class=
"org-string">"blue"</span><span class="org-builtin">)</span>
</pre>
                  </div>

                  <div class="figure">
                    <p><img src="Rplots/base-abline.png" alt=
                    "base-abline.png" /></p>
                  </div>
                </dd>
              </dl>

              <dl class="org-dl">
                <dt><code>text</code></dt>

                <dd>
                  <p>Add text labels (inside the plot region).</p>

                  <p>Could be used to label datapoints.</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">text</span><span class=
"org-builtin">(</span><span class="org-constant">-</span><span class=
"org-ess-numbers">2</span>, <span class=
"org-ess-numbers">2</span>, <span class="org-string">"Label"</span><span class=
"org-builtin">)</span>
</pre>
                  </div>
                </dd>

                <dt><code>title</code></dt>

                <dd>
                  <p>Add a title (or axis labels, subtitle, …).</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">title</span><span class=
"org-builtin">(</span><span class="org-string">"plot"</span><span class=
"org-builtin">)</span>
<span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span>x, y, xlab<span class="org-constant">=</span><span class=
"org-string">"Weight"</span>, ylab<span class=
"org-constant">=</span><span class=
"org-string">"Height"</span>, main<span class=
"org-constant">=</span><span class=
"org-string">"Scatterplot"</span><span class="org-builtin">)</span>
</pre>
                  </div>
                </dd>

                <dt><code>mtext</code></dt>

                <dd>
                  <p>Add <b>text to the margins</b>.</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">mtext</span><span class=
"org-builtin">(</span><span class=
"org-string">"Label on the X-axis"</span>, side<span class=
"org-constant">=</span><span class="org-ess-numbers">2</span>, line<span class=
"org-constant">=</span><span class="org-ess-numbers">3</span>, col<span class=
"org-constant">=</span><span class="org-string">"blue"</span><span class=
"org-builtin">)</span>
</pre>
                  </div>

                  <p>Can be used to add multiline legends.</p>
                </dd>

                <dt><code>axis</code></dt>

                <dd>
                  <p><b>Annotate the axis</b> (tick marks, labels).</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">axis</span><span class=
"org-builtin">(</span>side<span class="org-constant">=</span><span class=
"org-ess-numbers">2</span>, col<span class="org-constant">=</span><span class=
"org-string">"blue"</span>, col.axis<span class=
"org-constant">=</span><span class="org-string">"blue"</span>, las<span class=
"org-constant">=</span><span class="org-ess-numbers">1</span><span class=
"org-builtin">)</span>
</pre>
                  </div>
                </dd>

                <dt><code>legend</code></dt>

                <dd>
                  <p>Add a legend.</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">legend</span><span class=
"org-builtin">(</span><span class=
"org-string">"topleft"</span>, legend<span class=
"org-constant">=</span><span class="org-string">"Data"</span>, pch<span class=
"org-constant">=</span><span class="org-ess-numbers">1</span><span class=
"org-builtin">)</span>
</pre>
                  </div>
                </dd>
              </dl>
            </div>
          </div>

          <div id="outline-container-unnumbered-105" class="outline-5">
            <h5 id="unnumbered-105">Changing graphical parameters</h5>

            <div class="outline-text-5" id="text-unnumbered-105">
              <dl class="org-dl">
                <dt><code>par()</code></dt>

                <dd>
                  <p>control <b>all the graphing parameters</b> that you can
                  specify (<i>defaults</i> for all plots in a session, which
                  can be overridden as arguments to specific plotting
                  functions).</p>

                  <dl class="org-dl">
                    <dt><code>pch</code></dt>

                    <dd><b>Plotting character</b> (default: open circle
                    symbol).</dd>

                    <dt><code>lty</code></dt>

                    <dd>Line type (default: <code>solid</code> line).</dd>

                    <dt><code>lwd</code></dt>

                    <dd>Line width.</dd>

                    <dt><code>col</code></dt>

                    <dd>Plotting color.</dd>

                    <dt><code>las</code></dt>

                    <dd>Orientation of the axis labels on the plot
                    (<code>las=2</code> will set the tick <b>labels</b> to be
                    <b>perpendicular</b> to the axis).</dd>

                    <dt><code>bg</code></dt>

                    <dd>Background color (default:
                    <code>transparent</code>).</dd>

                    <dt><code>mar</code></dt>

                    <dd>
                      <p>Margin size (vector of 4 numbers, 1 per side).</p>

                      <div class="org-src-container">
                        <pre class="src src-R">
<span class="org-ess-function-call">par</span><span class=
"org-builtin">(</span>mar<span class="org-constant">=</span><span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-ess-numbers">2</span>, <span class=
"org-ess-numbers">2</span>, <span class="org-ess-numbers">1</span>, <span class="org-ess-numbers">1</span><span class="org-builtin">))</span>
</pre>
                      </div>
                    </dd>

                    <dt><code>oma</code></dt>

                    <dd>Outer margin size (relevant if you have more than one
                    plot per canvas).</dd>

                    <dt><code>mfrow</code></dt>

                    <dd>
                      <p>Number of <b>plots per row and per column</b> on the
                      canvas (filled row-wise).</p>

                      <div class="org-src-container">
                        <pre class="src src-R">
<span class="org-ess-function-call">par</span><span class=
"org-builtin">(</span>mfrow<span class="org-constant">=</span><span class=
"org-ess-function-call">c</span><span class="org-builtin">(</span><span class=
"org-ess-numbers">2</span>, <span class="org-ess-numbers">1</span><span class=
"org-builtin">))</span>            <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">2 rows and 1 column</span>
<span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span>x, y<span class="org-builtin">)</span>
<span class="org-ess-function-call">plot</span><span class=
"org-builtin">(</span>x, z<span class="org-builtin">)</span>
</pre>
                      </div>
                    </dd>

                    <dt><code>mfcol</code></dt>

                    <dd>Number of plots per row and per column on the canvas
                    (filled column-wise).</dd>

                    <dt><code>bty</code></dt>

                    <dd>
                      <p>Type of “box” which is drawn around plots.</p>

                      <p>A value of <code>"n"</code> suppresses the box (same
                      as <code>axes=FALSE</code>).</p>
                    </dd>
                  </dl>

                  <p>Look at the defaults:</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">par</span><span class=
"org-builtin">(</span><span class="org-string">"lty"</span><span class=
"org-builtin">)</span>
</pre>
                  </div>
                </dd>

                <dt><code>?Devices</code></dt>

                <dd>
                  List graphical devices.

                  <dl class="org-dl">
                    <dt><code>pdf</code></dt>

                    <dd>Vector format (very, very large for a graphic with <b>2
                    million points</b> on it: specify information for every
                    single object on the plot).</dd>

                    <dt><code>png</code></dt>

                    <dd>Bitmapped format (specify information for pixels),
                    lossless <b>compression</b>, but <b>does not resize
                    well</b>.</dd>

                    <dt><code>jpeg</code></dt>

                    <dd>Lossy compression.</dd>

                    <dt><code>bitmap</code></dt>

                    <dd>If you’re running R in a batch mode (you can’t use the
                    <code>png</code> and <code>jpeg</code> functions).</dd>
                  </dl>
                </dd>

                <dt>(no term)</dt>

                <dd>
                  Copy the plot to another device

                  <dl class="org-dl">
                    <dt><code>dev.copy2pdf</code></dt>

                    <dd>copy a plot to PDF</dd>
                  </dl>
                </dd>
              </dl>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-106" class="outline-4">
          <h4 id="unnumbered-106">Lattice graphics</h4>

          <div class="outline-text-4" id="text-unnumbered-106">
            <ul class="org-ul">
              <li>
                <p>Tellis graphics</p>

                <dl class="org-dl">
                  <dt><code>xyplot</code></dt>

                  <dd><b>scatterplots</b></dd>

                  <dt><code>bwplot</code></dt>

                  <dd>box-and-whiskers plots (“boxplots”)</dd>

                  <dt>histogram</dt>

                  <dd>histograms</dd>

                  <dt>stripplot</dt>

                  <dd>like a boxplot but with actual points (instead of
                  boxes)</dd>

                  <dt>dotplot</dt>

                  <dd>plot dots on “violin strings”</dd>

                  <dt>splom</dt>

                  <dd>scatterplot matrix, like <code>pairs</code> in the base
                  graphics system</dd>

                  <dt><code>levelplot</code>, <code>contourplot</code></dt>

                  <dd>for plotting “image” data</dd>
                </dl>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-constant">library</span><span class=
"org-builtin">(</span>lattice<span class="org-builtin">)</span>
</pre>
                </div>

                <table border="2" cellspacing="0" cellpadding="6" rules=
                "groups" frame="hsides">
                  <colgroup>
                    <col class="left" />
                  </colgroup>

                  <tbody>
                    <tr>
                      <td class="left">lattice</td>
                    </tr>

                    <tr>
                      <td class="left">stats</td>
                    </tr>

                    <tr>
                      <td class="left">graphics</td>
                    </tr>

                    <tr>
                      <td class="left">grDevices</td>
                    </tr>

                    <tr>
                      <td class="left">utils</td>
                    </tr>

                    <tr>
                      <td class="left">datasets</td>
                    </tr>

                    <tr>
                      <td class="left">methods</td>
                    </tr>

                    <tr>
                      <td class="left">base</td>
                    </tr>
                  </tbody>
                </table>
              </li>

              <li>Generally create plots all in one go, from a single function
              call</li>

              <li>
                <p>Strength of Lattice functions = conditioning plots: you can
                plot the <b>relationship</b> between <code>x</code> and
                <code>y</code>, <b>conditioned</b> on the levels of a third
                variable (factor variable <code>f</code> or variable cut into
                different ranges, see <code>equal.count</code>)</p>

                <div class="org-src-container">
                  <pre class="src src-R">
y ~ x | f * g                         <span class=
"org-comment-delimiter"># </span><span class="org-comment">formula</span>
</pre>
                </div>

                <ul class="org-ul">
                  <li><code>y</code> = response (on the y-axis)</li>

                  <li><code>x</code> = input, predictor (on the x-axis)</li>

                  <li><code>f * g</code> = factors which are <b>interacting</b>
                  with each other (often, just one factor)</li>
                </ul>
              </li>

              <li>
                <p>Tell the function <code>xyplot</code> where to find the
                variables <code>y</code> and <code>x</code>: look up names
                inside the <code>environmental</code> data frame (because they
                are not objects in my workspace)</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">xyplot</span><span class=
"org-builtin">(</span>y ~ x, data<span class=
"org-constant">=</span>environmental<span class="org-builtin">)</span>
</pre>
                </div>
              </li>

              <li>
                <p>Lattice functions have a separate panel created for each
                level of the factors</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">xyplot</span><span class=
"org-builtin">(</span>y ~ x | f<span class="org-builtin">)</span>
</pre>
                </div>

                <p>The <b>panel function</b> controls what happens inside each
                panel of the entire plot</p>

                <p>I can create my own (anonymous) panel function:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">xyplot</span><span class=
"org-builtin">(</span>y ~ x | f,
       panel<span class="org-constant">=</span><span class=
"org-keyword">function</span><span class=
"org-builtin">(</span>x, y, ...<span class="org-builtin">)</span> <span class=
"org-builtin">{</span>    <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">x and y = data that appear in a specific panel (it's not all the data)</span>
               <span class=
"org-ess-function-call">panel.xyplot</span><span class=
"org-builtin">(</span>x, y, ...<span class="org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">plot using all the default options</span>
               <span class=
"org-ess-function-call">panel.abline</span><span class=
"org-builtin">(</span>h<span class="org-constant">=</span><span class=
"org-ess-function-call">median</span><span class=
"org-builtin">(</span>y<span class="org-builtin">)</span>, lty<span class=
"org-constant">=</span><span class="org-ess-numbers">2</span><span class=
"org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class="org-comment">plot the median of the y values in each panel</span>
       <span class="org-builtin">})</span>
</pre>
                </div>

                <p>Add a (simple linear) regression line to each panel of the
                plot:</p>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">xyplot</span><span class=
"org-builtin">(</span>y ~ x | f,
       panel<span class="org-constant">=</span><span class=
"org-keyword">function</span><span class=
"org-builtin">(</span>x, y, ...<span class="org-builtin">)</span> <span class=
"org-builtin">{</span>
               <span class=
"org-ess-function-call">panel.xyplot</span><span class=
"org-builtin">(</span>x, y, ...<span class="org-builtin">)</span>
               <span class=
"org-ess-function-call">panel.lmline</span><span class=
"org-builtin">(</span>x, y, col<span class="org-constant">=</span><span class=
"org-ess-numbers">2</span><span class="org-builtin">)</span>
       <span class="org-builtin">})</span>
</pre>
                </div>

                <div class="org-src-container">
                  <pre class="src src-R">
<span class="org-ess-function-call">xyplot</span><span class=
"org-builtin">(</span>y ~ x | f, pch<span class=
"org-constant">=</span><span class="org-ess-numbers">20</span>,
       panel<span class="org-constant">=</span><span class=
"org-keyword">function</span><span class=
"org-builtin">(</span>x, y, ...<span class="org-builtin">)</span> <span class=
"org-builtin">{</span>
               <span class=
"org-ess-function-call">panel.xyplot</span><span class=
"org-builtin">(</span>x, y, ...<span class="org-builtin">)</span>
               fit <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">lm</span><span class=
"org-builtin">(</span>y ~ x<span class="org-builtin">)</span>
               <span class=
"org-ess-function-call">panel.abline</span><span class=
"org-builtin">(</span>fit, lwd<span class="org-constant">=</span><span class=
"org-ess-numbers">2</span><span class="org-builtin">)</span> <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">add a regression line to the plot</span>
       <span class="org-builtin">})</span>
</pre>
                </div>
              </li>

              <li>Options

                <ul class="org-ul">
                  <li>Don’t worry about spacing: everything gets automatically
                  adjusted!</li>

                  <li id="main">title</li>

                  <li id="layout=c(1,4)">4 panels on top of each other</li>

                  <li id="as.table=TRUE">change the order in which the panels
                  are drawn, from top to bottom (default: from bottom to
                  top)</li>

                  <li id="xlab">label on the x-axis</li>

                  <li id="ylab">label on the y-axis</li>
                </ul>
              </li>

              <li>Functions

                <dl class="org-dl">
                  <dt>x.cut &lt;- equal.count(x, l)</dt>

                  <dd>cut the original <code>x</code> variable, creating
                  <code>l</code> different ranges (~ levels, which may overlap
                  slightly)</dd>

                  <dt>panel.loess(x, y)</dt>

                  <dd>give a smooth rendition of the linear model</dd>
                </dl>
              </li>
            </ul>
          </div>

          <div id="outline-container-unnumbered-107" class="outline-5">
            <h5 id="unnumbered-107">Splom</h5>

            <div class="outline-text-5" id="text-unnumbered-107">
              <ul class="org-ul">
                <li>
                  <p>Look at pairwise relationships possible in the data frame
                  (make a scatter plot of all the different variables against
                  each other)</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">splom</span><span class=
"org-builtin">(</span>~ df<span class="org-builtin">)</span>
</pre>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <div id="outline-container-unnumbered-108" class="outline-5">
            <h5 id="unnumbered-108">Histogram</h5>

            <div class="outline-text-5" id="text-unnumbered-108">
              <ul class="org-ul">
                <li>
                  <p>Histogram of <code>x</code></p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">histogram</span><span class=
"org-builtin">(</span>~ x, data<span class=
"org-constant">=</span>df<span class="org-builtin">)</span>
</pre>
                  </div>
                </li>

                <li>
                  <p>Histogram of <code>x</code>, as <code>f</code> varies (for
                  each range of <code>f.cut</code>)</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">histogram</span><span class=
"org-builtin">(</span>~ x | f.cut, data<span class=
"org-constant">=</span>df<span class="org-builtin">)</span>
</pre>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-109" class="outline-4">
          <h4 id="unnumbered-109">ggplot2</h4>

          <div class="outline-text-4" id="text-unnumbered-109">
            <p>See <a href=
            "http://tutorials.iq.harvard.edu/R/Rgraphics/Rgraphics.html">http://tutorials.iq.harvard.edu/R/Rgraphics/Rgraphics.html</a>
            for a comparison with Base graphics.</p>

            <p>See post of Antoine Lizée in <a href=
            "http://stackoverflow.com/questions/5234117/how-to-drop-columns-by-name-in-a-data-frame">
            http://stackoverflow.com/questions/5234117/how-to-drop-columns-by-name-in-a-data-frame</a>
            for an excellent performance reporting.</p>

            <div class="org-src-container">
              <pre class="src src-R">
<span class="org-constant">library</span><span class=
"org-builtin">(</span>ggplot2<span class="org-builtin">)</span>
<span class="org-ess-function-call">summary</span><span class=
"org-builtin">(</span>cars<span class="org-builtin">)</span>
<span class="org-ess-function-call">qplot</span><span class=
"org-builtin">(</span>speed, dist, data<span class=
"org-constant">=</span>cars<span class="org-builtin">)</span> <span class=
"org-constant">+</span> <span class=
"org-ess-function-call">geom_smooth</span><span class="org-builtin">()</span>
</pre>
            </div>

            <div class="figure">
              <p><img src="Rplots/ggplot2.png" alt="ggplot2.png" /></p>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-110" class="outline-4">
          <h4 id="unnumbered-110">Other graphics</h4>

          <div class="outline-text-4" id="text-unnumbered-110"></div>

          <div id="outline-container-unnumbered-111" class="outline-5">
            <h5 id="unnumbered-111">Pareto diagrams</h5>

            <div class="outline-text-5" id="text-unnumbered-111">
              <div class="org-src-container">
                <pre class="src src-R">
<span class="org-comment-delimiter">## </span><span class=
"org-comment">install.packages("qcc")</span>
<span class="org-constant">library</span><span class=
"org-builtin">(</span>qcc<span class="org-builtin">)</span>
<span class="org-ess-function-call">data</span><span class=
"org-builtin">(</span>iris<span class="org-builtin">)</span>
<span class="org-ess-function-call">pareto.chart</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">table</span><span class=
"org-builtin">(</span>iris<span class=
"org-builtin">[</span>iris$Species<span class=
"org-constant">==</span><span class="org-string">"setosa"</span>, <span class=
"org-builtin">]</span>$Petal.Length<span class="org-builtin">))</span>
</pre>
              </div>

              <div class="figure">
                <p><img src="Rplots/qcc-pareto.png" alt="qcc-pareto.png" /></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-18" class="outline-3">
        <h3 id="sec-1-18"><span class="section-number-3">1.18</span> 11. Linear
        regression and ANOVA</h3>

        <div class="outline-text-3" id="text-1-18">
          <p><a href=
          "https://www.zoology.ubc.ca/~schluter/R/fit-model/">https://www.zoology.ubc.ca/~schluter/R/fit-model/</a></p>
        </div>

        <div id="outline-container-unnumbered-112" class="outline-4">
          <h4 id="unnumbered-112">Linear model</h4>

          <div class="outline-text-4" id="text-unnumbered-112">
            <p>y = β<sub>0</sub> + β<sub>1</sub> x + ε</p>

            <div class="org-src-container">
              <pre class="src src-R">
x <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">rnorm</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">100</span><span class=
"org-builtin">)</span>                         <span class=
"org-comment-delimiter"># </span><span class="org-comment">predictor</span>
e <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">rnorm</span><span class=
"org-builtin">(</span><span class="org-ess-numbers">100</span>, <span class=
"org-ess-numbers">0</span>, <span class="org-ess-numbers">2</span><span class=
"org-builtin">)</span>                   <span class=
"org-comment-delimiter"># </span><span class="org-comment">noise</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-unnumbered-113" class="outline-4">
          <h4 id="unnumbered-113">Regression tree models</h4>

          <div class="outline-text-4" id="text-unnumbered-113">
            <ul class="org-ul">
              <li>arbres de régression : la variable expliquée est de type
              numérique et il s’agit de prédire une valeur la plus proche
              possible de la vraie valeur.</li>
            </ul>

            <p><a href=
            "http://www.statmethods.net/advstats/cart.html">http://www.statmethods.net/advstats/cart.html</a></p>
          </div>
        </div>

        <div id="outline-container-unnumbered-114" class="outline-4">
          <h4 id="unnumbered-114">Classification tree models</h4>

          <div class="outline-text-4" id="text-unnumbered-114">
            <ul class="org-ul">
              <li>arbres de classification : la variable expliquée est de type
              nominale (facteur). A chaque étape du partitionnement, on cherche
              à réduire l’impureté totale des deux noeuds fils par rapport au
              noeud père.</li>
            </ul>

            <div class="org-src-container">
              <pre class="src src-R">
rpart
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-19" class="outline-3">
        <h3 id="sec-1-19"><span class="section-number-3">1.19</span>
        Debugging</h3>

        <div class="outline-text-3" id="text-1-19">
          <ul class="org-ul">
            <li>3 main indications of a problem / <code>condition</code>:

              <ul class="org-ul">
                <li>
                  <p><code>message</code></p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">print</span><span class=
"org-builtin">(</span><span class="org-string">"message"</span><span class=
"org-builtin">)</span>
</pre>
                  </div>
                </li>

                <li>
                  <p><code>warning</code></p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">log</span><span class=
"org-builtin">(</span><span class="org-constant">-</span><span class=
"org-ess-numbers">1</span><span class="org-builtin">)</span>
</pre>
                  </div>
                </li>

                <li>
                  <p><code>error</code></p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-keyword">stop</span><span class=
"org-builtin">(</span><span class="org-string">"error"</span><span class=
"org-builtin">)</span>                       <span class=
"org-comment-delimiter"># </span><span class=
"org-comment">throw an error</span>
</pre>
                  </div>
                </li>
              </ul>
            </li>

            <li>General notion of a <code>condition</code>: you can create your
            own if something specific happens</li>

            <li>Functions:

              <dl class="org-dl">
                <dt>invisible(x)</dt>

                <dd><b>Prevent auto-printing</b> of the last element in the
                function value; <b>still return</b> the same object</dd>
              </dl>
            </li>

            <li>
              <b>Interactive</b> debugging tools to find problematic code:

              <dl class="org-dl">
                <dt><code>traceback</code></dt>

                <dd>Print out the function call stack – you have to call it
                <b>immediately</b> after the error occurred.</dd>

                <dt><code>debug</code></dt>

                <dd>Flag a function for “debug” mode to step through any
                function (you wrote or not), one expression at a time, from the
                top of the function.</dd>

                <dt>browser</dt>

                <dd>Put the function in debug mode anywhere in your code; in
                the browser, there is nothing in your environment except for
                the function arguments (and the default values which are not
                listed). You can nest browser frames: you can call the debug
                function even while you’re in the debugger.</dd>

                <dt>trace</dt>

                <dd>Insert debugging code into a function, without actually
                editing the function.</dd>

                <dt>recover</dt>

                <dd>
                  <p>Modify the default behavior (of getting the console back)
                  by creating an error handler.</p>

                  <div class="org-src-container">
                    <pre class="src src-R">
<span class="org-ess-function-call">options</span><span class=
"org-builtin">(</span>error<span class=
"org-constant">=</span>recover<span class="org-builtin">)</span>
</pre>
                  </div>
                </dd>
              </dl>
            </li>

            <li>Blunt techniques:

              <ul class="org-ul">
                <li><code>print</code></li>

                <li><code>cat</code></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <div id="outline-container-sec-1-20" class="outline-3">
        <h3 id="sec-1-20"><span class="section-number-3">1.20</span>
        Assert</h3>

        <div class="outline-text-3" id="text-1-20">
          <div class="org-src-container">
            <pre class="src src-R">
<span class="org-comment-delimiter">## </span><span class=
"org-comment">TODO Add a message to use; if not provided, generic one...</span>
<span class="org-function-name">warn_if_not_empty</span> <span class=
"org-constant">&lt;-</span> <span class=
"org-keyword">function</span> <span class=
"org-builtin">(</span>..., env<span class="org-constant">=</span><span class=
"org-ess-function-call">parent.frame</span><span class="org-builtin">())</span>
<span class="org-builtin">{</span>
  check <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">eval</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">substitute</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">alist</span><span class=
"org-builtin">(</span>...<span class="org-builtin">)))</span>
  <span class="org-ess-function-call">cat</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">paste</span><span class=
"org-builtin">(</span>check, <span class=
"org-string">"empty?\n"</span><span class="org-builtin">))</span>

  expr <span class="org-constant">&lt;-</span> <span class=
"org-ess-function-call">eval</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">parse</span><span class=
"org-builtin">(</span>text<span class="org-constant">=</span>check<span class=
"org-builtin">))</span>

  <span class="org-keyword">if</span> <span class=
"org-builtin">(</span><span class=
"org-ess-function-call">nrow</span><span class=
"org-builtin">(</span>expr<span class="org-builtin">)</span> <span class=
"org-constant">==</span> <span class="org-ess-numbers">0</span><span class=
"org-builtin">)</span> <span class="org-builtin">{</span>
    <span class="org-ess-function-call">cat</span><span class=
"org-builtin">(</span><span class="org-string">"OK!\n"</span><span class=
"org-builtin">)</span>
    <span class="org-keyword">return</span><span class=
"org-builtin">(</span><span class="org-type">TRUE</span><span class=
"org-builtin">)</span>
  <span class="org-builtin">}</span> <span class=
"org-keyword">else</span> <span class="org-builtin">{</span>
    <span class="org-ess-function-call">print</span><span class=
"org-builtin">(</span>expr<span class="org-builtin">)</span>
    <span class="org-keyword">stop</span><span class=
"org-builtin">(</span><span class=
"org-ess-function-call">nrow</span><span class=
"org-builtin">(</span>expr<span class="org-builtin">)</span>, <span class=
"org-string">" contradictions.\n"</span><span class="org-builtin">)</span>
  <span class="org-builtin">}</span>
<span class="org-builtin">}</span>

<span class="org-comment-delimiter">## </span><span class=
"org-comment">warn_if_not_empty(pfisortie[is.na(pfisortie$frmArretDate), ])</span>
<span class="org-comment-delimiter">##</span>
<span class="org-comment-delimiter">## </span><span class=
"org-comment">warn_if_not_empty(pfisortie[is.na(pfisortie$stgNom.x), ])</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-21" class="outline-3">
        <h3 id="sec-1-21"><span class="section-number-3">1.21</span>
        Contributing</h3>

        <div class="outline-text-3" id="text-1-21"></div>

        <div id="outline-container-unnumbered-115" class="outline-4">
          <h4 id="unnumbered-115">Issues</h4>

          <div class="outline-text-4" id="text-unnumbered-115">
            <p>Report issues and suggest features and improvements on the
            <a href="https://github.com/fniessen/refcard-R/issues/new">GitHub
            issue tracker</a>.</p>
          </div>
        </div>

        <div id="outline-container-unnumbered-116" class="outline-4">
          <h4 id="unnumbered-116">Patches</h4>

          <div class="outline-text-4" id="text-unnumbered-116">
            <p>I love contributions! Patches under any form are always
            welcome!</p>
          </div>
        </div>

        <div id="outline-container-unnumbered-117" class="outline-4">
          <h4 id="unnumbered-117">Donations</h4>

          <div class="outline-text-4" id="text-unnumbered-117">
            <p>If you like the refcard-R project, you can show your
            appreciation and support future development by making a <a href=
            "https://www.paypal.com/cgi-bin/webscr?cmd=_donations&amp;business=VCVAS6KPDQ4JC&amp;lc=BE&amp;item_number=refcard-R&amp;currency_code=EUR&amp;bn=PP-DonationsBF:btn_donate_LG.gif:NonHosted">
            donation</a> through PayPal.</p>

            <p>Regardless of the donations, refcard-R will always be free both
            as in beer and as in speech.</p>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-1-22" class="outline-3">
        <h3 id="sec-1-22"><span class="section-number-3">1.22</span>
        License</h3>

        <div class="outline-text-3" id="text-1-22">
          <p>Copyright (C) 2013-2014 Free Software Foundation, Inc.</p>

          <p>Author: Fabrice Niessen<br />
          Keywords: r reference card</p>

          <p>This program is free software; you can redistribute it and/or
          modify it under the terms of the GNU General Public License as
          published by the Free Software Foundation, either version 3 of the
          License, or (at your option) any later version.</p>

          <p>This program is distributed in the hope that it will be useful,
          but WITHOUT ANY WARRANTY; without even the implied warranty of
          MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
          General Public License for more details.</p>

          <p>You should have received a copy of the GNU General Public License
          along with this program. If not, see <a href=
          "http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
        </div>
      </div>
    </div>
  </div>

  <div id="postamble" class="status">
    <div id="footer">
      <div id="copyright">
        Copyright © Fabrice Niessen
      </div>
    </div>
  </div>
</body>
</html>
